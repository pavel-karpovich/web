/*! For license information please see 64.0d3aef08.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_bpinc_web_wallboard_ui=self.webpackChunk_bpinc_web_wallboard_ui||[]).push([[64],{4076:(e,t,n)=>{n.d(t,{I:()=>dc,i:()=>sc});var r=n(2322),a=n(6029),i=n.n(a),o=n(9022),l=n(9478),c=n.n(l),s=n(324);function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)(c()(t))}var d=n(6441),_=n(5886),f=n(9008),p=n(7421),y=n(7505),m=n(9717),b=n(9486),g=n(3346),v=new URL("http://localhost:9897");v.searchParams.append("domain",location.hostname);var h=v.toString(),O="bpClient/onShowDomainAuthorizationDialog",w=n(8715),S=n(3650),j="cursor-pointer text-primary-legacy",x="ext-link",A="ext-link-firefox",D="plugin-link",E=function(e){var t=e.isExtAvailable,n=e.install,i=(0,b.useLocalizationState)().t.INSTALLATION_PROCESS,o=(0,S.useInstallationMethods)(),l=o.installChromeExtension,c=o.installFirefoxExtension,s=o.installBPClientPlugin;(0,a.useEffect)((function(){var e=document.getElementById(x),t=document.getElementById(A),n=document.getElementById(D);return null==e||e.addEventListener("click",l),null==t||t.addEventListener("click",c),null==n||n.addEventListener("click",s),function(){null==e||e.removeEventListener("click",l),null==t||t.removeEventListener("click",c),null==n||n.removeEventListener("click",s)}}),[l,c,s]);var u=i.install_updateHeader(D,j);return n&&(u="chrome"===w.platformInfo.browser?t?i.install_installHeader(D,j):i.install_installHeaderChrome(x,D,j):"firefox"===w.platformInfo.browser?t?i.install_installHeader(D,j):i.install_installHeaderFirefox(A,D,j):i.install_installHeader(D,j)),(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:u}})},P=n(6508),I=n(3764);var T=function(e){var t=e.browserName,n=(0,b.useLocalizationState)("t").INSTALLATION_PROCESS,a=(0,f.useSessionState)("serverOrigin"),i="chrome"===w.platformInfo.browser,o="firefox"===w.platformInfo.browser,l="safari"===w.platformInfo.browser,c="";return i?c=S.URL_EXTENSION_INSTALLER_CHROME:o?c=a+S.URL_EXTENSION_INSTALLER_FIREFOX:l&&(c=a+S.URL_MAC_PLUGIN),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:n.bp_client_old_extension_version(t)}),(i||o||l)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{children:n.bp_client_update_extension_part1()}),(0,r.jsx)("a",{href:c,rel:"noopener noreferrer",target:"_blank",children:n.bp_client_update_extension_text()}),(0,r.jsx)("span",{children:n.bp_client_update_extension_part2()})]})]})},L=n(4432),N=function(){return location.reload()};var C=n(1960),k=5e3;function W(){var e,t,n,i,o,l,c,s,u,d,_,v;e=(0,p.useBpClientStateConnector)(),t=(0,g.useModalsStateMethods)(),n=t.openModal,i=t.closeModal,o=(0,b.useLocalizationState)("t"),l=(0,m.useEvent)((function(){n({id:O,title:o.INSTALLATION_PROCESS.bp_client_not_authorized_header(),body:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:o.INSTALLATION_PROCESS.bp_client_not_authorized_message_part1()}),(0,r.jsx)("a",{href:h,rel:"noopener noreferrer",target:"_blank",children:o.ERROR_MESSAGES.domainAuthentificationErrorAnchor()}),(0,r.jsx)("span",{children:o.INSTALLATION_PROCESS.bp_client_not_authorized_message_part2()})]}),actions:function(e){var t=e.closeModal;return(0,r.jsx)(y.SmButton,{onClick:t,children:o.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})}})})),c=(0,m.useEvent)((function(){i(O)})),(0,a.useEffect)((function(){return e.dispenser.subscribe({onShowDomainAuthorizationDialog:l,onHideDomainAuthorizationDialog:c}).unsubscribe}),[e,l,c]),function(){var e=(0,b.useLocalizationState)("t").WINDOW_POPUP_TITLES_AND_MESSAGES,t=(0,p.useBpClientState)("isExtensionAvailable"),n=(0,p.useBpClientStateConnector)(),i=(0,g.useModalsStateMethods)().openModal,o=(0,m.useEvent)((function(n){i({title:e.window_title_warning(),body:(0,r.jsx)(E,{install:n,isExtAvailable:t}),actions:{ok:{title:e.window_buttonOk()}}})}));(0,a.useEffect)((function(){return n.dispenser.subscribe({onInstallationRequired:o}).unsubscribe}),[n,o])}(),s=(0,I.useNotificationsState)("methods").showNotification,u=(0,P.useOfflineStateMethods)().setShowOfflineAlert,d=(0,P.useOfflineStateDataShowOfflineAlert)(),_=(0,P.useOfflineErrorMessages)(),v=(0,P.useIsOffline)(),(0,a.useEffect)((function(){d&&s({type:"error",id:I.Notifications.OfflineStateError,content:_.isOffline,closable:!0,duration:5e3,onHide:function(){return u(!1)}})}),[_.isOffline,u,s,d]),(0,a.useEffect)((function(){v||u(!1)}),[v,u]),function(){var e=(0,p.useBpClientStateConnector)(),t=(0,b.useLocalizationState)("t").WINDOW_POPUP_TITLES_AND_MESSAGES,n=(0,g.useModalsStateMethods)().openModal,i=(0,m.useEvent)((function(e){n({title:t.window_title_warning(),body:(0,r.jsx)(T,{browserName:e}),actions:function(e){var n=e.closeModal;return(0,r.jsx)(y.SmButton,{onClick:n,children:t.window_buttonOk()})}})}));(0,a.useEffect)((function(){return e.dispenser.subscribe({onShowExtensionIsOldDialog:i}).unsubscribe}),[e,i])}(),function(){var e=(0,I.useNotificationsState)("methods"),t=e.showNotification,n=e.hideNotificationById,i=(0,L.useAppConfigState)("isClientOutdated"),o=(0,f.useSessionState)("isLoggedIn"),l=(0,b.useLocalizationState)("t").GLOBAL,c=(0,m.useEvent)((function(){o&&(i?t({type:"error",id:I.Notifications.OutdatedClientAppError,message:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:l.reload_confirm_new_msg_part1()}),(0,r.jsx)("a",{href:"#",onClick:N,children:l.reload_confirm_action_button_text()}),(0,r.jsx)("span",{children:l.reload_confirm_new_msg_part2()})]})}):n(I.Notifications.OutdatedClientAppError))}));(0,a.useEffect)((function(){c()}),[i,c])}(),function(){var e=(0,f.useSessionStateConnector)(),t=(0,p.useBpClientState)("isHelperAppInstanceCreated"),n=(0,I.useNotificationsState)("methods"),r=n.showNotification,i=n.hideNotificationById,o=(0,f.useSessionState)("phoneType"),l=(0,b.useLocalizationState)("t"),c=(0,m.useEvent)((function(e){if(e.canDial||"phone_type_none"===o)C.bpLogger.info("SIP phone or external line is in service"),i(I.Notifications.PhoneOutOfServiceError);else{var n;switch(C.bpLogger.warn("SIP phone or external line is out of service"),o){case"phone_type_nailed":n=l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_virtual_phone_not_available();break;case"phone_type_soft_secure":case"phone_type_soft_unsecure":n=t?l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_phone_not_available():l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_helper_app_not_available();break;default:n=l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_phone_not_available()}r({type:"error",id:I.Notifications.PhoneOutOfServiceError,message:n,closable:!1,showDelay:k})}})),s=(0,m.useEvent)((function(e,t){"agentServer"===e&&4===t&&r({type:"warning",id:I.Notifications.PhoneOutOfServiceError,message:l.ERROR_MESSAGES.phoneIsNotRegistered(),closable:!1,showDelay:k})})),u=(0,m.useEvent)((function(){r({type:"warning",id:I.Notifications.PhoneOutOfServiceError,message:l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_3pcc_server_connectionLost(),closable:!1,showDelay:k})})),d=(0,m.useEvent)((function(){i(I.Notifications.PhoneOutOfServiceError)}));(0,a.useEffect)((function(){return e.dispenser.subscribe({onUpdateCapabilities:c,onServerError:s,onThreePCCServerGone:u,onThreePCCServerReady:d}).unsubscribe}),[c,s,u,d,e])}(),function(){var e=(0,I.useNotificationsState)("methods"),t=e.showNotification,n=e.hideNotificationById,r=(0,b.useLocalizationState)("t").WINDOW_POPUP_TITLES_AND_MESSAGES,i=(0,f.useSessionState)("sipServer"),o=(0,m.usePreviousValueRef)(i),l=(0,m.useEvent)((function(){i?n(I.Notifications.SipServerConnectionError):o.current&&t({type:"error",id:I.Notifications.SipServerConnectionError,message:r.window_messages_3pcc_server_connectionLost()})}));(0,a.useEffect)((function(){l()}),[i,l])}(),function(){var e=(0,I.useNotificationsState)("methods"),t=e.showNotification,n=e.hideNotificationById,r=(0,b.useLocalizationState)("t").GLOBAL,i=(0,a.useRef)(0),o=(0,m.useEvent)((function(){0!==i.current||(i.current=(new Date).getTime(),fetch("/",{method:"HEAD",cache:"no-store"}).catch((function(e){return console.error(e)})).finally((function(){var e=(new Date).getTime()-i.current;if(i.current=0,e>800){var a=r.slow_connection();t({type:"error",id:I.Notifications.SlowNetworkConnectionError,message:a}),C.bpLogger.warn("Slow connection detected")}else n(I.Notifications.SlowNetworkConnectionError)})))}));(0,a.useEffect)((function(){var e=setInterval(o,5e3);return function(){return clearInterval(e)}}),[o])}(),function(){var e=(0,I.useNotificationsState)("methods"),t=e.showNotification,n=e.hideNotificationById,i=(0,p.useBpClientState)("isDomainAuthorized"),o=(0,b.useLocalizationState)("t").ERROR_MESSAGES,l=(0,m.useEvent)((function(){i?n(I.Notifications.DomainNotAuthorizedForBPClientError):t({type:"error",id:I.Notifications.DomainNotAuthorizedForBPClientError,closable:!1,message:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:o.domain_authentication_error_part1()}),(0,r.jsx)("a",{href:h,rel:"noopener noreferrer",target:"_blank",children:o.domainAuthentificationErrorAnchor()}),(0,r.jsx)("span",{children:o.domain_authentication_error_part2()})]})})}));(0,a.useEffect)((function(){l()}),[i,l])}()}var M=function(e){var t=e.baseConnectors,n=e.authorizedConnectors,a=e.children;return W(),(0,r.jsx)(r.Fragment,{children:a(t,n)})},z=n(9572),R=n(5100),B=n(7282),K=n(6622),G=n(9464),F=n(4778),q=function(){var e=(0,f.useSessionState)("forceLogoutInfo"),t=(0,f.useSessionStateMethods)().closeForceLogout,n=(0,B.useFormatting)().formatFullName,a=(0,b.useLocalizationState)().t;(0,F.assertDefined)(e);var i=n(e.firstName,e.lastName),o=(0,K.formatDate)(e.timestamp);return(0,r.jsx)(y.SmSegment,{padded:!0,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2   overflow-hidden rounded-none border-none bg-transparent shadow-none",id:"login",children:(0,r.jsxs)(d.Modal,{isOpen:!0,size:"small",className:"max-w-[570px]","aria-describedby":"forceLogoutDialogDescription","data-testid":"forced-logout-modal",children:[(0,r.jsx)(d.Modal.Header,{children:a.WINDOW_POPUP_TITLES_AND_MESSAGES.window_title_information()}),(0,r.jsx)(d.Modal.Content,{children:(0,r.jsx)(d.Modal.Description,{id:"forceLogoutDialogDescription",children:(0,r.jsx)("p",{children:function(){switch(e.errorCode){case G.incomingErrorMessageCodes.forced_logout_by_another_session:return a.ERROR_MESSAGES.sessionWasOverwritten();case G.incomingErrorMessageCodes.forced_logout_by_supervisor:return a.ERROR_MESSAGES.forcedLogout(i,o);case G.incomingErrorMessageCodes.forced_logout_by_disabling_tenant:case G.incomingErrorMessageCodes.forced_logout_by_disabling_user:return a.ERROR_MESSAGES.account_has_been_disabled()}return e.forceLogoutReason}()})})}),(0,r.jsx)(d.Modal.Actions,{children:(0,r.jsx)(y.SmButton,{onClick:t,primary:!0,"data-testid":"ok-button",children:a.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})})]})})},V=function(){var e=(0,z.useCurrentTabRole)(),t=(0,f.useSessionState)(["authChecked","isLoggedIn","showLoginDialog","offerForceLogin","forceLogoutInfo"]),n=t.authChecked,a=t.isLoggedIn,i=t.showLoginDialog,o=t.offerForceLogin,l=t.forceLogoutInfo,c=!(0,b.useLocalizationState)("language")||"undecided"===e&&!n,s=!c&&(i||!a),u=!!l&&s,_=o&&!l&&s;return(0,r.jsxs)("div",{className:"mx-auto h-full w-[496px]",children:[c&&(0,r.jsx)(d.Loader,{active:!0,size:"huge",color:"primary"}),s&&(0,r.jsx)(R.LoginPage,{}),u&&(0,r.jsx)(q,{}),_&&(0,r.jsx)(R.ForceLogin,{})]})},U=i().memo((function(e){var t=e.baseConnectors,n=e.children;return(0,f.useSessionState)("isLoggedIn")?(0,r.jsx)(_.AuthorizedProviders,{baseConnectors:t,children:function(e){return(0,r.jsx)(M,{baseConnectors:t,authorizedConnectors:e,children:n})}}):(0,r.jsx)(V,{})})),H=n(1980),Q=function(e){var t=e.baseConnectors,n=e.children,a=e.BaseConnectorsConsumer;return a?(0,r.jsx)(a,{baseConnectors:t,children:n}):n},Y=function(e){var t=e.app,n=e.platformSpecific,a=e.BaseConnectorsConsumer,i=e.children;return(0,r.jsx)(_.BaseProviders,{platformSpecific:n,app:t,children:function(e){return(0,r.jsx)(Q,{baseConnectors:e,BaseConnectorsConsumer:a,children:(0,r.jsx)(H.Tooltip.Provider,{children:(0,r.jsx)(I.NotificationsStateProvider,{children:i(e)})})})}})},$=function(e){var t=e.app,n=e.platformSpecific,a=e.children,i=e.BaseConnectorsConsumer,o=e.className,l=e.appRemoteName;return(0,r.jsx)(d.AppStyleSelector,{app:l,children:(0,r.jsx)("div",{className:u("h-full",o),children:(0,r.jsx)(Y,{app:t,platformSpecific:n,BaseConnectorsConsumer:i,children:function(e){return(0,r.jsx)(U,{baseConnectors:e,children:a})}})})})},J=n(574),X=n(2488),Z=n(7422),ee=n(801),te=n(7947),ne={width:2,height:2},re={width:12,height:12},ae="new",ie=n(3830),oe=n.n(ie),le=n(2122),ce=n(6702);function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,t,n){return ue=me()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&pe(a,n.prototype),a},ue.apply(null,arguments)}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_e(e)}function fe(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?se(e):t;var n}function pe(e,t){return pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pe(e,t)}function ye(e){var t="function"==typeof Map?new Map:void 0;return ye=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ue(e,arguments,_e(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),pe(r,e)},ye(e)}function me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(a,e);var t,n,r=(t=a,n=me(),function(){var e,r=_e(t);if(n){var a=_e(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return fe(this,e)});function a(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),de(se(i=r.call(this,n)),"url",void 0),de(se(i),"status",void 0),de(se(i),"statusText",void 0),de(se(i),"body",void 0),de(se(i),"request",void 0),i.name="ApiError",i.url=t.url,i.status=t.status,i.statusText=t.statusText,i.body=t.body,i.request=e,i}return a}(ye(Error));function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t,n){return ve=De()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&xe(a,n.prototype),a},ve.apply(null,arguments)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t,n){return t&&he(e.prototype,t),n&&he(e,n),e}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Se(e)}function je(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function xe(e,t){return xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xe(e,t)}function Ae(e){var t="function"==typeof Map?new Map:void 0;return Ae=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ve(e,arguments,Se(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),xe(r,e)},Ae(e)}function De(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(a,e);var t,n,r=(t=a,n=De(),function(){var e,r=Se(t);if(n){var a=Se(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return je(this,e)});function a(e){var t;return ge(this,a),(t=r.call(this,e)).name="CancelError",t}return Oe(a,[{key:"isCancelled",get:function(){return!0}}]),a}(Ae(Error)),Pe=Symbol.toStringTag,Ie=function(){function e(t){var n=this;ge(this,e),we(this,Pe,void 0),we(this,"_isResolved",void 0),we(this,"_isRejected",void 0),we(this,"_isCancelled",void 0),we(this,"_cancelHandlers",void 0),we(this,"_promise",void 0),we(this,"_resolve",void 0),we(this,"_reject",void 0),this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this._cancelHandlers=[],this._promise=new Promise((function(e,r){n._resolve=e,n._reject=r;var a=function(e){n._isResolved||n._isRejected||n._isCancelled||n._cancelHandlers.push(e)};return Object.defineProperty(a,"isResolved",{get:function(){return n._isResolved}}),Object.defineProperty(a,"isRejected",{get:function(){return n._isRejected}}),Object.defineProperty(a,"isCancelled",{get:function(){return n._isCancelled}}),t((function(e){var t,r;n._isResolved||n._isRejected||n._isCancelled||(n._isResolved=!0,null===(t=(r=n)._resolve)||void 0===t||t.call(r,e))}),(function(e){var t,r;n._isResolved||n._isRejected||n._isCancelled||(n._isRejected=!0,null===(t=(r=n)._reject)||void 0===t||t.call(r,e))}),a)}))}return Oe(e,[{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this._promise.catch(e)}},{key:"finally",value:function(e){return this._promise.finally(e)}},{key:"cancel",value:function(){var e;if(!(this._isResolved||this._isRejected||this._isCancelled)){if(this._isCancelled=!0,this._cancelHandlers.length)try{var t=!0,n=!1,r=void 0;try{for(var a,i=this._cancelHandlers[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){(0,a.value)()}}catch(o){n=!0,r=o}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}catch(l){return void console.warn("Cancellation threw an error",l)}this._cancelHandlers.length=0,null===(e=this._reject)||void 0===e||e.call(this,new Ee("Request aborted"))}}},{key:"isCancelled",get:function(){return this._isCancelled}}]),e}(),Te={BASE:"",VERSION:"1.0.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0};function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ne(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Ce(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Ne(i,r,a,o,l,"next",e)}function l(e){Ne(i,r,a,o,l,"throw",e)}o(void 0)}))}}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ke(e,t,n[t])}))}return e}function Me(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var Be,Ke=function(e){return null!=e},Ge=function(e){return"string"==typeof e},Fe=function(e){return Ge(e)&&""!==e},qe=function(e){return"object"==typeof e&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.arrayBuffer&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])},Ve=function(e){return t=e,null!=(n=FormData)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](t):t instanceof n;var t,n},Ue=function(e){var t=[],n=function(e,r){Ke(r)&&(Array.isArray(r)?r.forEach((function(t){n(e,t)})):"object"==typeof r?Object.entries(r).forEach((function(t){var r=ze(t,2),a=r[0],i=r[1];n("".concat(e,"[").concat(a,"]"),i)})):function(e,n){t.push("".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(String(n))))}(e,r))};return Object.entries(e).forEach((function(e){var t=ze(e,2),r=t[0],a=t[1];n(r,a)})),t.length>0?"?".concat(t.join("&")):""},He=(Be=Ce((function(e,t){return Re(this,(function(n){return"function"==typeof t?[2,t(e)]:[2,t]}))})),function(e,t){return Be.apply(this,arguments)}),Qe=function(){var e=Ce((function(e,t){var n,r,a,i,o,l;return Re(this,(function(c){switch(c.label){case 0:return[4,He(t,e.TOKEN)];case 1:return n=c.sent(),[4,He(t,e.USERNAME)];case 2:return r=c.sent(),[4,He(t,e.PASSWORD)];case 3:return a=c.sent(),[4,He(t,e.HEADERS)];case 4:return i=c.sent(),o=Object.entries(We({Accept:"application/json"},i,t.headers)).filter((function(e){var t=ze(e,2),n=(t[0],t[1]);return Ke(n)})).reduce((function(e,t){var n=ze(t,2),r=n[0],a=n[1];return Me(We({},e),ke({},r,String(a)))}),{}),Fe(n)&&(o.Authorization="Bearer ".concat(n)),Fe(r)&&Fe(a)&&(l=function(e){try{return btoa(e)}catch(t){return Buffer.from(e).toString("base64")}}("".concat(r,":").concat(a)),o.Authorization="Basic ".concat(l)),t.body&&(t.mediaType?o["Content-Type"]=t.mediaType:qe(t.body)?o["Content-Type"]=t.body.type||"application/octet-stream":Ge(t.body)?o["Content-Type"]="text/plain":Ve(t.body)||(o["Content-Type"]="application/json")),[2,new Headers(o)]}}))}));return function(t,n){return e.apply(this,arguments)}}(),Ye=function(){var e=Ce((function(e,t,n,r,a,i,o){var l,c;return Re(this,(function(s){switch(s.label){case 0:return l=new AbortController,c={headers:i,body:null!=r?r:a,method:t.method,signal:l.signal},e.WITH_CREDENTIALS&&(c.credentials=e.CREDENTIALS),o((function(){return l.abort()})),[4,fetch(n,c)];case 1:return[2,s.sent()]}}))}));return function(t,n,r,a,i,o,l){return e.apply(this,arguments)}}(),$e=function(){var e=Ce((function(e){var t,n;return Re(this,(function(r){switch(r.label){case 0:if(204===e.status)return[3,7];r.label=1;case 1:return r.trys.push([1,6,,7]),(t=e.headers.get("Content-Type"))?t.toLowerCase().startsWith("application/json")?[4,e.json()]:[3,3]:[3,5];case 2:return[2,r.sent()];case 3:return[4,e.text()];case 4:return[2,r.sent()];case 5:return[3,7];case 6:return n=r.sent(),console.error(n),[3,7];case 7:return[2,void 0]}}))}));return function(t){return e.apply(this,arguments)}}(),Je=function(e,t){return new Ie(function(){var n=Ce((function(n,r,a){var i,o,l,c,s,u,d,_,f;return Re(this,(function(p){switch(p.label){case 0:return p.trys.push([0,5,,6]),i=function(e,t){var n=e.ENCODE_PATH||encodeURI,r=t.url.replace("{api-version}",e.VERSION).replace(/{(.*?)}/g,(function(e,r){var a;return(null===(a=t.path)||void 0===a?void 0:a.hasOwnProperty(r))?n(String(t.path[r])):e})),a="".concat(e.BASE).concat(r);return t.query?"".concat(a).concat(Ue(t.query)):a}(e,t),o=function(e){if(e.formData){var t=new FormData,n=function(e,n){Ge(n)||qe(n)?t.append(e,n):t.append(e,JSON.stringify(n))};return Object.entries(e.formData).filter((function(e){var t=ze(e,2),n=(t[0],t[1]);return Ke(n)})).forEach((function(e){var t=ze(e,2),r=t[0],a=t[1];Array.isArray(a)?a.forEach((function(e){return n(r,e)})):n(r,a)})),t}}(t),l=function(e){var t;if(e.body)return(null===(t=e.mediaType)||void 0===t?void 0:t.includes("/json"))?JSON.stringify(e.body):Ge(e.body)||qe(e.body)||Ve(e.body)?e.body:JSON.stringify(e.body)}(t),[4,Qe(e,t)];case 1:return c=p.sent(),a.isCancelled?[3,4]:[4,Ye(e,t,i,l,o,c,a)];case 2:return s=p.sent(),[4,$e(s)];case 3:u=p.sent(),d=function(e,t){if(t){var n=e.headers.get(t);if(Ge(n))return n}}(s,t.responseHeader),_={url:i,ok:s.ok,status:s.status,statusText:s.statusText,body:null!=d?d:u},function(e,t){var n=We({400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"},e.errors)[t.status];if(n)throw new be(e,t,n);if(!t.ok)throw new be(e,t,"Generic Error")}(t,_),n(_.body),p.label=4;case 4:return[3,6];case 5:return f=p.sent(),r(f),[3,6];case 6:return[2]}}))}));return function(e,t,r){return n.apply(this,arguments)}}())};function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ze=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getTeams",value:function(){return Je(Te,{method:"GET",url:"/statsapi/cfg/teams"})}},{key:"deleteSupervisorWidgetsSubscription",value:function(){return Je(Te,{method:"DELETE",url:"/statsapi/subscription/active"})}},{key:"getAgenda",value:function(e){var t=e.requestBody;return Je(Te,{method:"POST",url:"/statsapi/subscription/agenda",body:t,mediaType:"application/json"})}},{key:"createSupervisorWidgetsSubscription",value:function(e){var t=e.requestBody;return Je(Te,{method:"POST",url:"/statsapi/subscription",body:t,mediaType:"application/json"})}},{key:"getSupervisorWidgetsSubscriptionData",value:function(){return Je(Te,{method:"GET",url:"/statsapi/subscription/data"})}},{key:"getTenantConfiguration",value:function(){return Je(Te,{method:"GET",url:"/statsapi/cfg/tenant_configuration"})}},{key:"getAgents",value:function(){return Je(Te,{method:"GET",url:"/statsapi/cfg/agents"})}},{key:"getServices",value:function(){return Je(Te,{method:"GET",url:"/statsapi/cfg/services"})}},{key:"getTimeSeriesData",value:function(e){var t=e.measurement,n=e.statistic,r=e.start,a=e.end,i=e.timeInterval;return Je(Te,{method:"GET",url:"/statsapi/timeseries/{measurement}?statistic={statistic}&start={start}&end={end}&interval={timeInterval}",path:{measurement:t,statistic:n,start:r,end:a,timeInterval:i}})}}],(n=null)&&Xe(t.prototype,n),r&&Xe(t,r),e}();function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var tt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getWallboards",value:function(){return Je(Te,{method:"GET",url:"/statsapi/cfg/wallboards"})}},{key:"createWallboard",value:function(e){var t=e.requestBody;return Je(Te,{method:"POST",url:"/statsapi/cfg/wallboards",body:t,mediaType:"application/json"})}},{key:"getWallboardDetails",value:function(e){var t=e.wallboardId;return Je(Te,{method:"GET",url:"/statsapi/cfg/wallboards/{wallboardId}",path:{wallboardId:t}})}},{key:"deleteWallboard",value:function(e){var t=e.wallboardId;return Je(Te,{method:"DELETE",url:"/statsapi/cfg/wallboards/{wallboardId}",path:{wallboardId:t}})}},{key:"updateWallboardIsGlobal",value:function(e){var t=e.wallboardId,n=e.requestBody;return Je(Te,{method:"PUT",url:"/statsapi/cfg/wallboards/{wallboardId}/is_global",path:{wallboardId:t},body:n,mediaType:"application/json"})}},{key:"updateWallboardConfig",value:function(e){var t=e.wallboardId,n=e.requestBody;return Je(Te,{method:"PUT",url:"/statsapi/cfg/wallboards/{wallboardId}/config",path:{wallboardId:t},body:n,mediaType:"application/json"})}},{key:"updateWallboardName",value:function(e){var t=e.wallboardId,n=e.requestBody;return Je(Te,{method:"PUT",url:"/statsapi/cfg/wallboards/{wallboardId}/name",path:{wallboardId:t},body:n,mediaType:"application/json"})}}],(n=null)&&et(t.prototype,n),r&&et(t,r),e}();function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function at(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var it=function(e){var t=e.onClose,n=at(e,["onClose"]),i=(0,b.useLocalizationState)().t,o=(0,f.useSessionStateMethods)().logout,l=(0,a.useRef)(null);return(0,m.useFocusElement)(l,{timeout:0}),(0,r.jsxs)(d.Modal,rt(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){nt(e,t,n[t])}))}return e}({},n),{onClose:t,size:"small",className:"max-w-full","aria-labelledby":"logoutModalHeader",children:[(0,r.jsx)(d.Modal.Header,{role:"heading",id:"logoutModalHeader",children:i.LOGOUT_DIALOG.sign_out_text()}),(0,r.jsx)(d.Modal.Content,{children:i.LOGOUT_DIALOG.body_text()}),(0,r.jsx)(d.Modal.Actions,{children:(0,r.jsx)(d.SemanticButton,{onClick:function(){return o()},primary:!0,ref:l,children:i.LOGOUT_DIALOG.sign_out_text()})})]}))};function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ct=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=[e];return n.forEach((function(e){null!=e&&a.push(String(e))})),a},st=function(){return["agents"]},ut=function(){return["services"]},dt=function(e){return e?["subscribe",Object.entries(e||{}).reduce((function(e,t){var n=lt(t,2),r=n[0],a=n[1];return e+r+JSON.stringify(a)}),"")]:["subscribe"]},_t=function(){return["subscribe-data"]},ft=function(){return["tenant-config"]},pt=function(){return["agenda"]},yt=function(){return["teams"]},mt=function(e,t){return ct("time_series",e,t)},bt=function(e){return ct("wallboard",e)},gt=function(){return["wallboards"]},vt=function(){return["wallboard-templates"]};function ht(){var e=(0,J.useParams)().wallboardId;return(0,F.assertDefined)(e),(0,Z.useQuery)({queryKey:bt(e),queryFn:function(){return tt.getWallboardDetails({wallboardId:e})},enabled:e!==ae})}function Ot(){return(0,Z.useQuery)({queryKey:ut(),queryFn:Ze.getServices,staleTime:5*m.MS_IN_MINUTE})}function wt(){return(0,Z.useQuery)({queryKey:yt(),queryFn:Ze.getTeams})}function St(){return(0,Z.useQuery)({queryKey:gt(),queryFn:function(){return tt.getWallboards().then((function(e){return e.wallboards}))},gcTime:10*m.MS_IN_SECOND,staleTime:10*m.MS_IN_SECOND})}const jt=JSON.parse('[{"config":{"widgets":[],"style":{"bgcolor":"000000","cardcolor":"233752","cardborder":"solid 1px","cardbordercolor":"000000","fontcolor":"73E0FF","underline":"solid 1px","underlinecolor":"73E0FF","alertbg":"A11D3B","alertfont":"FFFFFF","alertborder":"8D1427"}},"name":"Empty"},{"config":{"widgets":[{"config":{"id":"1","type":"grid","title":"Agents","x":0,"y":0,"width":12,"height":12,"show_settings":true,"subscription":{"type":"agent_grid","req":{"id":"1","columns":[{"id":"1","statName":"first_last_name","coltitle":"Name"},{"id":"2","statName":"acd_state","coltitle":"State"},{"id":"3","statName":"state_duration","coltitle":"Duration"},{"id":"4","statName":"agent_idle_time","coltitle":"Idle Time"},{"id":"5","statName":"agent_total_break_time","coltitle":"Break Time"},{"id":"6","statName":"active_item_service_name","coltitle":"Item Svc"},{"id":"7","statName":"active_item_media_type","coltitle":"Media"},{"id":"8","statName":"active_item_hold_duration","coltitle":"Hold"},{"id":"9","statName":"active_item_direction","coltitle":"Direction"},{"id":"10","statName":"active_item_is_flagged","coltitle":"Flag"},{"id":"11","statName":"active_item_talk_duration","coltitle":"Talk"},{"id":"12","statName":"active_item_state","coltitle":"State"},{"id":"13","statName":"calls_average_acw_time_per_day","coltitle":"Avg ACW"},{"id":"14","statName":"in_calls_handled_per_day","coltitle":"Inb Handled"},{"id":"15","statName":"in_calls_rejected_per_day","coltitle":"Inb Rejects"},{"id":"16","statName":"out_calls_handled_per_day","coltitle":"Outb Handled"},{"id":"17","statName":"acd_next_state","coltitle":"Next state"},{"id":"18","statName":"team_name","coltitle":"Team"}],"team_ids":[],"limit":150,"order":[{"by":"1","dir":"ASC"}]}},"columtitle":true,"agent_stats":{"busy":true,"ready":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":true}}}],"style":{"bgcolor":"000000","cardcolor":"233752","cardborder":"solid 1px","cardbordercolor":"000000","fontcolor":"73E0FF","underline":"solid 1px","underlinecolor":"73E0FF","alertbg":"A11D3B","alertfont":"FFFFFF","alertborder":"8D1427"}},"name":"All Agents"},{"config":{"widgets":[{"config":{"id":"1","type":"grid","title":"Queues","x":2,"y":0,"width":5,"height":5,"show_settings":true,"subscription":{"type":"service_grid","req":{"id":"2","columns":[{"id":"1","statName":"name","coltitle":"Name"},{"id":"9","statName":"service_level_threshold_time","coltitle":"SL"},{"id":"3","statName":"in_calls_abandoned_in_queue_per_day","coltitle":"Ab"},{"id":"4","statName":"in_max_wait_time","coltitle":"MxWait"},{"id":"5","statName":"in_calls_waiting","coltitle":"inQ"},{"id":"6","statName":"agents_logged","coltitle":"Agents"},{"id":"2","statName":"in_calls_received_per_day","coltitle":"Calls"}],"service_ids":[],"limit":6,"order":[{"by":"2","dir":"DESC"}]}},"columtitle":true,"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":false}}},{"config":{"type":"grid","title":"Longest Calls","x":7,"y":0,"width":2,"height":3,"show_settings":true,"id":"2","subscription":{"type":"agent_grid","req":{"id":"9","columns":[{"id":"1","statName":"first_last_name"},{"id":"2","statName":"state_duration"}],"team_ids":[],"limit":5,"order":[{"by":"2","dir":"DESC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":true},"columtitle":true}},{"config":{"type":"grid","title":"Longest Not Ready","x":7,"y":3,"width":2,"height":3,"show_settings":true,"id":"3","subscription":{"type":"agent_grid","req":{"id":"10","columns":[{"id":"1","statName":"first_last_name"},{"id":"2","statName":"state_duration"},{"id":"3","statName":"reason"}],"team_ids":[],"limit":5,"order":[{"by":"2","dir":"DESC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":true},"columtitle":true}},{"config":{"type":"grid","title":"Longest Hold","x":7,"y":6,"width":2,"height":3,"show_settings":true,"id":"4","subscription":{"type":"agent_grid","req":{"id":"11","columns":[{"id":"1","statName":"first_last_name"},{"id":"2","statName":"active_item_hold_duration"}],"team_ids":[],"limit":5,"order":[{"by":"2","dir":"DESC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":true},"columtitle":true}},{"config":{"type":"grid","title":"All agents","x":9,"y":0,"width":3,"height":12,"show_settings":true,"id":"5","subscription":{"type":"agent_grid","req":{"id":"13","columns":[{"id":"1","statName":"first_last_name","coltitle":"Name"},{"id":"2","statName":"acd_state","coltitle":"State"},{"id":"3","statName":"in_calls_handled_per_day","coltitle":"Calls"}],"team_ids":[],"limit":70,"order":[{"by":"1","dir":"DESC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":true},"columtitle":true}},{"config":{"type":"single","title":"Waiting in All Queues","x":0,"y":0,"width":2,"height":4,"show_settings":true,"id":"6","subscription":{"type":"stats_total","req":["in_calls_waiting","in_max_wait_time"]},"value":"in_calls_waiting","optValue":"in_max_wait_time | sp_duration","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"type":"grid","title":"Positive Disposition Counts","x":5,"y":5,"width":2,"height":5,"show_settings":true,"id":"7","subscription":{"type":"agent_grid","req":{"id":"8","columns":[{"id":"1","statName":"first_last_name"},{"id":"2","statName":"calls_dispositions_per_day"}],"team_ids":[],"limit":9,"order":[{"by":"2","dir":"DESC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":true},"columtitle":true}},{"config":{"type":"news","title":"Announcements","x":2,"y":10,"width":5,"height":2,"show_settings":true,"id":"8","subscription":{"type":"chat_messages","req":{"filter":"","limit":2}}}},{"config":{"type":"single","title":"Abandoned, All Queues","x":0,"y":4,"width":2,"height":4,"show_settings":true,"id":"9","subscription":{"type":"stats_total","req":["in_calls_abandoned_in_queue_per_day","in_calls_short_abandoned_in_queue_ratio_per_day"]},"value":"in_calls_abandoned_in_queue_per_day","optValue":"in_calls_short_abandoned_in_queue_ratio_per_day | sp_percent","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"type":"single","title":"Queued, All Queues","x":0,"y":8,"width":2,"height":4,"show_settings":true,"id":"10","subscription":{"type":"stats_total","req":["in_calls_queued_per_day","in_calls_abandoned_in_queue_ratio_per_day"]},"value":"in_calls_queued_per_day","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"optValue":"in_calls_abandoned_in_queue_ratio_per_day | sp_percent","warning_sound":false}},{"config":{"type":"grid","title":"Longest ACW","x":7,"y":9,"width":2,"height":3,"show_settings":true,"id":"11","subscription":{"type":"agent_grid","req":{"id":"12","columns":[{"id":"1","statName":"first_last_name"},{"id":"2","statName":"state_duration"}],"team_ids":[],"limit":5,"order":[{"by":"2","dir":"ASC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":true},"columtitle":true}},{"config":{"type":"summary","title":"Agent State Summary","x":2,"y":5,"width":3,"height":5,"show_settings":true,"id":"12","subscription":{"type":"summary","req":{"id":"12","columns":[{"id":"1","statName":"acd_state"}],"limit":1000,"order_by":"1","order_dir":"ASC","filter_by":"1","filter_value":"","filter_operation":"NE","team_ids":[]}}}}],"style":{"bgcolor":"000000","cardcolor":"233752","cardborder":"solid 1px","cardbordercolor":"000000","fontcolor":"73E0FF","underline":"solid 1px","underlinecolor":"73E0FF","alertbg":"A11D3B","alertfont":"FFFFFF","alertborder":"8D1427"}},"name":"Contact Center Overview"},{"config":{"widgets":[{"config":{"id":"1","type":"single","title":"New Email","x":0,"y":0,"width":3,"height":4,"show_settings":true,"subscription":{"type":"stats_total","req":["in_email_received_new_per_day"],"service_ids":[]},"value":"in_email_received_new_per_day","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"id":"2","type":"single","title":"Email Carried Over","x":3,"y":0,"width":3,"height":4,"show_settings":true,"subscription":{"type":"stats_total","req":["in_email_carried_over"],"service_ids":[]},"value":"in_email_carried_over","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"id":"3","type":"single","title":"Email Handled","x":0,"y":4,"width":3,"height":4,"show_settings":true,"subscription":{"type":"stats_total","req":["in_email_handled_new_per_day"],"service_ids":[]},"value":"in_email_handled_new_per_day","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"id":"4","type":"single","title":"Email Replied","x":0,"y":8,"width":3,"height":4,"show_settings":true,"subscription":{"type":"stats_total","req":["in_email_processed_replied_per_day"],"service_ids":[]},"value":"in_email_processed_replied_per_day","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"id":"5","type":"grid","title":"Top Personal Queues","x":6,"y":0,"width":3,"height":4,"show_settings":true,"subscription":{"type":"agent_grid","req":{"id":"5","columns":[{"id":"1","statName":"first_last_name","coltitle":"Name"},{"id":"2","statName":"in_email_waiting_in_personal_queues","coltitle":"In Pers Q Now"}],"team_ids":[],"limit":25,"order":[{"by":"2","dir":"DESC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":true},"columtitle":true}},{"config":{"id":"6","type":"grid","title":"Top Agents by Email Handled","x":9,"y":0,"width":3,"height":4,"show_settings":true,"subscription":{"type":"agent_grid","req":{"id":"6","columns":[{"id":"1","statName":"first_last_name","coltitle":"Name"},{"id":"2","statName":"in_email_handled_new_per_day","coltitle":"Top Handled"}],"team_ids":[],"limit":25,"order":[{"by":"2","dir":"DESC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":true},"columtitle":true}},{"config":{"id":"7","type":"grid","title":"Email Services","x":6,"y":8,"width":6,"height":4,"show_settings":true,"subscription":{"type":"service_grid","req":{"id":"7","columns":[{"id":"1","statName":"name","coltitle":"Name"},{"id":"2","statName":"service_level_threshold_time","coltitle":"SL Thresh"},{"id":"3","statName":"service_level_target","coltitle":"SL Target"},{"id":"4","statName":"service_level_per_day","coltitle":"In SL"},{"id":"5","statName":"in_email_received_new_per_day","coltitle":"New"},{"id":"6","statName":"in_email_carried_over","coltitle":"Carried Over"},{"id":"7","statName":"in_email_waiting_in_personal_queues","coltitle":"in PQ"},{"id":"8","statName":"in_email_processed_replied_per_day","coltitle":"Replied"},{"id":"9","statName":"in_email_processed_noreply_per_day","coltitle":"Dispositioned"}],"service_ids":[],"limit":20,"order":[{"by":"1","dir":"DESC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":false},"columtitle":true}},{"config":{"type":"single","title":"Email Dispositioned wo Reply","x":3,"y":8,"width":3,"height":4,"show_settings":true,"id":"8","subscription":{"type":"stats_total","req":["in_email_processed_noreply_per_day"],"service_ids":[]},"value":"in_email_processed_noreply_per_day","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"type":"single","title":"Email in Personal Queues","x":3,"y":4,"width":3,"height":4,"show_settings":true,"id":"9","subscription":{"type":"stats_total","req":["in_email_waiting_in_personal_queues"],"service_ids":[]},"value":"in_email_waiting_in_personal_queues","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"type":"grid","title":"Bottom Agents by Email Handled","x":6,"y":4,"width":3,"height":4,"show_settings":true,"id":"10","subscription":{"type":"agent_grid","req":{"id":"10","columns":[{"id":"1","statName":"first_last_name","coltitle":"Name"},{"id":"2","statName":"in_email_handled_new_per_day","coltitle":"Handled"}],"team_ids":[],"limit":20,"order":[{"by":"2","dir":"ASC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":true},"columtitle":true}},{"config":{"type":"grid","title":"Top Break Time","x":9,"y":4,"width":3,"height":4,"show_settings":true,"id":"11","subscription":{"type":"agent_grid","req":{"id":"11","columns":[{"id":"1","statName":"first_last_name","coltitle":"Name"},{"id":"2","statName":"agent_total_break_time","coltitle":"Break Time"}],"team_ids":[],"limit":20,"order":[{"by":"2","dir":"DESC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":true},"columtitle":true}}],"style":{"bgcolor":"000000","cardcolor":"233752","cardborder":"solid 1px","cardbordercolor":"000000","fontcolor":"73E0FF","underline":"solid 1px","underlinecolor":"73E0FF","alertbg":"A11D3B","alertfont":"FFFFFF","alertborder":"8D1427"}},"name":"Email Wallboard"},{"config":{"widgets":[{"config":{"id":"1","type":"single","title":"In Queue/Max Wait","x":0,"y":0,"width":2,"height":3,"show_settings":true,"subscription":{"type":"stats_total","req":["in_calls_waiting","in_max_wait_time"],"service_ids":[]},"value":"in_calls_waiting","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"optValue":"in_max_wait_time | sp_duration","warning_sound":false}},{"config":{"id":"2","type":"single","title":"In IVR","x":2,"y":0,"width":2,"height":3,"show_settings":true,"subscription":{"type":"stats_total","req":["in_calls_in_ivr"],"service_ids":[]},"value":"in_calls_in_ivr","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"id":"3","type":"single","title":"Callbacks in Queue","x":4,"y":0,"width":2,"height":3,"show_settings":true,"subscription":{"type":"stats_total","req":["in_callbacks_waiting"],"service_ids":[]},"value":"in_callbacks_waiting","maxThreshold":200,"warningThreshold":100,"alertThreshold":1,"warning_sound":false}},{"config":{"id":"4","type":"single","title":"Abandoned %","x":6,"y":0,"width":2,"height":3,"show_settings":true,"subscription":{"type":"stats_total","req":["in_calls_abandoned_in_queue_ratio_per_day"],"service_ids":[]},"value":"in_calls_abandoned_in_queue_ratio_per_day | sp_percent","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"id":"5","type":"grid","title":"Service Queues","x":0,"y":3,"width":12,"height":4,"show_settings":true,"subscription":{"type":"service_grid","req":{"id":"5","columns":[{"id":"1","statName":"name","coltitle":"Service"},{"id":"2","statName":"in_calls_received_per_day","coltitle":"Received"},{"id":"3","statName":"in_transfers_received_per_day","coltitle":"Transferred in"},{"id":"4","statName":"in_calls_queued_per_day","coltitle":"Queued"},{"id":"5","statName":"in_callbacks_waiting","coltitle":"Callbacks in Q"},{"id":"6","statName":"in_calls_abandoned_percent_per_day","coltitle":"Abandoned"},{"id":"7","statName":"in_calls_short_abandoned_in_queue_ratio_per_day","coltitle":"Short-Abandoned"},{"id":"8","statName":"in_calls_in_ivr","coltitle":"In IVR"},{"id":"9","statName":"in_calls_waiting","coltitle":"In Q"},{"id":"10","statName":"in_max_wait_time","coltitle":"Longest Wait"},{"id":"11","statName":"in_calls_duration_average_per_day","coltitle":"Dur Avg"},{"id":"12","statName":"in_calls_handled_per_day","coltitle":"Handled"},{"id":"13","statName":"service_level_per_day","coltitle":"in Svc L"},{"id":"14","statName":"in_average_speed_of_answer","coltitle":"ASA"},{"id":"15","statName":"calls_average_acw_time_per_day","coltitle":"Avg ACW"},{"id":"16","statName":"in_ewt","coltitle":"EWT"}],"service_ids":[],"limit":10,"order":[{"by":"2","dir":"DESC"}]}},"columtitle":true,"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":false}}},{"config":{"id":"6","type":"grid","title":"Busy Agents","x":0,"y":7,"width":4,"height":5,"show_settings":true,"subscription":{"type":"agent_grid","req":{"id":"6","columns":[{"id":"1","statName":"first_last_name","coltitle":"Name"},{"id":"2","statName":"active_item_service_name","coltitle":"Service"},{"id":"3","statName":"state_duration","coltitle":"Duration"},{"id":"4","statName":"acd_next_state","coltitle":"Next State"},{"id":"5","statName":"active_item_talk_duration","coltitle":"Act. Talk"},{"id":"6","statName":"active_item_hold_duration","coltitle":"Act. Hold"}],"team_ids":[],"limit":18,"order":[{"by":"3","dir":"DESC"}]}},"columtitle":true,"agent_stats":{"busy":true},"limit":{"subteam":true,"logged_in_only":true}}},{"config":{"type":"gauge","title":"Estimated Wait Time","x":8,"y":0,"width":2,"height":3,"show_settings":true,"id":"7","subscription":{"type":"stats_total","req":["in_ewt"],"service_ids":[]},"value":"in_ewt | sp_duration","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"type":"single","title":"ASA","x":10,"y":0,"width":2,"height":3,"show_settings":true,"id":"8","subscription":{"type":"stats_total","req":["in_average_speed_of_answer"],"service_ids":[]},"value":"in_average_speed_of_answer | sp_duration","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"type":"grid","title":"Top Not Ready Agents","x":6,"y":7,"width":3,"height":5,"show_settings":true,"id":"9","subscription":{"type":"agent_grid","req":{"id":"9","columns":[{"id":"1","statName":"first_last_name","coltitle":"Name"},{"id":"2","statName":"state_duration","coltitle":"Duration"},{"id":"3","statName":"reason","coltitle":"Reason"}],"team_ids":[],"limit":18,"order":[{"by":"2","dir":"DESC"}]}},"columtitle":true,"agent_stats":{"not_ready":true},"limit":{"subteam":true,"logged_in_only":true}}},{"config":{"type":"grid","title":"Top After Call Work","x":4,"y":7,"width":2,"height":5,"show_settings":true,"id":"10","subscription":{"type":"agent_grid","req":{"id":"10","columns":[{"id":"1","statName":"first_last_name","coltitle":"Name"},{"id":"2","statName":"state_duration","coltitle":"Duration"}],"team_ids":[],"limit":18,"order":[{"by":"2","dir":"DESC"}]}},"agent_stats":{"after_call_work":true},"columtitle":true,"limit":{"subteam":true,"logged_in_only":true}}},{"config":{"type":"grid","title":"Top Idle Time Agents","x":9,"y":7,"width":3,"height":2,"show_settings":true,"id":"11","subscription":{"type":"agent_grid","req":{"id":"11","columns":[{"id":"1","statName":"first_last_name","coltitle":"Name"},{"id":"2","statName":"agent_idle_time","coltitle":"Duration"}],"team_ids":[],"limit":6,"order":[{"by":"2","dir":"DESC"}]}},"agent_stats":{"ready":true},"columtitle":true,"limit":{"subteam":true,"logged_in_only":true}}},{"config":{"type":"grid","title":"Longest Hold","x":9,"y":9,"width":3,"height":3,"show_settings":true,"id":"12","subscription":{"type":"agent_grid","req":{"id":"12","columns":[{"id":"1","statName":"first_last_name","coltitle":"Name"},{"id":"2","statName":"active_item_hold_duration","coltitle":"Hold duration"}],"team_ids":[],"limit":6,"order":[{"by":"2","dir":"DESC"}]}},"columtitle":true,"agent_stats":{"busy":true},"limit":{"subteam":true,"logged_in_only":true}}}],"style":{"bgcolor":"000000","cardcolor":"233752","cardborder":"solid 1px","cardbordercolor":"000000","fontcolor":"73E0FF","underline":"solid 1px","underlinecolor":"73E0FF","alertbg":"A11D3B","alertfont":"FFFFFF","alertborder":"8D1427"}},"name":"Inbound Wallboard"},{"config":{"widgets":[{"config":{"id":"1","type":"single","title":"Occupancy","x":0,"y":0,"width":3,"height":4,"show_settings":true,"subscription":{"type":"stats_total","req":["agent_occupancy"],"service_ids":[]},"value":"agent_occupancy | sp_percent","maxThreshold":120,"warningThreshold":70,"alertThreshold":50,"warning_sound":false}},{"config":{"id":"2","type":"single","title":"Outbound Calling Rate","x":3,"y":0,"width":3,"height":4,"show_settings":true,"subscription":{"type":"stats_total","req":["out_calls_current_call_rate"],"service_ids":[]},"value":"out_calls_current_call_rate","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"id":"3","type":"single","title":"Abandoned %","x":6,"y":0,"width":3,"height":4,"show_settings":true,"subscription":{"type":"stats_total","req":["out_calls_abandoned_ratio_per_day"],"service_ids":[]},"value":"out_calls_abandoned_ratio_per_day | sp_percent","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"id":"4","type":"single","title":"Outb In Q Now","x":9,"y":0,"width":3,"height":4,"show_settings":true,"subscription":{"type":"stats_total","req":["out_calls_waiting"],"service_ids":[]},"value":"out_calls_waiting","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"id":"5","type":"grid","title":"Campaigns","x":0,"y":4,"width":6,"height":4,"show_settings":true,"subscription":{"type":"service_grid","req":{"id":"5","columns":[{"id":"1","statName":"name","coltitle":"Name"},{"id":"2","statName":"records_remaining","coltitle":"Rec remaining"},{"id":"3","statName":"out_calls_current_call_rate","coltitle":"Calling Rate"},{"id":"4","statName":"out_calls_in_progress","coltitle":"In progress"},{"id":"5","statName":"out_calls_duration_average_per_day","coltitle":"Avg Dur"},{"id":"6","statName":"out_calls_answered_ratio_per_day","coltitle":"Succ%"},{"id":"7","statName":"agent_occupancy","coltitle":"Occ"}],"service_ids":[],"limit":20,"order":[{"by":"2","dir":"DESC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":false},"columtitle":true}},{"config":{"id":"6","type":"grid","title":"Top Successful Agents","x":6,"y":4,"width":3,"height":4,"show_settings":true,"subscription":{"type":"agent_grid","req":{"id":"6","columns":[{"id":"1","statName":"first_last_name"},{"id":"2","statName":"calls_dispositions_ratio_per_day"}],"team_ids":[],"limit":30,"order":[{"by":"2","dir":"DESC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":true},"columtitle":true}},{"config":{"id":"7","type":"grid","title":"Top Agents by Avg Call Duration","x":9,"y":4,"width":3,"height":4,"show_settings":true,"subscription":{"type":"agent_grid","req":{"id":"7","columns":[{"id":"1","statName":"first_last_name","coltitle":"Name"},{"id":"2","statName":"out_calls_duration_average_per_day","coltitle":"Outb Call Duration"}],"team_ids":[],"limit":30,"order":[{"by":"2","dir":"DESC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":true},"columtitle":true}},{"config":{"id":"8","type":"summary","title":"Agent State Summary","x":0,"y":8,"width":3,"height":4,"show_settings":true,"subscription":{"type":"summary","req":{"id":"8","columns":[{"id":"1","statName":"acd_state"}],"limit":1000,"order_by":"1","order_dir":"ASC","filter_by":"1","filter_value":"","filter_operation":"NE","team_ids":[]}}}},{"config":{"id":"9","type":"single","title":"Outbound Calls on Agents","x":3,"y":8,"width":3,"height":4,"show_settings":true,"subscription":{"type":"stats_total","req":["out_calls_active_on_agents"],"service_ids":[]},"value":"out_calls_active_on_agents","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"id":"10","type":"single","title":"Records Completed Today","x":6,"y":8,"width":3,"height":4,"show_settings":true,"subscription":{"type":"stats_total","req":["records_completed_per_day"],"service_ids":[]},"value":"records_completed_per_day","maxThreshold":200,"warningThreshold":100,"alertThreshold":180,"warning_sound":false}},{"config":{"id":"11","type":"grid","title":"Top Break Time","x":9,"y":8,"width":3,"height":4,"show_settings":true,"subscription":{"type":"agent_grid","req":{"id":"11","columns":[{"id":"1","statName":"first_last_name","coltitle":"Name"},{"id":"2","statName":"agent_total_break_time","coltitle":"Break Time"}],"team_ids":[],"limit":6,"order":[{"by":"1","dir":"DESC"}]}},"agent_stats":{"ready":true,"busy":true,"after_call_work":true,"not_ready":true},"limit":{"subteam":true,"logged_in_only":true},"columtitle":true}}],"style":{"bgcolor":"000000","cardcolor":"233752","cardborder":"solid 1px","cardbordercolor":"000000","fontcolor":"73E0FF","underline":"solid 1px","underlinecolor":"73E0FF","alertbg":"A11D3B","alertfont":"FFFFFF","alertborder":"8D1427"}},"name":"Outbound Campaigns"}]');var xt=n(5977),At=function(e){return null==e?void 0:e.config},Dt=(0,xt.createSelector)(At,(function(e){return(null==e?void 0:e.widgets.map((function(e){return e.config})))||[]})),Et=(0,xt.createSelector)(At,(function(e){var t;return(null==e||null===(t=e.style)||void 0===t?void 0:t.fontScaleValue)||1})),Pt=(0,xt.createSelector)((function(e){return e}),(function(e){return e.reduce((function(e,t){var n=function(e){if(!("subscription"in e)||!e.subscription||!e.subscription.type)return;var t={};switch(e.subscription.type){case"stats_total":t.stats_totals=(0,le.uniq)(e.subscription.req),t.stats_totals_service_ids=e.subscription.service_ids,t.stats_totals_dispositions=e.subscription.dispositions;break;case"agent_grid":case"break_time":case"dispositions":case"my_stats":case"satisfaction":case"summary":t.agent_grids=[];var n=(0,le.cloneDeep)(e.subscription.req);n.limit=1e3;var r,a,i=-1;if(n.columns.forEach((function(e,t){Tt(e),"name"==e.statName&&(e.statName="first_last_name"),"total_contacts"==e.statName&&(e.statName="in_calls_handled_per_day",i=t)})),"grid"===e.type)n.my_subteam_only=null===(r=e.limit)||void 0===r?void 0:r.subteam,n.logged_in_agents_only=null===(a=e.limit)||void 0===a?void 0:a.logged_in_only;-1!=i&&It(n.columns,i+1,{id:(i+2).toString(),statName:"out_calls_handled_per_day"}),It(n.columns,n.columns.length-1,{id:(n.columns.length+1).toString(),statName:"acd_state"}),t.agent_grids.push(n),"my_stats"===e.subscription.type&&(t.teams_stats=["team_success_ratio_per_day","in_calls_handled_per_day","out_calls_handled_per_day","calls_average_handling_time_per_day"]);break;case"service_grid":t.service_grids=[];var o=(0,le.cloneDeep)(e.subscription.req);o.limit=1e3;var l=-1;o.columns.forEach((function(e){Tt(e),"calls_handled_per_day"===e.statName&&(l=parseInt(e.id||"0"),e.statName="in_calls_handled_per_day")})),l>-1&&It(o.columns,o.columns.length-1,{id:(o.columns.length+1).toString(),statName:"out_calls_handled_per_day"}),t.service_grids.push(o);break;case"chat_messages":t.chat_messages=e.subscription.req}return t}(t);return n&&(e[t.id]=n),e}),{})}));function It(e,t,n){e.splice(t+1,0,n)}function Tt(e){"dir"in e&&delete e.dir,"coltitle"in e&&delete e.coltitle,"order"in e&&delete e.order}function Lt(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Nt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Lt(i,r,a,o,l,"next",e)}function l(e){Lt(i,r,a,o,l,"throw",e)}o(void 0)}))}}function Ct(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var kt=n(2443);function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var zt={config:void 0,darkTheme:(0,m.initialBooleanManager)(),editMode:(0,m.initialBooleanManager)(),showTitleBar:(0,m.initialBooleanManager)(!0),rotation:{value:{enabled:!1,period:0,wallboards:[]},setValue:le.noop}},Rt=(0,ce.createContext)(zt);Rt.displayName="WallboardUIContext";var Bt=function(e){var t,n,i=e.children,o=(0,m.useBoolean)(),l=(0,m.useBoolean)(),c=(0,m.useBoolean)(!0),s=Mt((0,a.useState)(zt.rotation.value),2),u=s[0],d=s[1],_=(0,a.useMemo)((function(){return{value:u,setValue:d}}),[u]),f=(0,a.useMemo)((function(){return{darkTheme:o,editMode:l,showTitleBar:c,rotation:_}}),[o,l,_,c]);return(0,kt.useLocalStorageForState)(o.value,"adWallboardDarkTheme",o.toggle,null===(t=(n=window).matchMedia)||void 0===t?void 0:t.call(n,"(prefers-color-scheme: dark)").matches),(0,kt.useLocalStorageForState)(l.value,"adWallboardEditMode",l.toggle,zt.editMode.value),(0,kt.useLocalStorageForState)(c.value,"adWallboardShowTitleBar",c.toggle,zt.showTitleBar.value),(0,kt.useLocalStorageForState)(_.value,"adWallboardShowRotation",_.setValue,zt.rotation.value),(0,r.jsx)(Rt.Provider,{value:f,children:i})},Kt=function(){return(0,ce.useContextSelector)(Rt,(function(e){return e.darkTheme}))},Gt=function(){return(0,ce.useContextSelector)(Rt,(function(e){return e.config}))},Ft=function(){return(0,ce.useContextSelector)(Rt,(function(e){return e.editMode}))},qt=function(){return(0,ce.useContextSelector)(Rt,(function(e){return e.showTitleBar}))},Vt=function(){return(0,ce.useContextSelector)(Rt,(function(e){return e.rotation}))};function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Yt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ut(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Jt=function(e){var t=e.onClose,n=Yt(e,["onClose"]),i=(0,b.useLocalizationState)().t,o=gn(),l=$t((0,a.useState)(0),2),c=l[0],s=l[1],u=Ft(),_=nr(),f=Zn(),p=tr(),y=(0,Z.useQuery)({queryFn:function(){return jt},queryKey:vt(),gcTime:m.MS_IN_DAY,staleTime:m.MS_IN_DAY}),g=y.data,v=y.isLoading,h=(0,a.useCallback)((function(){(0,F.assertDefined)(g),u.setTrue(),f(g[c].name),_(Dt(g[c])),p(1),o(),t()}),[t,u,c,p,f,_,g,o]),O=(0,a.useMemo)((function(){return(null==g?void 0:g.map((function(e,t){return{value:t,text:e.name}})))||[]}),[g]),w=(0,a.useCallback)((function(e,t){var n=t.value;"number"==typeof n&&s(n)}),[]);return(0,r.jsxs)(d.Modal,Qt(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ht(e,t,n[t])}))}return e}({},n),{onClose:t,size:"tiny",className:"max-w-full","aria-labelledby":"newWallboardModalHeader","data-testid":"new-wallboard-modal",children:[(0,r.jsx)(d.Modal.Header,{role:"heading",id:"newWallboardModalHeader",children:i.WALLBOARD.new_wallboard()}),(0,r.jsxs)(d.Modal.Content,{children:[(0,r.jsx)("label",{className:"mr-4",children:i.WALLBOARD.new_wallboard_type()}),v?(0,r.jsx)(d.Loader,{active:!0,color:"primary",size:"medium"}):(0,r.jsx)(d.Dropdown,{options:O,value:c,onChange:w})]}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{onClick:function(){return t()},enabledInOffline:!0,children:i.GLOBAL.cancel()}),(0,r.jsx)(d.SemanticButton,{onClick:h,primary:!0,disabled:!g,"data-testid":"new-wallboard-ok",children:i.GLOBAL.ok()})]})]}))};function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function en(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var tn=function(e){var t=e.onClose,n=en(e,["onClose"]),i=(0,b.useLocalizationState)().t,o=ht().data,l=Dn().mutate,c=jn().mutate,s=(0,a.useCallback)((function(){(0,F.assertDefined)(o),l({wallboardId:null==o?void 0:o.id,isGlobal:!1}),t()}),[t,o,l]),u=(0,a.useCallback)((function(){(0,F.assertDefined)(o),c({wallboardId:null==o?void 0:o.id,isGlobal:!1}),t()}),[c,t,o]);return(0,r.jsxs)(d.Modal,Zt(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Xt(e,t,n[t])}))}return e}({},n),{onClose:t,size:"tiny",className:"max-w-full","aria-labelledby":"pullFromGlobalModalHeader",children:[(0,r.jsx)(d.Modal.Header,{role:"heading",id:"pullFromGlobalModalHeader",children:i.WALLBOARD.pull_from_global_modal_title()}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{onClick:s,children:i.WALLBOARD.pull()}),(0,r.jsx)(d.SemanticButton,{onClick:u,children:i.WALLBOARD.duplicate()}),(0,r.jsx)(d.SemanticButton,{onClick:function(){return t()},primary:!0,enabledInOffline:!0,children:i.WALLBOARD.cancel()})]})]}))},nn=n(9073),rn=n(7517);function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function on(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function sn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function un(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return an(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return an(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var _n,fn=function(e){var t=e.onClose,n=sn(e,["onClose"]),i=(0,b.useLocalizationState)().t,o=Vt(),l=St().data,c=(0,nn.useForm)({defaultValues:{enabled:o.value.enabled,period:o.value.period,wallboards:(l||[]).reduce((function(e,t){var n=t.id;return e[n]=o.value.wallboards.includes(n),e}),{})}}),s=c.control,u=c.handleSubmit,_=(0,a.useMemo)((function(){return u(function(){var e,n=(e=function(e){return dn(this,(function(n){return o.setValue({enabled:e.enabled,period:e.period,wallboards:Object.entries(e.wallboards).filter((function(e){var t=un(e,2);return t[0],t[1]})).map((function(e){return un(e,1)[0]}))}),t(),[2]}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){on(i,r,a,o,l,"next",e)}function l(e){on(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}())}),[u,t,o]);return(0,r.jsxs)(d.Modal,cn(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ln(e,t,n[t])}))}return e}({},n),{onClose:t,size:"mini",className:"max-w-full","aria-labelledby":"rotateWallboardsModalHeader",children:[(0,r.jsx)(d.Modal.Header,{role:"heading",id:"rotateWallboardsModalHeader",children:i.WALLBOARD.rotation_setting()}),(0,r.jsx)(d.Modal.Content,{children:(0,r.jsxs)("div",{className:"grid grid-cols-6 items-center gap-4",children:[(0,r.jsx)("label",{className:"col-span-2",children:i.WALLBOARD.rotation_enabled()}),(0,r.jsx)(rn.CheckboxField,{control:s,name:"enabled",className:"col-span-4 mb-0"}),(0,r.jsx)("label",{className:"col-span-2 self-start",children:i.WALLBOARD.rotation_wallboards()}),(0,r.jsx)("div",{className:"col-span-4 self-end pt-5",children:null==l?void 0:l.map((function(e){var t=e.id,n=e.name;return(0,r.jsx)(rn.CheckboxField,{control:s,name:"wallboards.".concat(t),label:n,className:"mb-2"},t)}))}),(0,r.jsx)("label",{className:"col-span-2",children:i.WALLBOARD.rotation_interval()}),(0,r.jsx)(rn.TextField,{control:s,name:"period",className:"col-span-4",type:"number"})]})}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{onClick:function(){return t()},enabledInOffline:!0,children:i.GLOBAL.cancel()}),(0,r.jsx)(d.SemanticButton,{onClick:_,primary:!0,disabled:!(null==l?void 0:l.length),children:i.GLOBAL.ok()})]})]}))};function pn(e){return"../".concat(e)}function yn(){return pn(ae)}var mn=function(e){var t=e.children,n=(0,J.useNavigate)(),i=(0,J.useParams)().wallboardId,o=(0,g.useModalComponentOpener)(Jt),l=(0,m.useBoolean)(!1),c=l.value,s=l.setTrue,u=l.setFalse,d=St(),_=d.status,f=d.data,p=(0,a.useCallback)((function(){s(),n(yn())}),[s,n]);(0,a.useEffect)((function(){if("pending"!==_&&f)if(i){if(i!==ae||c){if(i!==ae)(null==f?void 0:f.find((function(e){return e.id===i})))||(o(),p())}else o()}else{var e=(null==f?void 0:f.find((function(e){return e.is_default})))||(null==f?void 0:f[0]);n(e?pn(e.id):yn())}}),[i,f,n,c,o,p,_]);var y=(0,a.useCallback)((function(e){if((0,F.assertDefined)(f),e===i){var t=null==f?void 0:f.findIndex((function(t){return t.id===e})),r=f[t===f.length-1?0:t+1];n(r?pn(r.id):yn())}}),[f,n,i]),b={setNewWallboardTemplatesSelected:s,goFromRemovedWallboard:y,goToWallboard:function(e){n(pn(e)),u()},goToNewWallboard:p,loading:"pending"===_};return _n||((_n=(0,ce.createContext)(b)).displayName="RouterContext"),(0,r.jsx)(_n.Provider,{value:b,children:t})},bn=function(){return(0,ce.useContextSelector)(_n,(function(e){return e.goToWallboard}))},gn=function(){return(0,ce.useContextSelector)(_n,(function(e){return e.goToNewWallboard}))};function vn(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){hn(e,t,n[t])}))}return e}function wn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Sn(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function jn(){var e=(0,Z.useQueryClient)(),t=bn();return(0,Z.useMutation)({mutationFn:function(t){var n,r=t.wallboardId,a=t.isGlobal;return(n=function(){var t;return Sn(this,(function(n){return(t=e.getQueryData(bt(r)))?[2,tt.createWallboard({requestBody:wn(On({},t),{name:"".concat(t.name,"(1)"),is_global:null!=a?a:null==t?void 0:t.is_global})})]:[2]}))},function(){var e=this,t=arguments;return new Promise((function(r,a){var i=n.apply(e,t);function o(e){vn(i,r,a,o,l,"next",e)}function l(e){vn(i,r,a,o,l,"throw",e)}o(void 0)}))})()},onSuccess:function(n){(0,F.assertDefined)(n),e.invalidateQueries({queryKey:gt()}).then((function(){t(null==n?void 0:n.id)}))}})}function xn(e){return e.map((function(e){return{config:e}}))}function An(){var e=(0,Z.useQueryClient)(),t=(0,ce.useContextSelector)(_n,(function(e){return e.goFromRemovedWallboard}));return(0,Z.useMutation)({mutationFn:tt.deleteWallboard,onMutate:function(n){var r=n.wallboardId;e.removeQueries({queryKey:bt(r),exact:!0}),e.setQueryData(gt(),oe()((function(e){(0,F.assertDefined)(e);var n=null==e?void 0:e.findIndex((function(e){return e.id===r}));-1!==n&&(e.splice(n,1),t(r))})))}})}function Dn(){var e=(0,Z.useQueryClient)();return(0,Z.useMutation)({mutationFn:function(e){var t=e.wallboardId,n=e.isGlobal;return tt.updateWallboardIsGlobal({wallboardId:t,requestBody:{is_global:n}})},onMutate:function(t){var n=t.wallboardId,r=t.isGlobal;e.setQueryData(gt(),oe()((function(e){(0,F.assertDefined)(e);var t=null==e?void 0:e.findIndex((function(e){return e.id===n}));e[t].is_global=r}))),e.setQueryData(bt(n),oe()((function(e){(0,F.assertDefined)(e),e.is_global=r})))}})}function En(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function In(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Tn(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function Ln(){var e=(0,Z.useQueryClient)();return(0,Z.useMutation)({mutationFn:function(){var e,t=(e=function(e){var t,n;return Tn(this,(function(r){return t=e.wallboardId,n=e.name,[2,tt.updateWallboardName({wallboardId:t,requestBody:{name:n}})]}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){En(i,r,a,o,l,"next",e)}function l(e){En(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),onMutate:function(t){var n=t.wallboardId,r=t.name;e.setQueryData(bt(n),(function(e){return e?In(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Pn(e,t,n[t])}))}return e}({},e),{name:r}):e}))}})}function Nn(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Wn(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var Mn,zn=function(e){return e.map((function(e){return{config:e}}))};function Rn(){var e=(0,Z.useQueryClient)();return(0,Z.useMutation)({mutationFn:function(){var e,t=(e=function(e){var t,n,r;return Wn(this,(function(a){return t=e.wallboardId,n=e.updatedWallboardWidgets,r=e.updatedStyle,[2,tt.updateWallboardConfig({wallboardId:t,requestBody:{config:{widgets:zn(n),style:r}}})]}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Nn(i,r,a,o,l,"next",e)}function l(e){Nn(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),onMutate:function(t){var n=t.wallboardId,r=t.updatedWallboardWidgets,a=t.updatedStyle;e.setQueryData(bt(n),(function(e){return e?kn(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Cn(e,t,n[t])}))}return e}({},e),{config:{widgets:zn(r),style:a}}):e}))},onSuccess:function(t,n){var r=n.wallboardId;e.invalidateQueries({queryKey:bt(r)})}})}function Bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kn(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Gn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Kn(i,r,a,o,l,"next",e)}function l(e){Kn(i,r,a,o,l,"throw",e)}o(void 0)}))}}function Fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Fn(e,t,n[t])}))}return e}function Vn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Un(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||Qn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hn(e){return function(e){if(Array.isArray(e))return Bn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qn(e,t){if(e){if("string"==typeof e)return Bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bn(e,t):void 0}}function Yn(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var $n=function(e){var t=e.children,n=ht().data,i=Un((0,a.useState)(""),2),o=i[0],l=i[1],c=Un((0,a.useState)(1),2),s=c[0],u=c[1],d=(0,J.useParams)().wallboardId===ae,_=Un((0,a.useState)([]),2),f=_[0],p=_[1],y=Ft();(0,a.useEffect)((function(){n&&(p(Dt(n)),l(n.name),u(Et(n)))}),[y,n]);var m=(0,a.useCallback)((function(e){p((function(t){return Hn(t).concat([e])}))}),[]),b=(0,a.useCallback)((function(e){p(oe()((function(t){var n,r=null!==(n=t.findIndex((function(t){return t.id===e.id})))&&void 0!==n?n:-1;if(-1!==r){var a=t[r];a&&Object.assign(a,e)}})))}),[]),g=(0,a.useCallback)((function(e){p((function(t){return t.filter((function(t){return t.id!==e}))}))}),[p]),v=Rn(),h=v.mutateAsync,O=v.isPending,w=(0,a.useCallback)(Gn((function(){return Yn(this,(function(e){switch(e.label){case 0:return(0,F.assertDefined)(n),[4,h({wallboardId:n.id,updatedWallboardWidgets:f,updatedStyle:Vn(qn({},n.config.style||{}),{fontScaleValue:s})})];case 1:return e.sent(),y.setFalse(),[2]}}))})),[n,h,f,s,y]),S=Ln(),j=S.mutateAsync,x=S.isPending,A=function(){var e=(0,Z.useQueryClient)(),t=bn();return(0,Z.useMutation)({mutationFn:function(e){var t=e.name,n=e.widgets;return tt.createWallboard({requestBody:{is_default:!1,is_global:!1,name:t,config:{widgets:xn(n)}}})},onSuccess:function(n){(0,F.assertDefined)(n),e.invalidateQueries({queryKey:gt()}).then((function(){t(null==n?void 0:n.id)}))}})}(),D=A.mutate,E=(0,a.useCallback)(Gn((function(){return Yn(this,(function(e){switch(e.label){case 0:return(0,F.assertDefined)(n),[4,j({wallboardId:n.id,name:o})];case 1:return e.sent(),[2]}}))})),[n,j,o]),P=(0,a.useCallback)(Gn((function(){var e;function t(){return!(0,le.isEqual)(Dt(n),f)||Et(n)!==s}function r(){return(null==n?void 0:n.name)!==o}return Yn(this,(function(n){switch(n.label){case 0:return d?(D({name:o,widgets:f}),[3,3]):[3,1];case 1:return e=[[t,w],[r,E]].filter((function(e){return(0,Un(e,1)[0])()})).map((function(e){return(0,Un(e,2)[1])()})),[4,Promise.allSettled(e)];case 2:n.sent(),n.label=3;case 3:return y.setFalse(),[2]}}))})),[d,s,y,D,o,f,n,w,E]),I=(0,a.useMemo)((function(){return O||x}),[O,x]),T=(0,a.useMemo)((function(){return{name:o,setName:l,fontScale:s,setFontScale:u,widgets:f,setWidgets:p,isSaving:I,updateWidget:b,addWidget:m,removeWidget:g,save:P}}),[o,s,f,I,m,b,g,P]);return Mn||((Mn=(0,ce.createContext)(T)).displayName="EditingContext"),(0,r.jsx)(Mn.Provider,{value:T,children:t})},Jn=function(){return(0,ce.useContextSelector)(Mn,(function(e){return e.isSaving}))},Xn=function(){return(0,ce.useContextSelector)(Mn,(function(e){return e.widgets}))},Zn=function(){return(0,ce.useContextSelector)(Mn,(function(e){return e.setName}))},er=function(){return(0,ce.useContextSelector)(Mn,(function(e){return e.fontScale}))},tr=function(){return(0,ce.useContextSelector)(Mn,(function(e){return e.setFontScale}))},nr=function(){return(0,ce.useContextSelector)(Mn,(function(e){return e.setWidgets}))},rr=n(8269);function ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ar(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var or=n(7960);function lr(e,t){if((0,le.isArray)(e))return t}function cr(e,t){var n=e.data,r=e.dataName;return(0,le.mergeWith)({chart:{type:"bar",backgroundColor:"transparent",width:null,height:null},plotOptions:{series:{pointPadding:.01,groupPadding:.01,borderColor:"transparent",dataLabels:{enabled:!0,style:{color:"var(--wallboard-text-secondary)",fontSize:"14px",fontWeight:"normal",textOutline:"0"}}}},title:{text:"",margin:0},xAxis:{categories:n.map((function(e){return e.name})),title:{text:""},labels:{style:{color:"var(--wallboard-text-secondary)",fontSize:"14px",fontWeight:"normal"}},lineColor:"transparent",tickColor:"transparent",gridLineColor:"transparent"},yAxis:{title:{text:""},lineColor:"transparent",gridLineColor:"transparent",labels:{format:" "}},credits:{enabled:!1},colors:["#BAD027"],legend:{enabled:!1},series:[{name:r,data:n.map((function(e){return{y:e.value,color:e.color}}))}]},t,lr)}function sr(e,t){var n=e.alertThreshold,r=e.warningThreshold,a=e.maxThreshold;return t?[[n/r,"#DF5353"],[n/r+(1-n/r)/2,"#DDDF0D"],[1,"#55BF3B"]]:[[r/a/2,"#55BF3B"],[r/a,"#DDDF0D"],[n/a,"#DF5353"]]}function ur(e,t){return t?[0,e.warningThreshold]:[0,e.maxThreshold]}function dr(e,t){return t?e.warningThreshold:e.maxThreshold}function _r(e,t){if((0,le.isArray)(e))return t}function fr(e){var t=e.names,n=e.values,r=e.formatter,a=e.enableDataLabels,i=void 0!==a&&a,o=e.options,l=void 0===o?{}:o;return(0,le.mergeWith)({chart:{type:"pie",backgroundColor:"transparent"},exporting:{enabled:!1},plotOptions:{pie:{allowPointSelect:!1,cursor:"pointer",innerSize:"60%",borderColor:"tranparent",dataLabels:{enabled:i,distance:20,style:{fontWeight:"normal",fontSize:"1.5vmin",color:"var(--wallboard-text-secondary)",fontFamily:"Lato, Helvetica Neue, Arial, Helvetica, sans-serif",textOutline:"0"},formatter:r},showInLegend:!0}},title:{text:"",margin:0},credits:{enabled:!1},colors:["#BAD027","#00A6E6"],legend:{itemStyle:{fontWeight:"normal",fontSize:"1.5vmin",color:"var(--wallboard-chart-legend-color)"},itemHoverStyle:{color:"var(--wallboard-chart-legend-color-hover)"}},tooltip:{formatter:r},series:[{data:t.map((function(e,t){return{name:e,y:n[t]}})),type:"pie"}]},l,_r)}var pr=n(2008),yr=n.n(pr);function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gr=n(1362),vr=n(7005),hr=(0,vr.atom)(null),Or=(0,vr.atom)({widget:null,updateWidget:le.noop});function wr(e,t){if(!t)return(null==e?void 0:e.toString())||"";switch(t){case"percent":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!e||""===e)return"";var t=parseInt(e.toString());if(t>0&&t<1)return"".concat(100*t,"%");return"".concat(t,"%")}(e);case"duration":return function(e){if(!e||""===e)return"";var t=parseInt(e.toString())*m.MS_IN_SECOND;return t>=m.MS_IN_DAY?"".concat(Math.floor(t/m.MS_IN_DAY),"d ").concat((0,m.getMomentUTC)(t,"HH:mm:ss")):t>=m.MS_IN_HOUR?(0,m.getMomentUTC)(t,"HH:mm:ss"):(0,m.getMomentUTC)(t,"mm:ss")}(e)}}var Sr={statsSingle:{agent_cm1:{localizationKey:"agent_cm1_name"},agent_cm2:{localizationKey:"agent_cm2_name"},agent_csat:{localizationKey:"agent_csat_name"},agent_fcr:{format:"percent",localizationKey:"agent_fcr_name"},agent_nps:{format:"percent",localizationKey:"agent_nps_name"},agent_average_idle_time:{format:"duration",localizationKey:"agent_average_idle_time_name"},agent_average_preview_time:{format:"duration",localizationKey:"agent_average_preview_time_name"},agent_occupancy:{format:"percent",localizationKey:"agent_occupancy_name"},agents_busy:{localizationKey:"agents_busy_name"},agents_busy_on_service:{localizationKey:"agents_busy_on_service_name"},agents_logged:{localizationKey:"agents_logged_name"},agents_not_ready:{localizationKey:"agents_not_ready_name"},agents_ready:{localizationKey:"agents_ready_name"},agents_in_wrap_up:{localizationKey:"agents_in_wrap_up_name"},calls_average_handling_time_per_day:{format:"duration",localizationKey:"calls_average_handling_time_per_day_name"},calls_dispositions_per_day:{localizationKey:"calls_dispositions_per_day_name"},calls_dispositions_ratio_per_day:{format:"percent",localizationKey:"calls_dispositions_ratio_per_day_name"},in_calls_received_per_day:{localizationKey:"in_calls_received_per_day_name"},in_calls_ringing:{localizationKey:"in_calls_ringing_name"},in_average_speed_of_answer:{format:"duration",localizationKey:"in_average_speed_of_answer_name"},in_callbacks_requested_per_day:{localizationKey:"in_callbacks_requested_per_day_name"},in_callbacks_waiting:{localizationKey:"in_callbacks_waiting_name"},in_calls_abandoned_in_ivr_per_day:{localizationKey:"in_calls_abandoned_in_ivr_per_day_name"},in_calls_abandoned_in_queue_per_day:{localizationKey:"in_calls_abandoned_in_queue_per_day_name"},in_calls_abandoned_in_queue_ratio_per_day:{format:"percent",localizationKey:"in_calls_abandoned_in_queue_ratio_per_day_name"},in_calls_abandoned_percent_per_day:{format:"percent",localizationKey:"in_calls_abandoned_percent_per_day_name"},in_calls_abandoned_ringing_per_day:{localizationKey:"in_calls_abandoned_ringing_per_day_name"},in_calls_abandoned_total_per_day:{localizationKey:"in_calls_abandoned_total_per_day_name"},in_calls_active_on_agents:{localizationKey:"in_calls_active_on_agents_name"},in_calls_disconnected_talking_per_day:{localizationKey:"in_calls_disconnected_talking_per_day_name"},in_calls_dropped_in_ivr_per_day:{localizationKey:"in_calls_dropped_in_ivr_per_day_name"},in_calls_dropped_in_queue_per_day:{localizationKey:"in_calls_dropped_in_queue_per_day_name"},in_calls_dropped_ringing_per_day:{localizationKey:"in_calls_dropped_ringing_per_day_name"},in_calls_dropped_talking_per_day:{localizationKey:"in_calls_dropped_talking_per_day_name"},in_calls_duration_average_per_day:{format:"duration",localizationKey:"in_calls_duration_average_per_day_name"},in_calls_duration_total_per_day:{format:"duration",localizationKey:"in_calls_duration_total_per_day_name"},in_calls_first_time_handled_per_day:{localizationKey:"in_calls_first_time_handled_per_day_name"},in_calls_first_time_queued_per_day:{localizationKey:"in_calls_first_time_queued_per_day_name"},in_calls_handled_per_day:{localizationKey:"in_calls_handled_per_day_name"},in_calls_handled_percent_per_day:{format:"percent",localizationKey:"in_calls_handled_percent_per_day_name"},in_calls_in_ivr:{localizationKey:"in_calls_in_ivr_name"},in_calls_in_progress:{localizationKey:"in_calls_in_progress_name"},in_calls_first_time_put_on_hold_per_day:{localizationKey:"in_calls_first_time_put_on_hold_per_day_name"},in_calls_queued_per_day:{localizationKey:"in_calls_queued_per_day_name"},in_calls_put_on_hold_per_day:{localizationKey:"in_calls_put_on_hold_per_day_name"},in_calls_rejected_per_day:{localizationKey:"in_calls_rejected_per_day_name"},in_calls_routed_per_day:{localizationKey:"in_calls_routed_per_day_name"},in_calls_self_serviced_per_day:{localizationKey:"in_calls_self_serviced_per_day_name"},in_calls_short_abandoned_in_queue_per_day:{localizationKey:"in_calls_short_abandoned_in_queue_per_day_name"},in_calls_short_abandoned_in_queue_ratio_per_day:{format:"percent",localizationKey:"in_calls_short_abandoned_in_queue_ratio_per_day_name"},in_calls_transferred_per_day:{localizationKey:"in_calls_transferred_per_day_name"},in_email_carried_over:{localizationKey:"in_email_carried_over_name"},in_email_handled_new_per_day:{localizationKey:"in_email_handled_new_per_day_name"},in_email_processed_noreply_per_day:{localizationKey:"in_email_processed_noreply_per_day_name"},in_email_processed_replied_per_day:{localizationKey:"in_email_processed_replied_per_day_name"},in_email_received_new_per_day:{localizationKey:"in_email_received_new_per_day_name"},in_email_rejected_per_day:{localizationKey:"in_email_rejected_per_day_name"},in_email_waiting_in_personal_queues:{localizationKey:"in_email_waiting_in_personal_queues_name"},in_emails_joined_existing_cases:{localizationKey:"in_emails_joined_existing_cases_name"},in_ewt:{format:"duration",localizationKey:"in_ewt_name"},in_max_wait_time:{format:"duration",localizationKey:"in_max_wait_time_name"},in_service_change_received_per_day:{localizationKey:"in_service_change_received_per_day_name"},in_service_changed_per_day:{localizationKey:"in_service_changed_per_day_name"},in_transfers_received_per_day:{localizationKey:"in_transfers_received_per_day_name"},out_calls_abandoned_in_ivr_per_day:{localizationKey:"out_calls_abandoned_in_ivr_per_day_name"},out_calls_abandoned_in_ivr_ratio_per_day:{format:"percent",localizationKey:"out_calls_abandoned_in_ivr_ratio_per_day_name"},out_calls_abandoned_in_queue_per_day:{localizationKey:"out_calls_abandoned_in_queue_per_day_name"},out_calls_abandoned_in_queue_ratio_per_day:{format:"percent",localizationKey:"out_calls_abandoned_in_queue_ratio_per_day_name"},out_calls_abandoned_per_day:{localizationKey:"out_calls_abandoned_per_day_name"},out_calls_abandoned_ratio_per_day:{format:"percent",localizationKey:"out_calls_abandoned_ratio_per_day_name"},out_calls_abandoned_ringing_per_day:{localizationKey:"out_calls_abandoned_ringing_per_day_name"},out_calls_active_on_agents:{localizationKey:"out_calls_active_on_agents_name"},out_calls_answered_per_day:{localizationKey:"out_calls_answered_per_day_name"},out_calls_answered_ratio_per_day:{format:"percent",localizationKey:"out_calls_answered_ratio_per_day_name"},out_calls_current_call_rate:{localizationKey:"out_calls_current_call_rate_name"},out_calls_disconnected_talking_per_day:{localizationKey:"out_calls_disconnected_talking_per_day_name"},out_calls_dropped_in_ivr_per_day:{localizationKey:"out_calls_dropped_in_ivr_per_day_name"},out_calls_dropped_in_queue_per_day:{localizationKey:"out_calls_dropped_in_queue_per_day_name"},out_calls_dropped_ringing_per_day:{localizationKey:"out_calls_dropped_ringing_per_day_name"},out_calls_dropped_talking_per_day:{localizationKey:"out_calls_dropped_talking_per_day_name"},out_calls_duration_average_per_day:{format:"duration",localizationKey:"out_calls_duration_average_per_day_name"},out_calls_duration_total_per_day:{format:"duration",localizationKey:"out_calls_duration_total_per_day_name"},out_calls_failed_per_day:{localizationKey:"out_calls_failed_per_day_name"},out_calls_handled_per_day:{localizationKey:"out_calls_handled_per_day_name"},out_calls_in_ivr:{format:"percent",localizationKey:"out_calls_in_ivr_name"},out_calls_in_progress:{localizationKey:"out_calls_in_progress_name"},out_calls_placed_per_day:{localizationKey:"out_calls_placed_per_day_name"},out_calls_queued_per_day:{localizationKey:"out_calls_queued_per_day_name"},out_calls_rejected_per_day:{localizationKey:"out_calls_rejected_per_day_name"},out_calls_ringing:{localizationKey:"out_calls_ringing_name"},out_calls_routed_per_day:{localizationKey:"out_calls_routed_per_day_name"},out_calls_self_serviced_per_day:{localizationKey:"out_calls_self_serviced_per_day_name"},out_calls_transferred_per_day:{localizationKey:"out_calls_transferred_per_day_name"},out_calls_unattended_per_day:{localizationKey:"out_calls_unattended_per_day_name"},out_calls_unattended_ratio_per_day:{format:"percent",localizationKey:"out_calls_unattended_ratio_per_day_name"},out_calls_waiting:{localizationKey:"out_calls_waiting_name"},out_campaign_duration_forecast:{format:"duration",localizationKey:"out_campaign_duration_forecast_name"},records_accepted_per_day:{localizationKey:"records_accepted_per_day_name"},records_attempted_per_day:{localizationKey:"records_attempted_per_day_name"},records_attempted_ratio_per_day:{format:"percent",localizationKey:"records_attempted_ratio_per_day_name"},records_completed:{localizationKey:"records_completed_name"},records_completed_per_day:{localizationKey:"records_completed_per_day_name"},records_completed_ratio:{format:"percent",localizationKey:"records_completed_ratio_name"},records_completed_ratio_per_day:{format:"percent",localizationKey:"records_completed_ratio_per_day_name"},records_dialable:{localizationKey:"records_dialable_name",alertInverted:!0},records_in_dnc:{localizationKey:"records_in_dnc_name"},records_out_of_quota:{localizationKey:"records_out_of_quota_name"},records_remaining:{localizationKey:"records_remaining_name"},records_skipped_per_day:{localizationKey:"records_skipped_per_day_name"},records_skipped_ratio_per_day:{format:"percent",localizationKey:"records_skipped_ratio_per_day_name"},records_total:{localizationKey:"records_total_name"},records_with_assigned_agents_completed:{localizationKey:"records_with_assigned_agents_completed_name"},records_with_assigned_agents_remaining:{localizationKey:"records_with_assigned_agents_remaining_name"},service_level:{format:"percent",localizationKey:"service_level_name"},service_level_target:{format:"percent",localizationKey:"service_level_target_name"},service_level_threshold_time:{localizationKey:"service_level_threshold_time_name"},service_level_per_day:{format:"percent",localizationKey:"service_level_per_day_name"},in_calls_waiting:{localizationKey:"in_calls_waiting_name"}},statsAgent:{acd_next_state:{align:"left",localizationKey:"acd_next_state_name"},acd_state:{align:"left",localizationKey:"acd_state_name"},active_item_direction:{align:"left",localizationKey:"active_item_direction_name"},active_item_hold_duration:{format:"duration",localizationKey:"active_item_hold_duration_name"},active_item_is_flagged:{localizationKey:"active_item_is_flagged_name"},active_item_media_type:{align:"left",localizationKey:"active_item_media_type_name"},active_item_party_name:{align:"left",localizationKey:"active_item_party_name_name"},active_item_qm_monitor_mode:{align:"left",localizationKey:"active_item_qm_monitor_mode_name"},active_item_sentiment:{localizationKey:"active_item_sentiment_name"},active_item_service_name:{align:"left",localizationKey:"active_item_service_name_name"},active_item_state:{align:"left",localizationKey:"active_item_state_name"},active_item_talk_duration:{format:"duration",localizationKey:"active_item_talk_duration_name"},agent_cm1:{localizationKey:"agent_cm1_name"},agent_cm2:{localizationKey:"agent_cm2_name"},agent_csat:{localizationKey:"agent_csat_name"},agent_fcr:{localizationKey:"agent_fcr_name"},agent_nps:{localizationKey:"agent_nps_name"},agent_average_idle_time:{format:"duration",localizationKey:"agent_average_idle_time_name"},agent_average_preview_time:{format:"duration",localizationKey:"agent_average_preview_time_name"},agent_calendar_overdue:{localizationKey:"agent_calendar_overdue_name"},agent_calendar_pending:{localizationKey:"agent_calendar_pending_name"},agent_occupancy:{localizationKey:"agent_occupancy_name"},agent_preview_duration:{format:"duration",localizationKey:"agent_preview_duration_name"},agent_success_ratio_per_day:{localizationKey:"agent_success_ratio_per_day_name"},agent_total_break_time:{format:"duration",localizationKey:"agent_total_break_time_name"},calls_average_handling_time_per_day:{format:"duration",localizationKey:"calls_average_handling_time_per_day_name"},calls_dispositions_per_day:{localizationKey:"calls_dispositions_per_day_name"},calls_dispositions_ratio_per_day:{format:"percent",localizationKey:"calls_dispositions_ratio_per_day_name"},extension:{localizationKey:"extension_name"},first_last_name:{align:"left",localizationKey:"first_last_name_name"},in_calls_active_on_agents:{localizationKey:"in_calls_active_on_agents_name"},in_calls_dropped_talking_per_day:{localizationKey:"in_calls_dropped_talking_per_day_name"},in_calls_duration_average_per_day:{format:"duration",localizationKey:"in_calls_duration_average_per_day_name"},in_calls_duration_total_per_day:{format:"duration",localizationKey:"in_calls_duration_total_per_day_name"},in_calls_first_time_put_on_hold_per_day:{localizationKey:"in_calls_first_time_put_on_hold_per_day_name"},in_calls_handled_per_day:{localizationKey:"in_calls_handled_per_day_name"},in_calls_put_on_hold_per_day:{localizationKey:"in_calls_put_on_hold_per_day_name"},in_calls_rejected_per_day:{localizationKey:"in_calls_rejected_per_day_name"},in_calls_transferred_per_day:{localizationKey:"in_calls_transferred_per_day_name"},in_email_handled_new_per_day:{localizationKey:"in_email_handled_new_per_day_name"},in_email_offered_per_day:{localizationKey:"in_email_offered_per_day_name"},in_email_processed_noreply_per_day:{localizationKey:"in_email_processed_noreply_per_day_name"},in_email_processed_replied_per_day:{localizationKey:"in_email_processed_replied_per_day_name"},in_email_pulled_per_day:{localizationKey:"in_email_pulled_per_day_name"},in_email_rejected_per_day:{localizationKey:"in_email_rejected_per_day_name"},in_email_waiting_in_personal_queues:{localizationKey:"in_email_waiting_in_personal_queues_name"},in_service_changed_per_day:{localizationKey:"in_service_changed_per_day_name"},in_transfers_received_per_day:{localizationKey:"in_transfers_received_per_day_name"},last_first_name:{align:"left",localizationKey:"last_first_name_name"},login_time:{format:"duration",localizationKey:"login_time_name"},next_reason:{align:"left",localizationKey:"next_reason_name"},out_calls_duration_average_per_day:{format:"duration",localizationKey:"out_calls_duration_average_per_day_name"},out_calls_duration_total_per_day:{format:"duration",localizationKey:"out_calls_duration_total_per_day_name"},out_calls_handled_per_day:{localizationKey:"out_calls_handled_per_day_name"},out_calls_rejected_per_day:{localizationKey:"out_calls_rejected_per_day_name"},out_email_waiting_in_personal_queues:{localizationKey:"out_email_waiting_in_personal_queues_name"},reason:{align:"left",localizationKey:"reason_name"},records_accepted_per_day:{localizationKey:"records_accepted_per_day_name"},records_skipped_per_day:{localizationKey:"records_skipped_per_day_name"},records_skipped_ratio_per_day:{format:"percent",localizationKey:"records_skipped_ratio_per_day_name"},state_duration:{format:"duration",localizationKey:"state_duration_name"},team_name:{align:"left",localizationKey:"team_name_name"},agent_idle_time:{align:"left",localizationKey:"agent_idle_time_name"},calls_average_acw_time_per_day:{align:"left",localizationKey:"calls_average_acw_time_per_day_name"}},statsService:{agent_cm1:{localizationKey:"agent_cm1_name"},agent_cm2:{localizationKey:"agent_cm2_name"},agent_csat:{localizationKey:"agent_csat_name"},agent_fcr:{format:"percent",localizationKey:"agent_fcr_name"},agent_nps:{format:"percent",localizationKey:"agent_nps_name"},agent_average_idle_time:{format:"duration",localizationKey:"agent_average_idle_time_name"},agent_average_preview_time:{format:"duration",localizationKey:"agent_average_preview_time_name"},agent_occupancy:{format:"percent",localizationKey:"agent_occupancy_name"},agents_busy:{localizationKey:"agents_busy_name"},agents_busy_on_service:{localizationKey:"agents_busy_on_service_name"},agents_logged:{localizationKey:"agents_logged_name"},agents_not_ready:{localizationKey:"agents_not_ready_name"},agents_ready:{localizationKey:"agents_ready_name"},agents_in_wrap_up:{localizationKey:"agents_in_wrap_up_name"},calls_average_handling_time_per_day:{format:"duration",localizationKey:"calls_average_handling_time_per_day_name"},calls_dispositions_per_day:{localizationKey:"calls_dispositions_per_day_name"},calls_dispositions_ratio_per_day:{format:"percent",localizationKey:"calls_dispositions_ratio_per_day_name"},in_average_speed_of_answer:{format:"duration",localizationKey:"in_average_speed_of_answer_name"},in_calls_first_time_put_on_hold_per_day:{localizationKey:"in_calls_first_time_put_on_hold_per_day_name"},in_callbacks_requested_per_day:{localizationKey:"in_callbacks_requested_per_day_name"},in_callbacks_waiting:{localizationKey:"in_callbacks_waiting_name"},in_calls_abandoned_in_ivr_per_day:{localizationKey:"in_calls_abandoned_in_ivr_per_day_name"},in_calls_abandoned_in_queue_per_day:{localizationKey:"in_calls_abandoned_in_queue_per_day_name"},in_calls_abandoned_in_queue_ratio_per_day:{format:"percent",localizationKey:"in_calls_abandoned_in_queue_ratio_per_day_name"},in_calls_abandoned_percent_per_day:{format:"percent",localizationKey:"in_calls_abandoned_percent_per_day_name"},in_calls_abandoned_ringing_per_day:{localizationKey:"in_calls_abandoned_ringing_per_day_name"},in_calls_abandoned_total_per_day:{localizationKey:"in_calls_abandoned_total_per_day_name"},in_calls_active_on_agents:{localizationKey:"in_calls_active_on_agents_name"},in_calls_disconnected_talking_per_day:{localizationKey:"in_calls_disconnected_talking_per_day_name"},in_calls_dropped_in_ivr_per_day:{localizationKey:"in_calls_dropped_in_ivr_per_day_name"},in_calls_dropped_in_queue_per_day:{localizationKey:"in_calls_dropped_in_queue_per_day_name"},in_calls_dropped_ringing_per_day:{localizationKey:"in_calls_dropped_ringing_per_day_name"},in_calls_dropped_talking_per_day:{localizationKey:"in_calls_dropped_talking_per_day_name"},in_calls_duration_average_per_day:{format:"duration",localizationKey:"in_calls_duration_average_per_day_name"},in_calls_duration_total_per_day:{format:"duration",localizationKey:"in_calls_duration_total_per_day_name"},in_calls_first_time_handled_per_day:{localizationKey:"in_calls_first_time_handled_per_day_name"},in_calls_first_time_queued_per_day:{localizationKey:"in_calls_first_time_queued_per_day_name"},in_calls_handled_per_day:{localizationKey:"in_calls_handled_per_day_name"},in_calls_handled_percent_per_day:{format:"percent",localizationKey:"in_calls_handled_percent_per_day_name"},in_calls_in_ivr:{localizationKey:"in_calls_in_ivr_name"},in_calls_in_progress:{localizationKey:"in_calls_in_progress_name"},in_calls_put_on_hold_per_day:{localizationKey:"in_calls_put_on_hold_per_day_name"},in_calls_queued_per_day:{localizationKey:"in_calls_queued_per_day_name"},in_calls_received_per_day:{localizationKey:"in_calls_received_per_day_name"},in_calls_rejected_per_day:{localizationKey:"in_calls_rejected_per_day_name"},in_calls_ringing:{localizationKey:"in_calls_ringing_name"},in_calls_routed_per_day:{localizationKey:"in_calls_routed_per_day_name"},in_calls_self_serviced_per_day:{localizationKey:"in_calls_self_serviced_per_day_name"},in_calls_short_abandoned_in_queue_per_day:{localizationKey:"in_calls_short_abandoned_in_queue_per_day_name"},in_calls_short_abandoned_in_queue_ratio_per_day:{format:"percent",localizationKey:"in_calls_short_abandoned_in_queue_ratio_per_day_name"},in_calls_transferred_per_day:{localizationKey:"in_calls_transferred_per_day_name"},in_calls_waiting:{localizationKey:"in_calls_waiting_name"},in_email_carried_over:{localizationKey:"in_email_carried_over_name"},in_email_carried_over_new:{localizationKey:"in_email_carried_over_new_name"},in_email_handled_new_per_day:{localizationKey:"in_email_handled_new_per_day_name"},in_email_processed_noreply_per_day:{localizationKey:"in_email_processed_noreply_per_day_name"},in_email_processed_replied_per_day:{localizationKey:"in_email_processed_replied_per_day_name"},in_email_received_new_per_day:{localizationKey:"in_email_received_new_per_day_name"},in_email_rejected_per_day:{localizationKey:"in_email_rejected_per_day_name"},in_email_waiting_in_personal_queues:{localizationKey:"in_email_waiting_in_personal_queues_name"},in_emails_joined_existing_cases:{localizationKey:"in_emails_joined_existing_cases_name"},in_ewt:{format:"duration",localizationKey:"in_ewt_name"},in_max_wait_time:{format:"duration",localizationKey:"in_max_wait_time_name"},in_service_changed_per_day:{localizationKey:"in_service_changed_per_day_name"},in_transfers_received_per_day:{localizationKey:"in_transfers_received_per_day_name"},name:{align:"left",localizationKey:"name_name"},out_calls_abandoned_in_ivr_per_day:{localizationKey:"out_calls_abandoned_in_ivr_per_day_name"},out_calls_abandoned_in_ivr_ratio_per_day:{format:"percent",localizationKey:"out_calls_abandoned_in_ivr_ratio_per_day_name"},out_calls_abandoned_in_queue_per_day:{localizationKey:"out_calls_abandoned_in_queue_per_day_name"},out_calls_abandoned_in_queue_ratio_per_day:{format:"percent",localizationKey:"out_calls_abandoned_in_queue_ratio_per_day_name"},out_calls_abandoned_per_day:{localizationKey:"out_calls_abandoned_per_day_name"},out_calls_abandoned_ratio_per_day:{format:"percent",localizationKey:"out_calls_abandoned_ratio_per_day_name"},out_calls_abandoned_ringing_per_day:{localizationKey:"out_calls_abandoned_ringing_per_day_name"},out_calls_active_on_agents:{localizationKey:"out_calls_active_on_agents_name"},out_calls_answered_per_day:{localizationKey:"out_calls_answered_per_day_name"},out_calls_answered_ratio_per_day:{format:"percent",localizationKey:"out_calls_answered_ratio_per_day_name"},out_calls_current_call_rate:{localizationKey:"out_calls_current_call_rate_name"},out_calls_disconnected_talking_per_day:{localizationKey:"out_calls_disconnected_talking_per_day_name"},out_calls_dropped_in_ivr_per_day:{localizationKey:"out_calls_dropped_in_ivr_per_day_name"},out_calls_dropped_in_queue_per_day:{localizationKey:"out_calls_dropped_in_queue_per_day_name"},out_calls_dropped_ringing_per_day:{localizationKey:"out_calls_dropped_ringing_per_day_name"},out_calls_dropped_talking_per_day:{localizationKey:"out_calls_dropped_talking_per_day_name"},out_calls_duration_average_per_day:{format:"duration",localizationKey:"out_calls_duration_average_per_day_name"},out_calls_duration_total_per_day:{format:"duration",localizationKey:"out_calls_duration_total_per_day_name"},out_calls_failed_per_day:{localizationKey:"out_calls_failed_per_day_name"},out_calls_handled_per_day:{localizationKey:"out_calls_handled_per_day_name"},out_calls_in_ivr:{format:"percent",localizationKey:"out_calls_in_ivr_name"},out_calls_in_progress:{localizationKey:"out_calls_in_progress_name"},out_calls_placed_per_day:{localizationKey:"out_calls_placed_per_day_name"},out_calls_queued_per_day:{localizationKey:"out_calls_queued_per_day_name"},out_calls_rejected_per_day:{localizationKey:"out_calls_rejected_per_day_name"},out_calls_ringing:{localizationKey:"out_calls_ringing_name"},out_calls_routed_per_day:{localizationKey:"out_calls_routed_per_day_name"},out_calls_self_serviced_per_day:{localizationKey:"out_calls_self_serviced_per_day_name"},out_calls_transferred_per_day:{localizationKey:"out_calls_transferred_per_day_name"},out_calls_unattended_per_day:{localizationKey:"out_calls_unattended_per_day_name"},out_calls_unattended_ratio_per_day:{format:"percent",localizationKey:"out_calls_unattended_ratio_per_day_name"},out_calls_waiting:{localizationKey:"out_calls_waiting_name"},out_campaign_duration_forecast:{format:"duration",localizationKey:"out_campaign_duration_forecast_name"},records_accepted_per_day:{localizationKey:"records_accepted_per_day_name"},records_attempted_per_day:{localizationKey:"records_attempted_per_day_name"},records_attempted_ratio_per_day:{format:"percent",localizationKey:"records_attempted_ratio_per_day_name"},records_completed:{localizationKey:"records_completed_name"},records_completed_per_day:{localizationKey:"records_completed_per_day_name"},records_completed_ratio:{format:"percent",localizationKey:"records_completed_ratio_name"},records_completed_ratio_per_day:{format:"percent",localizationKey:"records_completed_ratio_per_day_name"},records_dialable:{localizationKey:"records_dialable_name",alertInverted:!0},records_in_dnc:{localizationKey:"records_in_dnc_name"},records_out_of_quota:{localizationKey:"records_out_of_quota_name"},records_remaining:{localizationKey:"records_remaining_name"},records_skipped_per_day:{localizationKey:"records_skipped_per_day_name"},records_skipped_ratio_per_day:{format:"percent",localizationKey:"records_skipped_ratio_per_day_name"},records_total:{localizationKey:"records_total_name"},records_with_assigned_agents_completed:{localizationKey:"records_with_assigned_agents_completed_name"},records_with_assigned_agents_remaining:{localizationKey:"records_with_assigned_agents_remaining_name"},service_level:{format:"percent",localizationKey:"service_level_name"},service_level_target:{format:"percent",localizationKey:"service_level_target_name"},service_level_threshold_time:{localizationKey:"service_level_threshold_time_name"},service_level_per_day:{format:"percent",localizationKey:"service_level_per_day_name"},calls_average_acw_time_per_day:{localizationKey:"calls_average_acw_time_per_day_name"}},custom:{handled:{localizationKey:"handled"},averageHandlingTime:{localizationKey:"average_handling_time"},successfulInteraction:{localizationKey:"successful_interaction"}},timeSeriesServices:{in_calls_waiting:{localizationKey:"in_calls_waiting"},in_calls_in_progress:{localizationKey:"in_calls_in_progress"},service_level:{localizationKey:"service_level"},in_calls_in_ivr:{localizationKey:"in_calls_in_ivr"},in_calls_received_per_day:{localizationKey:"in_calls_received_per_day"},in_calls_abandoned_total_per_day:{localizationKey:"in_calls_abandoned_total_per_day"}},timeSeriesTeams:{agents_busy:{localizationKey:"agents_busy"},agents_logged:{localizationKey:"agents_logged"},agents_ready:{localizationKey:"agents_ready"},agents_not_ready:{localizationKey:"agents_not_ready"},agent_occupancy:{localizationKey:"agent_occupancy"}}},jr={statsSingle:"WALLBOARD_STATS_SINGLE",statsAgent:"WALLBOARD_STATS_AGENT",statsService:"WALLBOARD_STATS_SERVICE",custom:"WALLBOARD_STATS_CUSTOM",timeSeriesTeams:"WALLBOARD_STATS_TIME_SERIES_TEAMS",timeSeriesServices:"WALLBOARD_STATS_TIME_SERIES_SERVICES"};function xr(){var e=(0,b.useLocalizationState)().t;return(0,a.useCallback)((function(t,n){var r=e[jr[t]],a=Sr[t][n];return{format:null==a?void 0:a.format,align:null==a?void 0:a.align,alertInverted:null==a?void 0:a.alertInverted,name:r[null==a?void 0:a.localizationKey]}}),[e])}var Ar=n(4173);function Dr(e){var t,n=e.config,r=e.dataGrids,a=e.getStatsConfig,i=e.t,o=n.subscription.type,l=(0,le.cloneDeep)(n.subscription.req),c=l.columns,s=l.limit,u=l.id,d=(0,le.cloneDeep)(r||[]),_=d.find((function(e){return(null==e?void 0:e.id)===u})),f=d.filter((function(e){return e.id===u}))[0];if("service_grid"==o&&f&&Array.isArray(f.values)&&(f.values=f.values.slice(0,s)),"agent_grid"==o&&f&&Array.isArray(f.values)){var p=c.length+1,y=f.values.filter((function(e){var t=e[p];return G.acdStates.includes(t)}));y=(y=y.map((function(e){return delete e[p],e}))).slice(0,s);var b=c.find((function(e){return"total_contacts"===e.statName}));b&&y.forEach((function(e){var t=parseInt((null==b?void 0:b.id)?b.id:"0"),n=e[t],r=e[t+1];e[t]=""+parseInt(n)+parseInt(r),delete e[t+1]})),f.values=y}return c.forEach((function(e){var t=a("service_grid"===o?"statsService":"statsAgent",e.statName),r=parseInt((null==e?void 0:e.id)||""),l=o;if("agent_grid"===l&&e.statName&&void 0===t||"service_grid"===l&&e.statName&&void 0===t)console.warn("Widget: '"+n.title+"' uses unknown statistic name: "+e.statName);else{var c,s,u,d;if("agent_grid"===l&&e.statName&&"duration"===t.format||"service_grid"===l&&e.statName&&"duration"===t.format)null==_||null===(c=_.values)||void 0===c||c.forEach((function(e){null===e[r]&&(e[r]="0"),e[r]=(0,m.toHHMMSS)(Number(e[r]))}));if("agent_grid"==l&&"percent"==t.format||"service_grid"==l&&"percent"==t.format)null==_||null===(s=_.values)||void 0===s||s.forEach((function(e){null==e[r]&&(e[r]="0"),e[r]=e[r]+" %"}));if("agent_grid"===l&&t.align||"service_grid"===l&&t.align)null==_||null===(u=_.values)||void 0===u||u.forEach((function(e){null!==e[r]&&"0"!==e[r]||(e[r]="")}));if("acd_state"===e.statName)null==_||null===(d=_.values)||void 0===d||d.forEach((function(t){t[Number(e.id)]=function(e,t){switch(e){case"busy":return t.WALLBOARD_WIDGETS_GRIDS.state_busy();case"ready":return t.WALLBOARD_WIDGETS_GRIDS.state_ready();case"after_call_work":return t.WALLBOARD_WIDGETS_GRIDS.state_after_call_work();case"not_ready":return t.WALLBOARD_WIDGETS_GRIDS.state_not_ready();default:return t.WALLBOARD_WIDGETS_GRIDS.state_default()}}(t[Number(e.id)],i)}))}})),null==_||null===(t=_.values)||void 0===t?void 0:t.map((function(e){return Object.values(e).map((function(e){return{value:null==e?"0":e,id:(0,Ar.uuid)()}}))}))}function Er(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return u("px-[5px] py-1 first:sticky first:left-0 first:z-10",e?"bg-[--wallboard-table-even-row-bg:]":"bg-[--wallboard-table-odd-row-bg]")}function Pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ir={myStats:"#BAD027",teamStats:"#00A6E6"},Tr=function(e,t,n){return{chart:{height:t,width:void 0},plotOptions:{series:{dataLabels:{overflow:void 0,crop:!1,formatter:function(){return function(e,t){switch(t){case"percent":return"".concat(e.y,"%");case"minutes_seconds":return(0,m.toMMSS)(e.y);default:return"".concat(e.y)}}(this,n)}}}},title:{align:"left",useHTML:!0,margin:8,x:5,style:{fontSize:"14px",fontWeight:"normal",whiteSpace:"nowrap"},text:e},xAxis:{labels:{enabled:!1}},tooltip:{formatter:function(){return function(e,t){switch(t){case"percent":return"".concat(e.x,": ").concat(e.y,"%");case"minutes_seconds":return"".concat(e.x,": ").concat((0,m.toMMSS)(e.y));default:return"".concat(e.x,": ").concat(e.y)}}(this,n)}},colors:Object.values(Ir)}};function Lr(e,t){return.5*(e-t)}var Nr={inCalls:{agentValue:0,teamValue:0},outCalls:{agentValue:0,teamValue:0},successRatio:{agentValue:0,teamValue:0},averageHandlingTime:{agentValue:0,teamValue:0}};function Cr(e){var t,n=e.subscriptionData,r=e.config,i=e.cardHeight,o=(0,b.useLocalizationState)().t,l=(0,a.useMemo)((function(){var e,t;if(n)return(null!==(t=null===(e=r.subscription)||void 0===e?void 0:e.req.columns)&&void 0!==t?t:[]).reduce((function(e,t){var r,a,i,o,l,c=Number(null!==(l=null==n||null===(i=n.agent_grids)||void 0===i||null===(a=i[0].values)||void 0===a||null===(r=a[0])||void 0===r?void 0:r[Number(null!==(o=t.id)&&void 0!==o?o:0)])&&void 0!==l?l:0);switch(t.statName){case"in_calls_handled_per_day":var s,u,d=Number(null!==(u=null==n||null===(s=n.team_stats)||void 0===s?void 0:s.in_calls_handled_per_day)&&void 0!==u?u:0);e.inCalls={agentValue:c,teamValue:d};break;case"out_calls_handled_per_day":var _,f,p=Number(null!==(f=null==n||null===(_=n.team_stats)||void 0===_?void 0:_.out_calls_handled_per_day)&&void 0!==f?f:0);e.outCalls={agentValue:c,teamValue:p};break;case"agent_success_ratio_per_day":var y,m,b=Number(null!==(m=null==n||null===(y=n.team_stats)||void 0===y?void 0:y.team_success_ratio_per_day)&&void 0!==m?m:0);e.successRatio={agentValue:c,teamValue:b};break;case"calls_average_handling_time_per_day":var g,v,h=Number(null!==(v=null==n||null===(g=n.team_stats)||void 0===g?void 0:g.calls_average_handling_time_per_day)&&void 0!==v?v:0);e.averageHandlingTime={agentValue:c,teamValue:h}}return e}),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Pr(e,t,n[t])}))}return e}({},Nr))}),[null===(t=r.subscription)||void 0===t?void 0:t.req.columns,n]);return(0,a.useMemo)((function(){if(l){var e=o.WALLBOARD_MY_STATS_WIDGET.handled(),t=o.WALLBOARD_MY_STATS_WIDGET.average_handling_time(),n=o.WALLBOARD_MY_STATS_WIDGET.successful_interactions();return{handled:cr({dataName:e,data:[{name:o.WALLBOARD_MY_STATS_WIDGET.my_stats(),color:Ir.myStats,value:l.inCalls.agentValue+l.outCalls.agentValue},{name:o.WALLBOARD_MY_STATS_WIDGET.teams_stats(),color:Ir.teamStats,value:l.inCalls.teamValue+l.outCalls.teamValue}]},Tr(e,Lr(i,17))),averageHandlingTime:cr({dataName:t,data:[{name:o.WALLBOARD_MY_STATS_WIDGET.my_stats(),color:Ir.myStats,value:l.averageHandlingTime.agentValue},{name:o.WALLBOARD_MY_STATS_WIDGET.teams_stats(),color:Ir.teamStats,value:l.averageHandlingTime.teamValue}]},Tr(t,Lr(i,17),"minutes_seconds")),successRatio:cr({dataName:n,data:[{name:o.WALLBOARD_MY_STATS_WIDGET.my_stats(),color:Ir.myStats,value:l.successRatio.agentValue},{name:o.WALLBOARD_MY_STATS_WIDGET.teams_stats(),color:Ir.teamStats,value:l.successRatio.teamValue}]},Tr(n,Lr(i,17),"percent")),legend:[{name:o.WALLBOARD_MY_STATS_WIDGET.my_stats(),color:Ir.myStats},{name:o.WALLBOARD_MY_STATS_WIDGET.teams_stats(),color:Ir.teamStats}]}}}),[i,l,o.WALLBOARD_MY_STATS_WIDGET])}function kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Mr=n(4915),zr=function(e){var t=e.options,n=e.className;return(0,r.jsx)("div",{className:u("absolute flex h-1/2 w-1/2 flex-col items-center justify-center overflow-hidden",n),children:(0,r.jsx)(or.Chart,{options:t})})},Rr={agent_fcr:{minValue:0,maxValue:100,getFormattedMinMax:function(e){return"".concat(e,"%")}},agent_nps:{minValue:-100,maxValue:100,getFormattedMinMax:function(e){return"".concat(e,"%")}},agent_csat:{minValue:0,maxValue:10,getFormattedMinMax:function(e){return"".concat(e)}}},Br=function(e,t,n,r){var i,o,l,c=xr(),s=t.subscription.req,u=s.columns,d=s.id,_=null==u||null===(i=u.find((function(t){return t.statName===e})))||void 0===i?void 0:i.id,f=null==n?void 0:n.find((function(e){return(null==e?void 0:e.id)===d})),p=Number(null!==(l=null==f||null===(o=f.values)||void 0===o?void 0:o[0][Number(_)])&&void 0!==l?l:0);return(0,a.useMemo)((function(){return function(e){var t=e.value,n=e.getFormattedValue,r=e.minValue,a=e.maxValue,i=e.getFormattedMinMax,o=e.title;return{chart:{type:"solidgauge",animation:!1,backgroundColor:void 0},title:{text:'<span id="gaugeValue" style="font-size:1.5vmin;color: var(--wallboard-widget-gauge-color)">'.concat(o,"</span>"),align:"center",verticalAlign:"top"},subtitle:{text:'<span id="solidGaugeValue-'.concat(o,'" style="font-size:16px;color: var(--wallboard-widget-gauge-color)">').concat(n(t),"</span>"),align:"center",verticalAlign:"bottom",style:{transform:"translateY(-25%)"}},pane:{center:["50%","85%"],size:"100%",startAngle:-90,endAngle:90,background:[{backgroundColor:"#EEE",innerRadius:"60%",outerRadius:"100%",shape:"arc"}]},tooltip:{enabled:!1},yAxis:{min:r,max:a,title:{y:-70,text:void 0},lineWidth:0,minorTickInterval:null,tickAmount:2,tickPositions:r&&a?[r,a]:void 0,endOnTick:!1,labels:{y:16,distance:-10,style:{color:"var(--wallboard-widget-gauge-color)",fontSize:"14px"},padding:5,formatter:function(){return i(this.value)}}},credits:{enabled:!1},plotOptions:{solidgauge:{dataLabels:{y:5,borderWidth:0,useHTML:!0}}},colors:["#BAD027"],series:[{type:"solidgauge",data:[t],dataLabels:{enabled:!1}}],exporting:{enabled:!1}}}({value:p,maxValue:Rr[e].maxValue,minValue:Rr[e].minValue,getFormattedMinMax:Rr[e].getFormattedMinMax,getFormattedValue:function(t){var n;return wr(t,null===(n=c("statsAgent",e))||void 0===n?void 0:n.format)},title:r})}),[p,e,r,c])},Kr=function(e){var t=e.children,n=(0,b.useLocalizationState)().t;return(0,r.jsx)(r.Fragment,{children:t||n.WALLBOARD.no_available()})};function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Fr(e,t,n[t])}))}return e}function Vr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Hr=function(e){var t,n=e.children,a=e.bigText;return(0,r.jsx)("p",{className:u((t={},Fr(t,"text-[250%]",a),Fr(t,"text-[150%]",!a),t),"m-0 shrink-0 truncate text-center"),title:n,children:(0,r.jsx)(Kr,{children:n})})};var Qr=1e6;var Yr=function(e){var t=e.config;return(0,r.jsxs)("div",{className:"h-full overflow-auto p-2",children:["Unknown widget type",(0,r.jsx)("pre",{children:JSON.stringify(t,null,2)})]})};function $r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$r(e,t,n[t])}))}return e}function Xr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var Zr={grid:function(e){var t=e.config,n=e.subscriptionData,i=(0,b.useLocalizationState)().t,o=xr(),l=t.subscription.type,c=(0,a.useMemo)((function(){if(n)switch(l){case"agent_grid":return Dr({config:t,t:i,getStatsConfig:o,dataGrids:null==n?void 0:n.agent_grids});case"service_grid":return Dr({config:t,t:i,getStatsConfig:o,dataGrids:null==n?void 0:n.service_grids})}}),[n,l,t,i,o]);return(0,r.jsx)(d.WithNoData,{noData:!(null==c?void 0:c.length),className:"!justify-start",children:(0,r.jsx)("div",{className:"h-full w-full overflow-auto",children:(0,r.jsxs)("table",{className:"w-full border-t border-[--wallboard-grid-border] text-left text-[1.7vm]",children:[(0,r.jsx)("thead",{children:t.columtitle&&(0,r.jsx)("tr",{className:"border-b border-[--wallboard-grid-border] px-[5px] font-bold text-[1.7vm]",children:t.subscription.req.columns.map((function(e){var t=e.coltitle,n=e.id;return(0,r.jsx)("th",{className:Er(),children:t},n)}))})}),(0,r.jsx)("tbody",{children:null==c?void 0:c.map((function(e,t){return(0,r.jsx)("tr",{children:e.map((function(e){return(0,r.jsx)("td",{className:Er(t%2==1),children:e.value},e.id)}))},e[0].id)}))})]})})})},datetime:function(){var e=br((0,a.useState)(Date.now()),2),t=e[0],n=e[1];(0,a.useEffect)((function(){var e=setInterval((function(){n(Date.now())}),1e3);return function(){clearInterval(e)}}),[]);var i=yr()(t).format("D MMMM YYYY"),o=yr()(t).format("HH:mm:ss");return(0,r.jsx)("div",{className:"flex h-full w-full flex-col justify-center text-center text-[4vmin]",children:(0,r.jsxs)("div",{children:[i,(0,r.jsx)("br",{}),o]})})},empty:function(){return(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center"})},gauge:function(e){var t,n=e.config,i=e.subscriptionData,o=xr(),l=(0,vr.useAtomValue)(hr),c=(0,a.useMemo)((function(){var e;if(null===(e=n.subscription)||void 0===e?void 0:e.req)return o("statsSingle",n.subscription.req[0])}),[null===(t=n.subscription)||void 0===t?void 0:t.req,o]),s=(0,a.useMemo)((function(){var e;if(i&&n.subscription){var t=n.subscription.req[0],r=null===(e=i.stats_totals)||void 0===e?void 0:e[t];return Number(null!=r?r:0)}}),[n.subscription,i]);(0,a.useEffect)((function(){if(n.warning_sound){var e=(null==c?void 0:c.alertInverted)||!1,t=s||0;if((!e&&t>=n.alertThreshold||e&&t<=n.alertThreshold)&&l){var r=l.start().stop;return function(){r()}}}}),[l,n.alertThreshold,n.warning_sound,s,null==c?void 0:c.alertInverted]);var u=(0,a.useMemo)((function(){if(void 0!==s)return function(e){var t=e.value,n=e.config,r=e.inverted,a=e.getFormattedValue;return{chart:{type:"solidgauge",animation:!1,backgroundColor:void 0},title:{text:'<span id="gaugeValue" style="font-size:25px;color: var(--wallboard-widget-gauge-color)">'.concat(a(t),"</span>"),align:"center",verticalAlign:"middle"},pane:{center:["50%","60%"],size:"100%",startAngle:-120,endAngle:120,background:[{backgroundColor:"#EEE",innerRadius:"85%",outerRadius:"100%",shape:"arc"}]},tooltip:{enabled:!1},yAxis:{min:0,max:dr(n,r),title:{y:-70,text:void 0},stops:sr(n,r),lineWidth:0,minorTickInterval:null,tickAmount:2,tickPositions:ur(n,r),endOnTick:!1,labels:{y:25,style:{color:"var(--wallboard-widget-gauge-color)"},padding:5,formatter:function(){return a(this.value)}}},credits:{enabled:!1},plotOptions:{solidgauge:{dataLabels:{y:-30,borderWidth:0,useHTML:!0,allowOverlap:!0},innerRadius:"85%"}},series:[{type:"solidgauge",data:[t],dataLabels:{enabled:!1}}],exporting:{enabled:!1}}}({value:s,config:n,inverted:(null==c?void 0:c.alertInverted)||!1,getFormattedValue:function(e){return wr(e,null==c?void 0:c.format)}})}),[n,s,c]);return(0,r.jsx)(d.WithNoData,{noData:void 0===u,className:"h-full",children:(0,r.jsx)(or.Chart,{options:u})})},image:function(e){var t=e.config,n=(0,a.useMemo)((function(){return{backgroundImage:"url(".concat(t.imageUrl,")"),backgroundSize:t.style}}),[t.imageUrl,t.style]);return(0,r.jsx)("div",{className:"h-full bg-center bg-no-repeat",style:n})},news:function(e){var t,n=e.subscriptionData;return(0,r.jsx)("div",{className:"h-full overflow-y-auto p-2",children:null==n||null===(t=n.chat_messages)||void 0===t?void 0:t.map((function(e){return(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,Mr.sanitizeHtml)(e.content)}},e.id)}))})},single:function(e){var t,n,i,o=e.config,l=e.subscriptionData,c=xr(),s=(0,vr.useAtomValue)(hr),_=(0,a.useRef)(null),f=Ur((0,a.useState)({fontSize:"".concat(null===(t=_.current)||void 0===t?void 0:t.clientHeight,"%")}),2),p=f[0],y=f[1],b=(0,m.useResizeObserver)(_);(0,a.useLayoutEffect)((function(){y(b?function(e){return Vr(qr({},e),{fontSize:"".concat(b.contentRect.height,"%")})}:function(e){var t;return Vr(qr({},e),{fontSize:"".concat(null===(t=_.current)||void 0===t?void 0:t.clientHeight,"%")})})}),[b]);var g=(0,a.useMemo)((function(){var e;if(null===(e=o.subscription)||void 0===e?void 0:e.req)return c("statsSingle",o.subscription.req[0])}),[null===(n=o.subscription)||void 0===n?void 0:n.req,c]),v=(0,a.useMemo)((function(){var e,t;if(l&&(null===(e=o.subscription)||void 0===e?void 0:e.req[0])){var n=o.subscription.req[0];return null===(t=l.stats_totals)||void 0===t?void 0:t[n]}}),[null===(i=o.subscription)||void 0===i?void 0:i.req,l]);(0,a.useEffect)((function(){if(o.warning_sound&&v){var e=(null==g?void 0:g.alertInverted)||!1,t=parseInt(v);if((!e&&t>=o.alertThreshold||e&&t<=o.alertThreshold)&&s){var n=s.start().stop;return function(){n()}}}}),[s,o.alertThreshold,o.warning_sound,v,null==g?void 0:g.alertInverted]);var h=(0,a.useMemo)((function(){if(v)return wr(v,null==g?void 0:g.format)}),[v,null==g?void 0:g.format]),O=(0,a.useMemo)((function(){var e,t;if(l&&(null===(e=o.subscription)||void 0===e?void 0:e.req[1])){var n=o.subscription.req[1],r=c("statsSingle",n);return wr(null===(t=l.stats_totals)||void 0===t?void 0:t[n],r.format)}}),[o.subscription,c,l]),w=(0,le.isUndefined)(v&&O);return(0,r.jsx)("div",{ref:_,style:p,className:"h-full w-full",children:(0,r.jsx)(d.WithNoData,{noData:w,className:u({"justify-start":!w}),children:(0,r.jsxs)("div",{className:"flex h-4/5 w-full flex-col",children:[(0,r.jsx)(Hr,{bigText:!0,children:h}),(0,r.jsx)(Hr,{children:O})]})})})},text:function(e){var t=e.config;return(0,r.jsx)("div",{className:"h-full overflow-y-auto p-2",children:t.text})},summary:function(e){var t=e.config,n=e.subscriptionData,i=(0,b.useLocalizationState)().t,o=(0,a.useMemo)((function(){var e,r,a;if(n){var o=null===(e=t.subscription.req.columns.find((function(e){return"acd_state"===e.statName})))||void 0===e?void 0:e.id;if(o){var l=null==n||null===(a=n.agent_grids)||void 0===a||null===(r=a[0].values)||void 0===r?void 0:r.map((function(e){return e[+o]})),c=["busy","ready","after_call_work","not_ready"],s=null==l?void 0:l.reduce((function(e,t){var n=c.findIndex((function(e){return e===t}));return-1!==n&&(e[n]=e[n]+1),e}),Array.from({length:c.length},(function(){return 0})));if(null==s?void 0:s.length)return{values:s,names:c.map((function(e){return i.WALLBOARD_AGENT_STATES[e]()}))}}}}),[t.subscription.req.columns,n,i.WALLBOARD_AGENT_STATES]),l=(0,a.useMemo)((function(){if(o)return fr({names:o.names,values:o.values,options:{legend:{align:"right",verticalAlign:"middle",labelFormat:"{y} {name}",layout:"vertical"},colors:["var(--wallboard-agent-busy-state-color)","var(--wallboard-agent-ready-state-color)","var(--wallboard-agent-acw-state-color)","var(--wallboard-agent-not-ready-state-color)"],tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> {point.name} {point.y}',headerFormat:""}}})}),[o]);return(0,r.jsx)(d.WithNoData,{noData:!(null==o?void 0:o.values.length),children:(0,r.jsx)(or.Chart,{options:l})})},break_time:function(e){var t,n=e.config,i=e.subscriptionData,o=(0,a.useMemo)((function(){var e,t,r,a;if(i){var o,l=null===(e=n.subscription)||void 0===e?void 0:e.req.columns.find((function(e){return"agent_total_break_time"===e.statName}));if(null==l?void 0:l.id)return Number(null!==(o=null==i||null===(a=i.agent_grids)||void 0===a||null===(r=a[0].values)||void 0===r||null===(t=r[0])||void 0===t?void 0:t[+l.id])&&void 0!==o?o:0)}}),[null===(t=n.subscription)||void 0===t?void 0:t.req.columns,i]),l=(0,Z.useQuery)({queryKey:ft(),queryFn:Ze.getTenantConfiguration,gcTime:m.MS_IN_DAY,staleTime:m.MS_IN_DAY}).data,c=(0,b.useLocalizationState)().t,s=(0,a.useMemo)((function(){var e,t=null!==(e=null==l?void 0:l.agentConfiguration.agentDailyBreaktime)&&void 0!==e?e:0,n=Math.min(Math.round((null!=o?o:0)/60),t),r=Math.max(t-n,0);return fr({names:[c.WALLBOARD_BREAK_TIME_WIDGET.remaining(),c.WALLBOARD_BREAK_TIME_WIDGET.used()],values:[r,n],formatter:function(){var e=this.y,t=this.key;return void 0===e||void 0===t?"":c.WALLBOARD_BREAK_TIME_WIDGET.minutes_label("".concat(e),"".concat(t))},enableDataLabels:!0})}),[o,c.WALLBOARD_BREAK_TIME_WIDGET,null==l?void 0:l.agentConfiguration.agentDailyBreaktime]);return(0,r.jsx)(d.WithNoData,{noData:void 0===o,children:(0,r.jsx)(or.Chart,{options:s})})},dispositions:function(e){var t,n=e.config,i=e.subscriptionData,o=(0,a.useMemo)((function(){var e,t,r,a;if(i){var o=null===(e=n.subscription)||void 0===e?void 0:e.req.columns.find((function(e){return"top_dispositions_per_day"===e.statName}));if(null==o?void 0:o.id){var l=null==i||null===(a=i.agent_grids)||void 0===a||null===(r=a[0].values)||void 0===r||null===(t=r[0])||void 0===t?void 0:t[+o.id];if(l)try{var c=JSON.parse(l);return(0,gr.convertKVArray)(c,(function(e){return{name:e.name,value:Number(e.count)}}))}catch(s){return}}}}),[null===(t=n.subscription)||void 0===t?void 0:t.req.columns,i]),l=(0,b.useLocalizationState)().t,c=(0,a.useMemo)((function(){if(null==o?void 0:o.length)return cr({dataName:l.WALLBOARD_DISPOSITION_WIDGET.count(),data:o})}),[o,l.WALLBOARD_DISPOSITION_WIDGET]);return(0,r.jsx)(d.WithNoData,{noData:!c,children:(0,r.jsx)(or.Chart,{options:c})})},my_stats:function(e){var t,n=e.config,i=e.subscriptionData,o=Wr((0,a.useState)(null),2),l=o[0],c=o[1],s=(0,m.useResizeObserver)(l),u=Cr({config:n,subscriptionData:i,cardHeight:null!==(t=null==s?void 0:s.contentRect.height)&&void 0!==t?t:0});return(0,r.jsx)(d.WithNoData,{noData:!u,className:"flex flex-auto flex-col !items-start",children:(0,r.jsxs)("section",{ref:c,className:"mb-2 h-full w-full",children:[(0,r.jsxs)("div",{className:"relative flex flex-auto justify-center",children:[(0,r.jsx)(or.Chart,{options:null==u?void 0:u.handled,className:"relative !h-auto w-1/2"}),(0,r.jsx)(or.Chart,{options:null==u?void 0:u.averageHandlingTime,className:"relative !h-auto w-1/2"})]}),(0,r.jsx)(or.Chart,{options:null==u?void 0:u.successRatio,className:"relative !h-auto w-1/2 flex-auto"}),(0,r.jsx)("div",{className:"flex w-full justify-center",children:(0,r.jsx)(or.ChartLegend,{options:null==u?void 0:u.legend,className:"h-[17px]"})})]})})},satisfaction:function(e){var t=e.config,n=e.subscriptionData,a=(0,b.useLocalizationState)().t,i=Br("agent_fcr",t,null==n?void 0:n.agent_grids,a.WALLBOARD_STATS_SINGLE.agent_fcr_name()),o=Br("agent_nps",t,null==n?void 0:n.agent_grids,a.WALLBOARD_STATS_SINGLE.agent_nps_name()),l=Br("agent_csat",t,null==n?void 0:n.agent_grids,a.WALLBOARD_STATS_SINGLE.agent_csat_name());return(0,r.jsxs)(d.WithNoData,{className:"h-full",noData:!n,children:[(0,r.jsx)(zr,{options:i,className:"left-0 top-1/2"}),(0,r.jsx)(zr,{options:o,className:"left-1/2 top-1/2"}),(0,r.jsx)(zr,{options:l,className:"bottom-1/4 left-1/4 top-0"})]})},agenda:function(e){var t,n=e.config,i=(t=n.user_id,(0,Z.useQuery)({queryKey:pt(),queryFn:function(){return Ze.getAgenda({requestBody:[t]})},refetchInterval:5*m.MS_IN_SECOND})).data,o=(0,a.useMemo)((function(){var e,t;return null!==(t=null==i||null===(e=i[n.user_id])||void 0===e?void 0:e.slice(0,6))&&void 0!==t?t:[]}),[i,n.user_id]),l=(0,a.useMemo)((function(){return o.reduce((function(e,t){var n=(0,m.formatDate)(t.startTime,"dddd, MMMM D");return e[n]||(e[n]=[]),e[n].push(t),e}),{})}),[o]);return(0,r.jsx)(d.WithNoData,{noData:!o.length,className:"!justify-start !overflow-auto",children:Object.entries(l).map((function(e){var t=ir(e,2),n=t[0],a=t[1];return(0,r.jsxs)("div",{className:"flex w-full flex-col",children:[(0,r.jsx)("div",{className:"mx-5 mb-2.5 mt-5 text-[1.5vmin] text-[--wallboard-text-secondary]",children:n}),a.map((function(e,t){var n,a=(0,m.isSame)(new Date(e.startTime),new Date(e.endTime),"day");return(0,r.jsxs)("div",{className:u("flex flex-auto",{"bg-[--wallboard-table-odd-row-bg]":(t+1)%2,"bg-[--wallboard-table-even-row-bg:]":!((t+1)%2)}),children:[(0,r.jsxs)("div",{className:"w-2/5 py-1 pl-5",children:[(0,r.jsx)("div",{children:(0,m.formatDate)(e.startTime,a?"hh:mm":"MMM DD, hh:mm")}),(0,r.jsx)("div",{children:(0,m.formatDate)(e.endTime,a?"hh:mm":"MMM DD, hh:mm")})]}),(0,r.jsx)("div",{className:u((n=e.startTime,n-Date.now()<10*m.MS_IN_MINUTE?"bg-[--wallboard-agenda-in-progress-event-color]":n-Date.now()<2*m.MS_IN_HOUR?"bg-[--wallboard-agenda-soon-event-color]":"bg-[--wallboard-agenda-future-event-color]"),"h-full w-[5px]")}),(0,r.jsx)("div",{className:"flex grow items-center px-2.5 py-1",children:e.title})]},e.id)}))]},n)}))})},time_series:function(e){var t=e.config,n=(0,b.useLocalizationState)().t,i=(0,m.useBoolean)(!0),o=i.value,l=i.toggle,c=(0,m.useBoolean)(!0),s=c.value,u=c.toggle,_=function(e){var t,n,r=(new Date).getTime(),a=e.series_type,i=e.value,o=r-parseInt(e.timeRange);return{measurement:a,statistic:i,start:String(o*Qr),end:String(r*Qr),timeInterval:(t=Number(e.timeRange),n="20s",t>=m.MS_IN_HOUR&&(n="1m"),t>=3*m.MS_IN_HOUR&&(n="5m"),t>=12*m.MS_IN_HOUR&&(n="10m"),t>=12*m.MS_IN_HOUR*7&&(n="30m"),n)}}(t),f=function(e){return(0,Z.useQuery)({queryKey:mt(e.statistic,e.timeInterval),queryFn:function(){return Ze.getTimeSeriesData(e)},refetchInterval:m.MS_IN_MINUTE})}(_),p=f.data,y=(0,a.useMemo)((function(){if(p&&p.results&&p.results.length&&p.results[0].series){var e={};p.results[0].series.forEach((function(t){var n,r=(null===(n=t.tags)||void 0===n?void 0:n.name)||"";e[r]=[],t.values.forEach((function(t){if(null!==t[1]){var n=new Date(t[0]),a=n.getTime()-n.getTimezoneOffset()*m.MS_IN_MINUTE;e[r].push({x:a,y:t[1]})}}))}));var t=[];for(var n in e){var r={name:n,data:e[n]};t.push(r)}return t}}),[p]),g=(0,a.useMemo)((function(){if(void 0!==y)return function(e,t,n){return{chart:{type:"spline",animation:or.highcharts.svg,marginRight:10,backgroundColor:""},title:{text:""},xAxis:{gridLineWidth:n?1:0,gridLineColor:"#808080",type:"datetime",tickPixelInterval:150},yAxis:{allowDecimals:!1,gridLineWidth:t?1:0,gridLineColor:"#808080",title:{text:"Value"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{formatter:function(){return"<b>"+this.series.name+"</b><br/>"+or.highcharts.dateFormat("%Y-%m-%d %H:%M:%S",this.x)+"<br/>"+or.highcharts.numberFormat(this.y,2)}},legend:{enabled:!0,itemStyle:{fontFamily:"Muli",color:"var(--wallboard-text-secondary)"}},exporting:{enabled:!1},plotOptions:{series:{marker:{enabled:!1},turboThreshold:5e3}},credits:{enabled:!1},series:e}}(y,o,s)}),[y,o,s]);return(0,r.jsxs)(d.WithNoData,{noData:!(null==y?void 0:y.length),children:[(0,r.jsx)(or.Chart,{options:g}),(0,r.jsxs)("div",{className:"flex w-8/12 justify-around",children:[(0,r.jsxs)("label",{htmlFor:"xGridSwitch-".concat(t.id),className:"flex",children:[(0,r.jsx)("span",{children:n.WALLBOARD_WIDGET_TIME_SERIES.show_x_grid()}),(0,r.jsx)("input",{className:"ml-[5px] self-center",checked:s,id:"xGridSwitch-".concat(t.id),type:"checkbox",onChange:u})]}),(0,r.jsxs)("label",{htmlFor:"yGridSwitch-".concat(t.id),className:"flex",children:[(0,r.jsx)("span",{children:n.WALLBOARD_WIDGET_TIME_SERIES.show_y_grid()}),(0,r.jsx)("input",{className:"ml-[5px] self-center",checked:o,id:"yGridSwitch-".concat(t.id),type:"checkbox",onChange:l})]})]})]})}};function ea(e){var t=e.Card,n=e.config,a=e.subscriptionData,i=e.removeWidget,o=n.type,l=Zr[o]||Yr,c=ra(e);return(0,r.jsx)(t,Xr(Jr({},e),{className:c,header:(0,r.jsx)(na,{config:n,removeWidget:i}),children:(0,r.jsx)(l,{config:n,subscriptionData:a})}))}function ta(e){var t=e.Card,n=e.config,a=e.subscriptionData,i=n.type,o=Zr[i]||Yr,l=ra(e);return(0,r.jsx)(t,Xr(Jr({},e),{className:l,header:(0,r.jsx)(na,{config:n}),children:(0,r.jsx)(o,{config:n,subscriptionData:a})}))}function na(e){var t=e.removeWidget,n=e.config,a=u("flex h-6 w-6 items-center justify-center opacity-0","transition-all duration-300 hover:!opacity-100","group-focus-within:opacity-70 group-hover:opacity-70");return(0,r.jsxs)("div",{className:"flex w-full items-center justify-between gap-4",children:[(0,r.jsx)("div",{className:"text-xl",children:n.title}),t&&(0,r.jsx)("div",{className:"flex items-center gap-1",children:(0,r.jsx)(d.Button,{transparent:!0,onClick:function(){return t(n)},className:a,children:(0,r.jsx)(rr.IconTrash,{className:"h-5"})})})]})}function ra(e){var t=e.config,n=e.subscriptionData,r=(0,a.useMemo)((function(){var e,r;return"single"===t.type&&(!!(t.alertThreshold&&n&&(null===(e=t.subscription)||void 0===e?void 0:e.req[0]))&&parseInt((null===(r=n.stats_totals)||void 0===r?void 0:r[t.subscription.req[0]])||"0")>=t.alertThreshold)}),[t,n]);return(0,a.useMemo)((function(){if("single"===t.type)if(r)return u("group [&>div]:border-[--wallboard-alerted-border] [&>div]:bg-[--wallboard-alerted-background]");return u("group")}),[r,t.type])}const aa=n.p+"static/media/notification.b167f1b7.mp3",ia=n.p+"static/media/notification.a3fa068e.wav";var oa=function(){var e=(0,a.useRef)(null),t=(0,a.useMemo)((function(){return(0,le.throttle)((function(){var t;null===(t=e.current)||void 0===t||t.play()}),1e4,{leading:!0})}),[]),n=(0,vr.useSetAtom)(hr);return(0,a.useEffect)((function(){n({start:function(){t();var e=setInterval((function(){return t()}),1e4);return{stop:function(){return clearInterval(e)}}}})}),[t,n]),(0,r.jsxs)("audio",{ref:e,children:[(0,r.jsx)("source",{src:ia}),(0,r.jsx)("source",{src:aa})]})};function la(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){la(e,t,n[t])}))}return e}function sa(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function ua(e,t){(0,F.assertDefined)(e),(0,F.assertTrue)(e.id===t,"Wrong widget id for update")}function da(e,t){return{type:"dispositions",req:sa(ca({},{filter_by:"1",filter_operation:"NE",filter_value:"",limit:1e3,order_by:"1",order_dir:"ASC",team_ids:[]}),{columns:[{id:"1",statName:"top_dispositions_per_day"}],id:e,user_id:t})}}function _a(e,t){return{type:"satisfaction",req:sa(ca({},{filter_by:"1",filter_operation:"NE",filter_value:"",limit:1e3,order_by:"1",order_dir:"ASC",team_ids:[]}),{columns:[{id:"1",statName:"agent_fcr"},{id:"2",statName:"agent_nps"},{id:"3",statName:"agent_csat"}],id:e,user_id:t})}}function fa(e,t){return{type:"break_time",req:sa(ca({},{filter_by:"1",filter_operation:"NE",filter_value:"",limit:1e3,order_by:"1",order_dir:"ASC",team_ids:[]}),{columns:[{id:"1",statName:"agent_total_break_time"}],id:e,user_id:t})}}function pa(e,t){return{type:"my_stats",req:sa(ca({},{filter_by:"1",filter_operation:"NE",filter_value:"",limit:1e3,order_by:"1",order_dir:"ASC",team_ids:[]}),{columns:[{id:"1",statName:"in_calls_handled_per_day"},{id:"2",statName:"out_calls_handled_per_day"},{id:"3",statName:"agent_success_ratio_per_day"},{id:"4",statName:"calls_average_handling_time_per_day"}],id:e,user_id:t})}}var ya=n(7126),ma=n(3884),ba=n(2851);function ga(e){var t=(0,b.useLocalizationState)().t;return(0,a.useMemo)((function(){var n=Sr[e],r=t[jr[e]];return(0,F.typedKeys)(n).map((function(e){var t=n[e];return{text:r[t.localizationKey](),value:e}}))}),[t,e])}function va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ha(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Oa(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var wa=i().forwardRef((function(e,t){var n=e.children,a=e.className,i=Oa(e,["children","className"]);return(0,r.jsx)("div",ha(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){va(e,t,n[t])}))}return e}({ref:t},i),{className:u(a,"grid grid-cols-[minmax(0,2fr)_24px_1fr_48px] gap-4"),children:n}))}));function Sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Sa(e,t,n[t])}))}return e}function xa(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var Aa=function(e){var t=e.id,n=e.index,i=e.control,o=e.setValue,l=e.remove,c=e.type,s=(0,a.useCallback)((function(){l(n)}),[l,n]),_=ga("agent_grid"===c?"statsAgent":"statsService"),f=(0,ma.nB)({id:t,animateLayoutChanges:ma.cP}),p=f.attributes,y=f.listeners,m=f.setNodeRef,b=f.transform,g=f.transition,v=f.setActivatorNodeRef,h=f.isDragging,O={transform:ba.ux.Transform.toString(b),transition:g},w=(0,nn.useWatch)({control:i,name:"columns.".concat(n,".dir")}),S=(0,a.useCallback)((function(){o("columns.".concat(n,".dir"),"DESC"===w?"ASC":"EMPT"===w?"DESC":"EMPT")}),[w,o,n]);return(0,r.jsxs)(wa,xa(ja({ref:m,style:O},p),{className:u("group/stat-row bg-main-bg py-1",{"z-10":h}),children:[(0,r.jsx)(rn.HiddenField,{name:"columns.".concat(n,".id"),control:i}),(0,r.jsx)(rn.SelectField,{search:!0,options:_,name:"columns.".concat(n,".statName"),control:i}),(0,r.jsxs)("div",{className:"self-center justify-self-center",children:[(0,r.jsx)(d.SemanticButton,{onClick:S,transparent:!0,className:u("mr-0 flex items-center text-[20px]","[&>i]:flex [&>i]:items-center [&>i]:justify-center [&>i]:outline-none","opacity-0 hover:opacity-100",{"opacity-100":"EMPT"!==w}),icon:Da(w),enabledInOffline:!0}),(0,r.jsx)(rn.HiddenField,{name:"columns.".concat(n,".dir"),control:i})]}),(0,r.jsx)(rn.TextField,{fluid:!0,name:"columns.".concat(n,".coltitle"),control:i}),(0,r.jsxs)("div",{className:"flex self-center justify-self-center",children:[(0,r.jsx)(d.SemanticButton,{onClick:s,enabledInOffline:!0,transparent:!0,className:"hidden items-center text-lg group-hover/stat-row:flex   [&>i]:flex [&>i]:items-center [&>i]:justify-center",icon:"x"}),(0,r.jsx)(d.SemanticButton,ja({ref:v,enabledInOffline:!0,transparent:!0,className:"hidden items-center text-lg group-hover/stat-row:flex   [&>i]:flex [&>i]:items-center [&>i]:justify-center",icon:"bars"},y))]})]}))};function Da(e){return"ASC"===e?"caret up":"DESC"===e?"caret down":"circle outline"}var Ea=function(e,t){return{id:String(e+1),statName:"agent_grid"===t?"first_last_name":"name",dir:Pa(e,t),coltitle:""}},Pa=function(e,t){return 0===e&&"agent_grid"===t?"DESC":0===e&&"service_grid"===t?"ASC":"EMPT"};function Ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ta(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ia(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ia(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var La=function(e){var t=e.control,n=e.setValue,i=e.type,o=(0,b.useLocalizationState)().t,l=(0,nn.useFieldArray)({control:t,name:"columns"}),c=l.fields,s=l.append,u=l.remove,_=l.move,f=(0,a.useCallback)((function(){s(Ea(c.length,i))}),[s,c.length,i]),p=Ta((0,a.useState)(null),2),m=p[0],g=p[1],v=function(e){return c.findIndex((function(t){return t.id===e}))},h=m?v(m):-1;return(0,r.jsxs)("div",{children:[(0,r.jsxs)(wa,{children:[(0,r.jsx)("p",{className:"font-bold",children:o.GLOBAL.statistic()}),(0,r.jsx)("p",{className:"font-bold",children:o.GLOBAL.sort()}),(0,r.jsx)("p",{className:"font-bold",children:o.GLOBAL.title()})]}),(0,r.jsx)("div",{className:"mb-1 flex flex-col",children:(0,r.jsx)(ya.DndContext,{onDragStart:function(e){var t=e.active;t&&g(t.id)},onDragEnd:function(e){var t=e.over;if(g(null),t){var n=v(t.id);h!==n&&_(h,n)}},onDragCancel:function(){return g(null)},children:(0,r.jsx)(ma.Fo,{items:c,strategy:ma.qw,children:null==c?void 0:c.map((function(e,a){return(0,r.jsx)(Aa,{type:i,id:e.id,control:t,setValue:n,index:a,remove:u},e.id)}))})})}),(0,r.jsxs)(d.SemanticButton,{onClick:f,basic:!0,icon:!0,enabledInOffline:!0,children:[(0,r.jsx)(y.SmIcon,{name:"plus"}),o.WALLBOARD_WIDGETS_GRIDS.add_column()]})]})};function Na(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ka(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Wa(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ma(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var za=function(e){var t=e.values,n=e.onApply,i=e.onClose,o=Wa(e,["values","onApply","onClose"]),l=(0,b.useLocalizationState)().t,c=(0,nn.useForm)({defaultValues:t}),s=c.control,u=c.handleSubmit,_=(0,a.useMemo)((function(){return u(function(){var e,t=(e=function(e){return Ma(this,(function(t){return n(e),null==i||i(),[2]}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Na(i,r,a,o,l,"next",e)}function l(e){Na(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}())}),[u,n,i]);return(0,r.jsxs)(d.Modal,ka(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ca(e,t,n[t])}))}return e}({onClose:i,size:"tiny",className:"max-w-full"},o),{children:[(0,r.jsx)(d.Modal.Header,{children:l.WALLBOARD_STATES_MODAL.title()}),(0,r.jsxs)(d.Modal.Content,{children:[(0,r.jsx)("h4",{children:l.WALLBOARD_STATES_MODAL.states_header()}),(0,r.jsx)(rn.CheckboxField,{label:l.WALLBOARD_STATES_MODAL.state_busy(),name:"agentStats.busy",control:s}),(0,r.jsx)(rn.CheckboxField,{label:l.WALLBOARD_STATES_MODAL.state_ready(),name:"agentStats.ready",control:s}),(0,r.jsx)(rn.CheckboxField,{label:l.WALLBOARD_STATES_MODAL.state_after_call_work(),name:"agentStats.after_call_work",control:s}),(0,r.jsx)(rn.CheckboxField,{label:l.WALLBOARD_STATES_MODAL.state_not_ready(),name:"agentStats.not_ready",control:s}),(0,r.jsx)("h4",{children:l.WALLBOARD_STATES_MODAL.limits_header()}),(0,r.jsx)(rn.CheckboxField,{label:l.WALLBOARD_STATES_MODAL.limit_my_subteam(),name:"limit.subteam",control:s}),(0,r.jsx)(rn.CheckboxField,{label:l.WALLBOARD_STATES_MODAL.limit_logged_in(),name:"limit.logged_in_only",control:s})]}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{enabledInOffline:!0,onClick:function(){return i()},children:l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(d.SemanticButton,{primary:!0,onClick:_,children:l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})]})]}))};function Ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ba(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ka(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Ga(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Fa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ra(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ra(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var qa=function(e){var t=e.teams,n=e.onSelect,i=e.onClose,o=Ga(e,["teams","onSelect","onClose"]),l=(0,b.useLocalizationState)().t,c=Fa((0,a.useState)(t),2),s=c[0],u=c[1],_=(0,a.useCallback)((function(){n(s),i()}),[i,n,s]),f=wt().data,p=(0,a.useMemo)((function(){return(f||[]).map((function(e){return{value:e.id,text:e.name}}))}),[f]);return(0,r.jsxs)(d.Modal,Ka(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ba(e,t,n[t])}))}return e}({onClose:i,size:"tiny",className:"max-w-full"},o),{children:[(0,r.jsx)(d.Modal.Header,{children:l.WALLBOARD_TEAMS_MODAL.title()}),(0,r.jsx)(d.Modal.Content,{children:(0,r.jsx)(d.DoubleColumnSelect,{className:"max-h-[70vh] min-h-[280px]",value:s,setValue:u,options:p,availableTitle:l.GLOBAL.available(),selectedTitle:l.GLOBAL.included(),noSearch:!0})}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{enabledInOffline:!0,onClick:function(){return i()},children:l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(d.SemanticButton,{primary:!0,onClick:_,children:l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})]})]}))},Va=function(e){var t=e.control,n=e.setValue,i=(0,nn.useController)({name:"teamIds",control:t}).field.value,o=(0,nn.useController)({name:"agentStats",control:t}).field.value,l=(0,nn.useController)({name:"limit",control:t}).field.value,c=(0,g.useModalComponentOpener)(qa),s=(0,g.useModalComponentOpener)(za),u=(0,a.useCallback)((function(){c({teams:i||[],onSelect:function(e){n("teamIds",e)}})}),[c,n,i]),_=(0,a.useCallback)((function(){o&&l&&s({values:{agentStats:(0,le.cloneDeep)(o),limit:(0,le.cloneDeep)(l)},onApply:function(e){n("limit",e.limit),n("agentStats",e.agentStats)}})}),[s,o,l,n]),f=(0,b.useLocalizationState)().t;return(0,r.jsxs)("div",{className:"mb-4 flex gap-4",children:[(0,r.jsx)(d.SemanticButton,{basic:!0,onClick:u,className:"mr-0",enabledInOffline:!0,children:f.WALLBOARD_WIDGETS_GRIDS.teams()}),(0,r.jsx)(d.SemanticButton,{basic:!0,onClick:_,enabledInOffline:!0,children:f.WALLBOARD_WIDGETS_GRIDS.states()})]})};function Ua(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ha(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Qa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Qa(e,t,n[t])}))}return e}function $a(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Ja(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Xa(e){return function(e){if(Array.isArray(e))return Ua(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ua(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ua(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Za(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var ei=function(e){var t,n,i,o,l,c,s=e.onClose,u=e.replacingWidgetId,_=e.onSaved,f=e.formValues,p=Ja(e,["onClose","replacingWidgetId","onSaved","formValues"]),y=(0,b.useLocalizationState)().t,m=(0,a.useMemo)((function(){if(f)return l=null==(e=f)||null===(n=e.subscription)||void 0===n||null===(t=n.req)||void 0===t?void 0:t.columns.map((function(t,n){var r,a,i,o=null==e||null===(i=e.subscription)||void 0===i||null===(a=i.req)||void 0===a||null===(r=a.order)||void 0===r?void 0:r.find((function(e){var t=e.by;return Number(t)===n+1}));return $a(Ya({},t),{dir:(null==o?void 0:o.dir)||"EMPT",order:n+1})})),{title:null==e?void 0:e.title,columnTitleEnabled:null==e?void 0:e.columtitle,teamIds:(0,le.cloneDeep)(null==e||null===(a=e.subscription)||void 0===a||null===(r=a.req)||void 0===r?void 0:r.team_ids),agentStats:(0,le.cloneDeep)(null==e?void 0:e.agent_stats),limit:(0,le.cloneDeep)(null==e?void 0:e.limit),maxItemsToShow:(0,le.cloneDeep)(null==e||null===(o=e.subscription)||void 0===o||null===(i=o.req)||void 0===i?void 0:i.limit),columns:l};var e,t,n,r,a,i,o,l}),[f]),g=(0,nn.useForm)({defaultValues:{title:(null==m?void 0:m.title)||y.WALLBOARD_WIDGET_EMPTY.agent_grid(),teamIds:(null==m?void 0:m.teamIds)||[],agentStats:{busy:!1!==(null==m||null===(t=m.agentStats)||void 0===t?void 0:t.busy),ready:!1!==(null==m||null===(n=m.agentStats)||void 0===n?void 0:n.ready),after_call_work:!1!==(null==m||null===(i=m.agentStats)||void 0===i?void 0:i.after_call_work),not_ready:!1!==(null==m||null===(o=m.agentStats)||void 0===o?void 0:o.not_ready)},limit:{subteam:(null==m||null===(l=m.limit)||void 0===l?void 0:l.subteam)||!1,logged_in_only:(null==m||null===(c=m.limit)||void 0===c?void 0:c.logged_in_only)||!1},columnTitleEnabled:!1!==(null==m?void 0:m.columnTitleEnabled),maxItemsToShow:(null==m?void 0:m.maxItemsToShow)||6,columns:(null==m?void 0:m.columns)||[Ea(0,"agent_grid")]}}),v=g.control,h=g.handleSubmit,O=g.setValue,w=wt().data;(0,a.useEffect)((function(){var e=(w||[]).map((function(e){return e.id}));O("teamIds",e)}),[O,w]);var S=(0,vr.useAtomValue)(Or),j=S.widget,x=S.updateWidget,A=(0,a.useMemo)((function(){return h(function(){var e,t=(e=function(e){return Za(this,(function(t){return ua(j,u),x(Ya({type:"grid"},function(e,t){var n=e.columns.reduce((function(e,t,n){return t.dir&&"EMPT"!==t.dir?Xa(e).concat([{by:String(n+1),dir:t.dir}]):e}),[]);return{title:e.title||"",columtitle:e.columnTitleEnabled,agent_stats:e.agentStats,limit:e.limit,subscription:{type:"agent_grid",req:{id:t,team_ids:e.teamIds,limit:e.maxItemsToShow,columns:e.columns.map((function(e,t){return $a(Ya({},e),{id:String(t+1)})})),order:n}}}}(e,j.id),(0,le.pick)(j,"id","x","y","width","height","show_settings"))),null==_||_(),s(),[2]}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Ha(i,r,a,o,l,"next",e)}function l(e){Ha(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}())}),[h,j,u,x,_,s]);return(0,r.jsxs)(d.Modal,$a(Ya({},p),{className:"max-w-full",onClose:s,children:[(0,r.jsx)(d.Modal.Header,{role:"heading",children:y.WALLBOARD_WIDGETS_GRIDS.agent_grid()}),(0,r.jsxs)(d.Modal.Content,{children:[(0,r.jsxs)("div",{className:"mb-4 flex gap-4",children:[(0,r.jsx)(rn.TextField,{fluid:!0,label:y.GLOBAL.title(),name:"title",placeholder:y.GLOBAL.title(),className:"grow [&>label]:font-bold",control:v}),(0,r.jsx)(rn.TextField,{fluid:!0,label:y.WALLBOARD_WIDGETS_GRIDS.max_to_show(),name:"maxItemsToShow",type:"number",className:"shrink-0 [&>label]:font-bold",placeholder:y.WALLBOARD_WIDGETS_GRIDS.max_to_show(),control:v}),(0,r.jsx)(rn.CheckboxField,{label:y.WALLBOARD_WIDGETS_GRIDS.column_headings(),name:"columnTitleEnabled",toggle:!0,className:"mt-4 shrink-0 self-center",control:v})]}),(0,r.jsx)(Va,{control:v,setValue:O}),(0,r.jsx)(La,{control:v,setValue:O,type:"agent_grid"})]}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{onClick:function(){return s()},enabledInOffline:!0,children:y.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(d.SemanticButton,{onClick:A,primary:!0,children:y.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})]})]}))};function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ni(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function ri(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){ni(i,r,a,o,l,"next",e)}function l(e){ni(i,r,a,o,l,"throw",e)}o(void 0)}))}}function ai(e){return function(e){if(Array.isArray(e))return ti(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ti(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ii(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function li(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function ci(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){li(i,r,a,o,l,"next",e)}function l(e){li(i,r,a,o,l,"throw",e)}o(void 0)}))}}function si(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ui(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function di(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fi(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var pi=function(e){var t=e.replacingWidgetId,n=e.onClose,i=e.onSaved,o=di(e,["replacingWidgetId","onClose","onSaved"]),l=(0,b.useLocalizationState)().t,c=_i((0,a.useState)(""),2),s=c[0],u=c[1],_=_i((0,a.useState)(!0),2),f=_[0],p=_[1],y=_i((0,a.useState)([]),2),m=y[0],g=y[1],v=function(){var e=St().data,t=(0,Z.useQueryClient)();return(0,a.useCallback)(ri((function(){var n;return ii(this,(function(r){switch(r.label){case 0:return(0,F.assertDefined)(e),n=null==e?void 0:e.map((function(e){return t.fetchQuery({queryKey:bt(e.id),queryFn:function(){return tt.getWallboardDetails({wallboardId:e.id})}})})),[4,Promise.allSettled(n)];case 1:return[2,r.sent().reduce((function(e,t){if("fulfilled"!==t.status)return e;var n=t.value,r=n.config.widgets.filter((function(e){return"empty"!==e.config.type})).map((function(e){return{config:e.config,title:"(".concat(n.name,") ").concat(e.config.title),wallboardId:n.id}}));return ai(e).concat(ai(r))}),[])]}}))})),[e,t])}();(0,a.useEffect)((function(){function e(){return(e=ci((function(){var e;return fi(this,(function(t){switch(t.label){case 0:return[4,v()];case 1:return e=t.sent(),g(e),p(!1),[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[v]);var h=(0,a.useMemo)((function(){return m.map((function(e){return{value:(t=e.wallboardId,n=e.config.id,"".concat(t,"/").concat(n)),text:e.title};var t,n}))}),[m]),O=(0,a.useCallback)((function(e,t){var n=t.value;"string"==typeof n?u(n):console.error("Invalid widget value",n)}),[u]),w=(0,a.useCallback)((function(){null==i||i(),n()}),[i,n]),S=sl({onSaved:w,replacingWidgetId:t}),j=(0,a.useCallback)((function(){var e,t,n,r,a=(t=_i(s.split("/"),2),n=t[0],r=t[1],{wallboardId:n,widgetId:r}),i=null===(e=m.find((function(e){var t=e.config,n=e.wallboardId;return a.widgetId===t.id&&a.wallboardId===n})))||void 0===e?void 0:e.config;switch((0,F.assertDefined)(i),i.type){case"news":var o;return S("news",{title:i.title,newsCount:null===(o=i.subscription)||void 0===o?void 0:o.req.limit});case"empty":return;case"grid":return S("service_grid"===i.subscription.type?"service_grid":"agent_grid",i);default:return S(i.type,i)}}),[S,s,m]);return(0,r.jsxs)(d.Modal,ui(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){si(e,t,n[t])}))}return e}({},o),{className:"max-w-full",onClose:n,children:[(0,r.jsx)(d.Modal.Header,{role:"heading",children:l.WALLBOARD_WIDGET_EMPTY.copy_from_other()}),(0,r.jsx)(d.Modal.Content,{children:(0,r.jsx)(d.Dropdown,{selection:!0,search:!0,options:h,value:s,onChange:O,loading:f,disabled:f,className:"w-full",openOnFocus:!1,selectOnBlur:!1})}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{enabledInOffline:!0,onClick:function(){return n()},children:l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(d.SemanticButton,{onClick:j,disabled:!s,primary:!0,children:l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})]})]}))};var yi=function(e){var t=e.control,n=(0,b.useLocalizationState)().t,i=(0,a.useMemo)((function(){return[{key:"cover",value:"cover",text:n.WALLBOARD_WIDGET_IMAGE.style_cover(),onClick:le.noop},{key:"contain",value:"contain",text:n.WALLBOARD_WIDGET_IMAGE.style_contain(),onClick:le.noop}]}),[n]);return(0,r.jsx)(rn.SelectField,{name:"style",fluid:!0,upward:!0,control:t,search:!0,selection:!0,options:i,placeholder:n.WALLBOARD_WIDGET_IMAGE.style()})},mi=function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(){t(n.result)},n.readAsDataURL(e)}))};function bi(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function gi(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var vi=function(e){var t=e.control,n=(0,nn.useController)({name:"imageName",control:t}).field,i=n.value,o=n.onChange,l=(0,nn.useController)({name:"imageUrl",control:t}).field.onChange,c=(0,a.useCallback)(function(){var e,t=(e=function(e){var t,n,r,a;return gi(this,(function(i){switch(i.label){case 0:return(n=null===(t=e.target.files)||void 0===t?void 0:t[0])?[4,mi(n)]:[2];case 1:return r=i.sent(),a=n.name,l(r),o(a),[2]}}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){bi(i,r,a,o,l,"next",e)}function l(e){bi(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[o,l]);return(0,r.jsxs)("div",{className:"mb-2.5 flex gap-2.5",children:[i,(0,r.jsx)("input",{type:"file",onChange:c})]})};function hi(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Oi(e,t,n[t])}))}return e}function Si(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function ji(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function xi(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var Ai=function(e){var t=e.replacingWidgetId,n=e.onClose,i=e.onSaved,o=e.formValues,l=ji(e,["replacingWidgetId","onClose","onSaved","formValues"]),c=(0,b.useLocalizationState)().t,s=(0,vr.useAtomValue)(Or),u=s.widget,_=s.updateWidget,f=(0,nn.useForm)({defaultValues:{style:(null==o?void 0:o.style)||"cover",imageName:(null==o?void 0:o.imageName)||"",imageUrl:(null==o?void 0:o.imageUrl)||""}}),p=f.control,y=f.handleSubmit,m=(0,a.useMemo)((function(){return y(function(){var e,r=(e=function(e){return xi(this,(function(r){return ua(u,t),_(wi({type:"image"},e,(0,le.pick)(u,"id","x","y","width","height","title","show_settings"))),null==i||i(),n(),[2]}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){hi(i,r,a,o,l,"next",e)}function l(e){hi(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}())}),[y,u,t,_,i,n]);return(0,r.jsxs)(d.Modal,Si(wi({},l),{className:"max-w-full",onClose:n,children:[(0,r.jsx)(d.Modal.Header,{role:"heading",children:c.WALLBOARD_WIDGET_IMAGE.name()}),(0,r.jsxs)(d.Modal.Content,{children:[(0,r.jsx)(vi,{control:p}),(0,r.jsx)(yi,{control:p})]}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{enabledInOffline:!0,onClick:function(){return n()},children:c.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(d.SemanticButton,{onClick:m,primary:!0,children:c.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})]})]}))};function Di(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Ei(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Ii(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ti(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var Li=function(e){var t=e.replacingWidgetId,n=e.onClose,i=e.onSaved,o=e.formValues,l=Ii(e,["replacingWidgetId","onClose","onSaved","formValues"]),c=(0,b.useLocalizationState)().t,s=(0,vr.useAtomValue)(Or),u=s.widget,_=s.updateWidget,f=(0,nn.useForm)({defaultValues:{title:(null==o?void 0:o.title)||c.WALLBOARD_WIDGET_EMPTY.news(),newsCount:(null==o?void 0:o.newsCount)||6}}),p=f.control,y=f.handleSubmit,m=(0,a.useMemo)((function(){return y(function(){var e,r=(e=function(e){return Ti(this,(function(r){return ua(u,t),_({type:"news",title:e.title,subscription:{type:"chat_messages",req:{filter:"",limit:Number(e.newsCount)}},id:u.id,x:u.x,y:u.y,width:u.width,height:u.height,show_settings:u.show_settings}),null==i||i(),n(),[2]}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Di(i,r,a,o,l,"next",e)}function l(e){Di(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}())}),[y,u,t,_,i,n]);return(0,r.jsxs)(d.Modal,Pi(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ei(e,t,n[t])}))}return e}({},l),{className:"max-w-full",onClose:n,children:[(0,r.jsx)(d.Modal.Header,{role:"heading",children:c.WALLBOARD_WIDGET_EMPTY.news()}),(0,r.jsxs)(d.Modal.Content,{children:[(0,r.jsx)(rn.TextField,{name:"title",fluid:!0,placeholder:c.WALLBOARD_WIDGET_NEWS.title(),className:"mb-2",control:p}),(0,r.jsx)(rn.TextField,{name:"newsCount",type:"number",placeholder:c.WALLBOARD_WIDGET_NEWS.newsCount(),fluid:!0,control:p})]}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{enabledInOffline:!0,onClick:function(){return n()},children:c.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(d.SemanticButton,{onClick:m,primary:!0,children:c.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})]})]}))};function Ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ki(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Wi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Mi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ni(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var zi=function(e){var t=e.services,n=e.onSelect,i=e.onClose,o=Wi(e,["services","onSelect","onClose"]),l=(0,b.useLocalizationState)().t,c=Mi((0,a.useState)(t),2),s=c[0],u=c[1],_=(0,a.useCallback)((function(){n(s),i()}),[i,n,s]),f=Ot().data,p=(0,a.useMemo)((function(){return(f||[]).map((function(e){return{value:e.id,text:e.name}}))}),[f]);return(0,r.jsxs)(d.Modal,ki(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ci(e,t,n[t])}))}return e}({onClose:i,size:"tiny",className:"max-w-full"},o),{children:[(0,r.jsx)(d.Modal.Header,{children:l.WALLBOARD_SERVICES_MODAL.title()}),(0,r.jsx)(d.Modal.Content,{children:(0,r.jsx)(d.DoubleColumnSelect,{className:"max-h-[70vh] min-h-[280px]",value:s,setValue:u,options:p,availableTitle:l.GLOBAL.available(),selectedTitle:l.GLOBAL.included(),noSearch:!0})}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{enabledInOffline:!0,onClick:function(){return i()},children:l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(d.SemanticButton,{primary:!0,onClick:_,children:l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})]})]}))},Ri=function(e){var t=e.control,n=e.setValue,i=(0,nn.useController)({name:"serviceIds",control:t}).field.value,o=(0,g.useModalComponentOpener)(zi),l=(0,a.useCallback)((function(){o({services:i,onSelect:function(e){n("serviceIds",e)}})}),[o,i,n]),c=(0,b.useLocalizationState)().t;return(0,r.jsx)(d.SemanticButton,{basic:!0,onClick:l,enabledInOffline:!0,className:"mb-4",children:c.WALLBOARD_WIDGETS_GRIDS.services()})};function Bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ki(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Gi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Gi(e,t,n[t])}))}return e}function qi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Vi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ui(e){return function(e){if(Array.isArray(e))return Bi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Bi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bi(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hi(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var Qi=function(e){var t=e.onClose,n=e.replacingWidgetId,i=e.onSaved,o=e.formValues,l=Vi(e,["onClose","replacingWidgetId","onSaved","formValues"]),c=(0,b.useLocalizationState)().t,s=(0,a.useMemo)((function(){if(o)return c=null==(e=o)||null===(n=e.subscription)||void 0===n||null===(t=n.req)||void 0===t?void 0:t.columns.map((function(t,n){var r,a,i,o=null==e||null===(i=e.subscription)||void 0===i||null===(a=i.req)||void 0===a||null===(r=a.order)||void 0===r?void 0:r.find((function(e){var t=e.by;return Number(t)===n+1}));return qi(Fi({},t),{dir:(null==o?void 0:o.dir)||"EMPT",order:n+1})})),{title:null==e?void 0:e.title,columnTitleEnabled:null==e?void 0:e.columtitle,serviceIds:(0,le.cloneDeep)(null==e||null===(a=e.subscription)||void 0===a||null===(r=a.req)||void 0===r?void 0:r.service_ids),maxItemsToShow:(0,le.cloneDeep)(null==e||null===(l=e.subscription)||void 0===l||null===(i=l.req)||void 0===i?void 0:i.limit),columns:c};var e,t,n,r,a,i,l,c}),[o]),u=(0,nn.useForm)({defaultValues:{title:(null==s?void 0:s.title)||c.WALLBOARD_WIDGET_EMPTY.service_grid(),serviceIds:(null==s?void 0:s.serviceIds)||[],columnTitleEnabled:!1!==(null==s?void 0:s.columnTitleEnabled),maxItemsToShow:(null==s?void 0:s.maxItemsToShow)||6,columns:(null==s?void 0:s.columns)||[Ea(0,"service_grid")]}}),_=u.control,f=u.handleSubmit,p=u.setValue,y=Ot().data;(0,a.useEffect)((function(){var e=(y||[]).map((function(e){return e.id}));p("serviceIds",e)}),[_,y,p]);var m=(0,vr.useAtomValue)(Or),g=m.widget,v=m.updateWidget,h=(0,a.useMemo)((function(){return f(function(){var e,r=(e=function(e){return Hi(this,(function(r){return ua(g,n),v(Fi({type:"grid"},function(e,t){var n=e.columns.reduce((function(e,t,n){return t.dir&&"EMPT"!==t.dir?Ui(e).concat([{by:String(n+1),dir:t.dir}]):e}),[]);return{title:e.title||"",columtitle:e.columnTitleEnabled,subscription:{type:"service_grid",req:{id:t,service_ids:e.serviceIds,limit:e.maxItemsToShow,columns:e.columns.map((function(e,t){return qi(Fi({},e),{id:String(t+1)})})),order:n}}}}(e,g.id),(0,le.pick)(g,"id","x","y","width","height","show_settings"))),null==i||i(),t(),[2]}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Ki(i,r,a,o,l,"next",e)}function l(e){Ki(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}())}),[f,g,n,v,i,t]);return(0,r.jsxs)(d.Modal,qi(Fi({},l),{className:"max-w-full",onClose:t,children:[(0,r.jsx)(d.Modal.Header,{role:"heading",children:c.WALLBOARD_WIDGETS_GRIDS.service_grid()}),(0,r.jsxs)(d.Modal.Content,{children:[(0,r.jsxs)("div",{className:"mb-4 flex gap-4",children:[(0,r.jsx)(rn.TextField,{fluid:!0,label:c.GLOBAL.title(),name:"title",placeholder:c.GLOBAL.title(),className:"grow [&>label]:font-bold",control:_}),(0,r.jsx)(rn.TextField,{fluid:!0,label:c.WALLBOARD_WIDGETS_GRIDS.max_to_show(),name:"maxItemsToShow",type:"number",className:"shrink-0 [&>label]:font-bold",placeholder:c.WALLBOARD_WIDGETS_GRIDS.max_to_show(),control:_}),(0,r.jsx)(rn.CheckboxField,{label:c.WALLBOARD_WIDGETS_GRIDS.column_headings(),name:"columnTitleEnabled",toggle:!0,className:"mt-4 shrink-0 self-center",control:_})]}),(0,r.jsx)(Ri,{control:_,setValue:p}),(0,r.jsx)(La,{control:_,setValue:p,type:"service_grid"})]}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{onClick:function(){return t()},enabledInOffline:!0,children:c.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(d.SemanticButton,{onClick:h,primary:!0,children:c.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})]})]}))};function Yi(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function $i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$i(e,t,n[t])}))}return e}function Xi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Zi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function eo(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var to=function(e){var t=e.replacingWidgetId,n=e.onClose,i=e.onSaved,o=e.formValues,l=Zi(e,["replacingWidgetId","onClose","onSaved","formValues"]),c=(0,b.useLocalizationState)().t,s=(0,vr.useAtomValue)(Or),u=s.widget,_=s.updateWidget,f=(0,nn.useForm)({defaultValues:{title:(null==o?void 0:o.title)||c.WALLBOARD_WIDGET_TEXT.text(),text:(null==o?void 0:o.text)||""}}),p=f.control,y=f.handleSubmit,m=(0,a.useMemo)((function(){return y(function(){var e,r=(e=function(e){return eo(this,(function(r){return ua(u,t),_(Ji({type:"text"},e,(0,le.pick)(u,"id","x","y","width","height","show_settings"))),null==i||i(),n(),[2]}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Yi(i,r,a,o,l,"next",e)}function l(e){Yi(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}())}),[y,u,t,_,i,n]);return(0,r.jsxs)(d.Modal,Xi(Ji({},l),{className:"max-w-full",onClose:n,children:[(0,r.jsx)(d.Modal.Header,{role:"heading",children:c.WALLBOARD_WIDGET_EMPTY.text()}),(0,r.jsxs)(d.Modal.Content,{children:[(0,r.jsx)(rn.TextField,{name:"title",fluid:!0,placeholder:c.WALLBOARD_WIDGET_TEXT.title(),className:"mb-2",control:p}),(0,r.jsx)(rn.TextAreaField,{name:"text",placeholder:c.WALLBOARD_WIDGET_TEXT.text(),className:"w-full rounded border border-solid border-gray-300 p-3",control:p})]}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{onClick:function(){return n()},enabledInOffline:!0,children:c.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(d.SemanticButton,{onClick:m,primary:!0,children:c.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})]})]}))},no=function(e){var t=e.text;return(0,r.jsxs)("label",{className:"font-bold",children:[t,":"]})},ro=function(e){var t=e.children;return(0,r.jsx)("div",{className:"mb-2 grid grid-cols-[2fr_5fr] gap-2.5",children:t})},ao=function(e){var t=e.control,n=(0,b.useLocalizationState)().t,i=(0,a.useMemo)((function(){return[{value:"services",text:n.WALLBOARD_WIDGET_TIME_SERIES.services()},{value:"teams",text:n.WALLBOARD_WIDGET_TIME_SERIES.teams()}]}),[n.WALLBOARD_WIDGET_TIME_SERIES]);return(0,r.jsxs)(ro,{children:[(0,r.jsx)(no,{text:n.WALLBOARD_WIDGET_TIME_SERIES.series_type()}),(0,r.jsx)(rn.SelectField,{search:!0,options:i,fluid:!0,name:"seriesType",control:t})]})},io="agents_busy",oo=function(e){var t=e.control,n=e.setValue,i=(0,b.useLocalizationState)().t,o=ga("timeSeriesTeams"),l=(0,a.useMemo)((function(){return o.reduce((function(e,t){return e[t.value]=1,e}),{})}),[o]),c=ga("timeSeriesServices"),s=(0,a.useMemo)((function(){return c.reduce((function(e,t){return e[t.value]=1,e}),{})}),[c]),u=(0,nn.useWatch)({name:"seriesType",control:t}),d=(0,nn.useWatch)({name:"statistics",control:t});return(0,a.useEffect)((function(){"teams"===u&&d&&!l[d]&&n("statistics",io),"services"===u&&d&&!s[d]&&n("statistics","in_calls_waiting")}),[u,d,l,s,n]),(0,r.jsxs)(ro,{children:[(0,r.jsx)(no,{text:i.WALLBOARD_WIDGET_TIME_SERIES.series_type()}),(0,r.jsx)(rn.SelectField,{search:!0,options:"teams"===u?o:c,fluid:!0,name:"statistics",control:t})]})},lo=function(e){var t=e.control,n=(0,b.useLocalizationState)().t,i=(0,a.useMemo)((function(){return[{text:n.WALLBOARD_WIDGET_TIME_SERIES.mins_5(),value:5*m.MS_IN_MINUTE},{text:n.WALLBOARD_WIDGET_TIME_SERIES.mins_15(),value:15*m.MS_IN_MINUTE},{text:n.WALLBOARD_WIDGET_TIME_SERIES.hours_1(),value:m.MS_IN_HOUR},{text:n.WALLBOARD_WIDGET_TIME_SERIES.hours_3(),value:3*m.MS_IN_HOUR},{text:n.WALLBOARD_WIDGET_TIME_SERIES.hours_6(),value:6*m.MS_IN_HOUR},{text:n.WALLBOARD_WIDGET_TIME_SERIES.hours_12(),value:12*m.MS_IN_HOUR},{text:n.WALLBOARD_WIDGET_TIME_SERIES.hours_24(),value:m.MS_IN_DAY},{text:n.WALLBOARD_WIDGET_TIME_SERIES.days_2(),value:2*m.MS_IN_DAY},{text:n.WALLBOARD_WIDGET_TIME_SERIES.days_7(),value:7*m.MS_IN_DAY}]}),[n.WALLBOARD_WIDGET_TIME_SERIES]);return(0,r.jsxs)(ro,{children:[(0,r.jsx)(no,{text:n.WALLBOARD_WIDGET_TIME_SERIES.series_type()}),(0,r.jsx)(rn.SelectField,{search:!0,options:i,fluid:!0,name:"timeRange",control:t})]})};function co(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function so(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){so(e,t,n[t])}))}return e}function _o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function fo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function po(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var yo=7*m.MS_IN_DAY,mo=function(e){var t=e.onClose,n=e.replacingWidgetId,i=e.onSaved,o=e.formValues,l=fo(e,["onClose","replacingWidgetId","onSaved","formValues"]),c=(0,b.useLocalizationState)().t,s=(0,a.useMemo)((function(){if(o)return{seriesType:(e=o).series_type,title:e.title,statistics:e.value,timeRange:Number(e.timeRange)};var e}),[o]),u=(0,nn.useForm)({defaultValues:{title:(null==s?void 0:s.title)||c.WALLBOARD_WIDGET_TIME_SERIES.name(),seriesType:(null==s?void 0:s.seriesType)||"teams",statistics:(null==s?void 0:s.statistics)||io,timeRange:(null==s?void 0:s.timeRange)||yo}}),_=u.control,f=u.handleSubmit,p=u.setValue,y=(0,vr.useAtomValue)(Or),m=y.widget,g=y.updateWidget,v=(0,a.useMemo)((function(){return f(function(){var e,r=(e=function(e){return po(this,(function(r){return ua(m,n),g(uo({type:"time_series"},function(e){return{series_type:e.seriesType,value:e.statistics,title:e.title,timeRange:String(e.timeRange)}}(e),(0,le.pick)(m,"id","x","y","width","height","show_settings"))),null==i||i(),t(),[2]}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){co(i,r,a,o,l,"next",e)}function l(e){co(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}())}),[f,m,n,g,i,t]);return(0,r.jsxs)(d.Modal,_o(uo({},l),{className:"max-w-full",onClose:t,children:[(0,r.jsx)(d.Modal.Header,{role:"heading",children:c.WALLBOARD_WIDGETS_GRIDS.name()}),(0,r.jsxs)(d.Modal.Content,{children:[(0,r.jsxs)(ro,{children:[(0,r.jsx)(no,{text:c.GLOBAL.title()}),(0,r.jsx)(rn.TextField,{fluid:!0,name:"title",placeholder:c.GLOBAL.title(),control:_})]}),(0,r.jsx)(ao,{control:_}),(0,r.jsx)(oo,{control:_,setValue:p}),(0,r.jsx)(lo,{control:_})]}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{onClick:function(){return t()},enabledInOffline:!0,children:c.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(d.SemanticButton,{onClick:v,primary:!0,children:c.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})]})]}))},bo=function(e){var t=e.onClose,n=e.widget,r=(0,g.useModalComponentOpener)(Ll);return(0,a.useCallback)((function(){n&&"empty"===n.type&&!document.querySelector('[data-id="settings-widgets"]')&&(r({replacingWidgetId:n.id}),null==t||t()),null==t||t()}),[t,r,n])};function go(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ho(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Oo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function wo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||jo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function So(e){return function(e){if(Array.isArray(e))return go(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||jo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jo(e,t){if(e){if("string"==typeof e)return go(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?go(e,t):void 0}}var xo=function(e){var t=e.onClose,n=e.onSelected,i=e.currentWidgetConfig,o=Oo(e,["onClose","onSelected","currentWidgetConfig"]),l=(0,b.useLocalizationState)().t,c=(0,f.useSessionState)("userId");(0,F.assertDefined)(c);var s=wo((0,a.useState)(c),2),u=s[0],_=s[1],p=(0,a.useMemo)((function(){return{value:c,text:l.WALLBOARD.logged_in_user()}}),[c,l.WALLBOARD]),y=(0,Z.useQuery)({queryKey:st(),queryFn:Ze.getAgents,staleTime:5*m.MS_IN_MINUTE}),g=y.data,v=y.isLoading,h=(0,a.useMemo)((function(){var e=(null!=g?g:[]).reduce((function(e,t){return t.id===p.value||e.push({value:t.id,text:t.name}),e}),[]);return[p].concat(So(e.sort((function(e,t){return"string"==typeof e.text&&"string"==typeof t.text?e.text.toLocaleLowerCase().localeCompare(t.text.toLocaleLowerCase()):0}))))}),[g,p]),O=(0,a.useCallback)((function(){var e=null==g?void 0:g.find((function(e){return e.id===u}));e&&(null==n||n(e.id,e.name)),t()}),[g,t,n,u]),w=(0,a.useCallback)((function(e,t){var n=t.value;"string"==typeof n&&_(n)}),[]),S=bo({onClose:t,widget:i});return(0,r.jsxs)(d.Modal,ho(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){vo(e,t,n[t])}))}return e}({"aria-labelledby":"selectUserModalHeader",onClose:t,size:"tiny",className:"max-w-full"},o),{children:[(0,r.jsx)(d.Modal.Header,{role:"heading",id:"selectUserModalHeader",children:l.WALLBOARD.agent_select_title()}),(0,r.jsx)(d.Modal.Content,{children:(0,r.jsxs)(ro,{children:[(0,r.jsx)(no,{text:l.WALLBOARD.agent_select_label()}),(0,r.jsx)(d.Dropdown,{onChange:w,value:u,options:h,search:!0,openOnFocus:!1,selectOnBlur:!1,loading:v,disabled:v})]})}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{onClick:O,primary:!0,children:l.GLOBAL.ok()}),(0,r.jsx)(d.SemanticButton,{onClick:S,enabledInOffline:!0,children:l.GLOBAL.cancel()})]})]}))};function Ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Do(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var Eo=function(e){var t=e.onSaved,n=(0,vr.useAtomValue)(Or).updateWidget,r=(0,b.useLocalizationState)().t,i=(0,g.useModalComponentOpener)(xo);return(0,a.useCallback)((function(e){i({onSelected:function(t,a){n(Do(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ao(e,t,n[t])}))}return e}({},e),{type:"agenda",title:r.WALLBOARD_AGENDA_WIDGET.name(a),user_id:t,userName:a}))},currentWidgetConfig:e}),t()}),[t,i,r.WALLBOARD_AGENDA_WIDGET,n])};function Po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Io(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var To=function(e){var t=e.onSaved,n=(0,vr.useAtomValue)(Or).updateWidget,r=(0,g.useModalComponentOpener)(xo),i=(0,b.useLocalizationState)().t;return(0,a.useCallback)((function(e){r({onSelected:function(t,r){n(Io(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Po(e,t,n[t])}))}return e}({},e),{type:"break_time",title:i.WALLBOARD_BREAK_TIME_WIDGET.name(r),subscription:fa(e.id,t),userName:r,user_id:t}))},currentWidgetConfig:e}),t()}),[t,r,i.WALLBOARD_BREAK_TIME_WIDGET,n])};function Lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function No(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var Co=function(e){var t=e.onSaved,n=e.replacingWidgetId,r=(0,vr.useAtomValue)(Or),i=r.updateWidget,o=r.widget;return(0,a.useCallback)((function(){ua(o,n),i(No(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Lo(e,t,n[t])}))}return e}({},o),{type:"datetime"})),t()}),[o,n,i,t])};function ko(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wo(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var Mo=function(e){var t=e.onSaved,n=(0,vr.useAtomValue)(Or).updateWidget,r=(0,g.useModalComponentOpener)(xo),i=(0,b.useLocalizationState)().t;return(0,a.useCallback)((function(e){r({onSelected:function(t,r){n(Wo(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ko(e,t,n[t])}))}return e}({},e),{type:"dispositions",title:i.WALLBOARD_DISPOSITION_WIDGET.name(r),subscription:da(e.id,t),user_id:t,userName:r}))},currentWidgetConfig:e}),t()}),[t,r,i.WALLBOARD_DISPOSITION_WIDGET,n])};function zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ro(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var Bo=function(e){var t=e.onSaved,n=(0,vr.useAtomValue)(Or).updateWidget,r=(0,b.useLocalizationState)().t,i=(0,g.useModalComponentOpener)(xo);return(0,a.useCallback)((function(e){i({onSelected:function(t,a){n(Ro(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){zo(e,t,n[t])}))}return e}({},e),{type:"my_stats",title:r.WALLBOARD_MY_STATS_WIDGET.name(a),user_id:t,userName:a,subscription:pa(e.id,t)}))},currentWidgetConfig:e}),t()}),[i,t,r.WALLBOARD_MY_STATS_WIDGET,n])};function Ko(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Go(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var Fo=function(e){var t=e.onSaved,n=(0,vr.useAtomValue)(Or).updateWidget,r=(0,g.useModalComponentOpener)(xo),i=(0,b.useLocalizationState)().t;return(0,a.useCallback)((function(e){r({onSelected:function(t,r){n(Go(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ko(e,t,n[t])}))}return e}({},e),{type:"satisfaction",title:i.WALLBOARD_SATISFACTION_WIDGET.name(r),subscription:_a(e.id,t),user_id:t,userName:r}))},currentWidgetConfig:e}),t()}),[t,r,i.WALLBOARD_SATISFACTION_WIDGET,n])};function qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vo(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Uo(e,t,n[t])}))}return e}function Qo(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Yo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function $o(e){return function(e){if(Array.isArray(e))return qo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return qo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jo(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var Xo=function(e){var t=e.replacingWidgetId,n=e.onClose,i=e.onSaved,o=e.widgetType,l=Yo(e,["replacingWidgetId","onClose","onSaved","widgetType"]),c=(0,b.useLocalizationState)().t,s=(0,vr.useAtomValue)(Or),u=s.widget,_=s.updateWidget,f=(0,g.useModalComponentOpener)(zi),p=ga("statsSingle"),y=xr(),m=Ot().data,v=(0,a.useMemo)((function(){return(null==m?void 0:m.map((function(e){return e.id})))||[]}),[m]),h=(0,a.useMemo)((function(){var e,n,r=function(e){return e.split("|")[0].trim()};return ua(u,t),"single"!==u.type&&"gauge"!==u.type?Zo(o,c,v):{type:u.type,title:u.title,serviceIds:$o((null===(e=u.subscription)||void 0===e?void 0:e.service_ids)||[]),dispositions:$o((null===(n=u.subscription)||void 0===n?void 0:n.dispositions)||[]),alertThreshold:u.alertThreshold,warningThreshold:u.warningThreshold,warningSound:u.warning_sound,maxThreshold:u.maxThreshold,value:r(u.value),optValue:u.optValue?r(u.optValue):void 0}}),[u,t,o,c,v]),O=(0,nn.useForm)({defaultValues:h}),w=O.control,S=O.handleSubmit,j=O.setValue,x=(0,nn.useController)({name:"type",control:w,defaultValue:"gauge"}).field,A=(0,nn.useController)({name:"serviceIds",control:w}).field,D=bo({onClose:n,widget:u}),E=(0,a.useMemo)((function(){return S(function(){var e,r=(e=function(e){var r,a,o;function l(e,t){return t?"".concat(e," | sp_").concat(t):e}return Jo(this,(function(c){return r=y("statsSingle",e.value).format,a=(0,F.truthy)([e.value,e.optValue]),o={type:e.type,title:e.title,value:l(e.value,r),optValue:e.optValue?l(e.optValue,y("statsSingle",e.optValue).format):void 0,warning_sound:e.warningSound,alertThreshold:e.alertThreshold,warningThreshold:e.warningThreshold,maxThreshold:"percent"==r?100:e.maxThreshold,subscription:{type:"stats_total",req:a,service_ids:e.serviceIds,dispositions:e.dispositions}},ua(u,t),_(Ho({id:u.id,x:u.x,y:u.y,width:u.width,height:u.height,show_settings:u.show_settings},o)),null==i||i(),n(),[2]}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Vo(i,r,a,o,l,"next",e)}function l(e){Vo(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}())}),[S,y,u,t,_,i,n]),P=(0,a.useCallback)((function(){f({services:A.value,onSelect:function(e){j("serviceIds",e)}})}),[f,A.value,j]);return(0,r.jsxs)(d.Modal,Qo(Ho({},l),{className:"max-w-full",onClose:n,children:[(0,r.jsx)(d.Modal.Header,{role:"heading",children:"gauge"===x.value?c.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.name_gauge():c.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.name_single()}),(0,r.jsx)(d.Modal.Content,{children:(0,r.jsxs)(ro,{children:[(0,r.jsx)(no,{text:c.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.title()}),(0,r.jsx)(rn.TextField,{defaultValue:c.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.name_gauge(),name:"title",control:w,fluid:!0}),(0,r.jsx)(no,{text:c.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.mode()}),(0,r.jsxs)("div",{children:[(0,r.jsx)(rn.RadioFieldRaw,{label:c.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.name_gauge(),field:x,radioValue:"gauge"}),(0,r.jsx)(rn.RadioFieldRaw,{label:c.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.name_single(),field:x,radioValue:"single"})]}),(0,r.jsx)(no,{text:c.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.primary_statistic()}),(0,r.jsxs)("div",{className:"grid grid-cols-[1fr_auto] items-center gap-4",children:[(0,r.jsx)(rn.SelectField,{name:"value",control:w,options:p,search:!0,fluid:!0}),(0,r.jsx)(d.LinkLikeButton,{onClick:P,children:c.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.services()})]}),(0,r.jsxs)("div",{className:"col-start-2 grid grid-cols-[auto_1fr_auto] items-center gap-4",children:["gauge"===x.value&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{children:c.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.warning_threshold()}),(0,r.jsx)(rn.TextField,{name:"warningThreshold",control:w,fluid:!0,type:"number"})]}),(0,r.jsx)("label",{className:"col-start-1",children:c.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.alert_threshold()}),(0,r.jsx)(rn.TextField,{name:"alertThreshold",control:w,fluid:!0,type:"number"}),(0,r.jsx)(rn.CheckboxField,{name:"warningSound",control:w,label:c.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.enable_warning_sound()}),"gauge"===x.value&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{children:c.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.max_threshold()}),(0,r.jsx)(rn.TextField,{name:"maxThreshold",control:w,fluid:!0,type:"number"})]})]}),"single"===x.value&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(no,{text:c.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.secondary_statistic()}),(0,r.jsx)(rn.SelectField,{name:"optValue",control:w,options:p,search:!0,fluid:!0})]})]})}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{enabledInOffline:!0,onClick:D,children:c.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(d.SemanticButton,{onClick:E,primary:!0,children:c.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})]})]}))},Zo=function(e,t,n){return{type:e,title:"gauge"===e?t.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.name_gauge():t.WALLBOARD_SINGLE_OR_GAUGE_WIDGET.name_single(),serviceIds:n,value:"in_calls_active_on_agents",optValue:void 0,alertThreshold:180,warningThreshold:100,maxThreshold:200,warningSound:!1,dispositions:[]}},el=function(e){var t=e.onSaved,n=(0,g.useModalComponentOpener)(Xo);return(0,a.useCallback)((function(e,r){n({widgetType:e,replacingWidgetId:r.id,onSaved:t}),t()}),[t,n])};function tl(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function nl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){nl(e,t,n[t])}))}return e}function al(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function il(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ol(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var ll=function(e){var t=e.onClose,n=e.replacingWidgetId,i=il(e,["onClose","replacingWidgetId"]),o=(0,b.useLocalizationState)().t,l=(0,vr.useAtomValue)(Or),c=l.widget,s=l.updateWidget,u=(0,a.useMemo)((function(){return{title:o.WALLBOARD_WIDGET_SUMMARY.default_name(),teams:[]}}),[o.WALLBOARD_WIDGET_SUMMARY]),_=(0,a.useMemo)((function(){return ua(c,n),"summary"!==c.type?u:{title:c.title||u.title,teams:c.subscription.req.team_ids||u.teams}}),[c,n,u]),f=(0,nn.useForm)({defaultValues:_}),p=f.control,y=f.handleSubmit,m=f.setValue,v=(0,nn.useController)({name:"teams",control:p}).field,h=(0,g.useModalComponentOpener)(qa),O=(0,a.useCallback)((function(){h({teams:v.value,onSelect:function(e){m("teams",e)}})}),[h,m,v.value]),w=(0,a.useMemo)((function(){return y(function(){var e,r=(e=function(e){return ol(this,(function(r){var a,i,o;return ua(c,n),s(al(rl({},c),{title:e.title,type:"summary",subscription:(a={id:c.id,teams:e.teams},i=a.id,o=a.teams,{type:"summary",req:al(rl({},{filter_by:"1",filter_operation:"NE",filter_value:"",limit:1e3,order_by:"1",order_dir:"ASC",team_ids:[]}),{columns:[{id:"1",statName:"acd_state"}],id:i,team_ids:o})})})),t(),[2]}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){tl(i,r,a,o,l,"next",e)}function l(e){tl(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}())}),[y,c,n,s,t]),S=bo({onClose:t,widget:c});return(0,r.jsxs)(d.Modal,al(rl({},i),{"aria-labelledby":"summarySettings",className:"max-w-full",onClose:t,children:[(0,r.jsx)(d.Modal.Header,{role:"heading",id:"summarySettings",children:o.WALLBOARD.select_teams()}),(0,r.jsxs)(d.Modal.Content,{children:[(0,r.jsxs)(ro,{children:[(0,r.jsx)(no,{text:o.WALLBOARD_WIDGET_SUMMARY.title_label()}),(0,r.jsx)(rn.TextField,{fluid:!0,name:"title",control:p})]}),(0,r.jsxs)(ro,{children:[(0,r.jsx)(no,{text:o.WALLBOARD_WIDGET_SUMMARY.teams_label()}),(0,r.jsx)(d.LinkLikeButton,{onClick:O,children:o.WALLBOARD_WIDGET_SUMMARY.selected_teams()})]})]}),(0,r.jsxs)(d.Modal.Actions,{children:[(0,r.jsx)(d.SemanticButton,{onClick:S,enabledInOffline:!0,children:o.GLOBAL.cancel()}),(0,r.jsx)(d.SemanticButton,{onClick:w,primary:!0,children:o.GLOBAL.ok()})]})]}))},cl=function(e){var t=e.onSaved,n=(0,g.useModalComponentOpener)(ll);return(0,a.useCallback)((function(e){n({replacingWidgetId:e.id}),t()}),[t,n])},sl=function(e){var t=e.onSaved,n=e.replacingWidgetId,r=(0,g.useModalComponentOpener)(ei),i=(0,g.useModalComponentOpener)(Qi),o=(0,g.useModalComponentOpener)(Ai),l=(0,g.useModalComponentOpener)(Li),c=(0,g.useModalComponentOpener)(to),s=(0,g.useModalComponentOpener)(mo),u=(0,g.useModalComponentOpener)(pi),d=(0,vr.useAtomValue)(Or).widget,_=Co({onSaved:t,replacingWidgetId:n}),f=To({onSaved:t}),p=el({onSaved:t}),y=Mo({onSaved:t}),m=Eo({onSaved:t}),b=Bo({onSaved:t}),v=cl({onSaved:t}),h=Fo({onSaved:t});return(0,a.useCallback)((function(e,a){switch(ua(d,n),e){case"image":a&&function(e){if(!("style"in e&&"imageName"in e&&"imageUrl"in e))throw new Error("Form values is not valid for image widget settings modal")}(a),o({replacingWidgetId:n,onSaved:t,formValues:a});break;case"single":case"gauge":p(e,d);break;case"agent_grid":a&&function(e){if(!("subscription"in e&&"title"in e&&"columtitle"in e&&"agent_stats"in e&&"limit"in e&&"object"==typeof e.subscription&&null!==e.subscription&&"type"in e.subscription&&"service_grid"!==e.subscription.type))throw new Error("Form values is not valid for config agent grid")}(a),r({replacingWidgetId:n,formValues:a,onSaved:t});break;case"service_grid":a&&function(e){if(!("title"in e&&"columtitle"in e&&"limit"in e&&"service_ids"in e&&"columns"in e&&"subscription"in e&&"object"==typeof e.subscription&&null!==e.subscription&&"type"in e.subscription&&"service_grid"===e.subscription.type))throw new Error("Form values is not valid for config service grid")}(a),i({replacingWidgetId:n,formValues:a,onSaved:t});break;case"news":a&&function(e){if(!("title"in e)||!("newsCount"in e))throw new Error("Form values are not valid for news widget settings modal")}(a),l({replacingWidgetId:n,formValues:a,onSaved:t});break;case"summary":v(d);break;case"text":a&&function(e){if(!("title"in e)||!("text"in e))throw new Error("Form values are not valid for text widget settings modal")}(a),c({replacingWidgetId:n,formValues:a,onSaved:t});break;case"datetime":_();break;case"time_series":a&&function(e){if(!("title"in e&&"series_type"in e&&"value"in e&&"timeRange"in e))throw new Error("Form values are not valid for time series modal")}(a),s({replacingWidgetId:n,formValues:a,onSaved:t});break;case"copy_from_other":u({replacingWidgetId:n,onSaved:t});break;case"break_time":f(d);break;case"dispositions":y(d);break;case"my_stats":b(d);break;case"satisfaction":h(d);break;case"agenda":m(d);break;default:!function(e){throw new Error("Unhandled option type: ".concat(e))}(e)}}),[d,u,r,o,c,l,i,s,n,t,p,v,_,f,y,b,h,m])},ul=function(e){var t=e.option,n=e.replacingWidgetId,i=e.onSaved,o=(0,b.useLocalizationState)().t,l=sl({onSaved:i,replacingWidgetId:n}),c=(0,a.useCallback)((function(e){e.preventDefault(),l(t.type)}),[t.type,l]),s=o.WALLBOARD_WIDGET_EMPTY[t.type]();return(0,r.jsxs)(d.Button,{className:"flex max-h-[115px] max-w-[90px] flex-col items-center justify-start p-[5px] opacity-70 transition-all hover:opacity-100",onClick:c,children:[(0,r.jsx)(d.Svg,{className:"flex h-[50px] w-[50px]",src:t.image}),(0,r.jsx)("div",{className:"mt-2 text-center font-bold ",children:s})]})};const dl=n.p+"d143e4d115dec9d305ff5c03f673e0aa.svg";const _l=n.p+"807f988b274d7e9ec75aa1c2559054be.svg";const fl=n.p+"330437545e1f74f03542893c2c3a3f53.svg";const pl=n.p+"b131fd989ce73036391d53cfbecba834.svg";const yl=n.p+"ebd6f68fedc0e38d32014589e671d92b.svg";const ml=n.p+"daa582168a763d3c8ea25611489c7270.svg";const bl=n.p+"fbd343c52c97f990a5c36d07d794dac5.svg";const gl=n.p+"e301e4ef0abb4058546b0b27846a4caa.svg";const vl=n.p+"ad3c82c4293395b67ee18d5668343144.svg";const hl=n.p+"c794e7ef67096fe205f6338b1d997567.svg";const Ol=n.p+"011cd50d8db3d51756723b9c23ee89c6.svg";const wl=n.p+"66f33b8484b759cfa2d7cb66af00f382.svg";const Sl=n.p+"449510a27ee815032bb7b811ca55d26d.svg";const jl=n.p+"9f04fee03cbece691d82a31525a1cc9b.svg";const xl=n.p+"afa3a0050038081a2dfe06001392447f.svg";var Al=function(e){var t=e.title,n=e.widgets,a=e.replacingWidgetId,i=e.onSaved;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h4",{children:t}),(0,r.jsx)("div",{className:"mb-5 grid grid-cols-4 gap-5",children:n.map((function(e){return(0,r.jsx)(ul,{option:e,replacingWidgetId:a,onSaved:i},e.type)}))})]})},Dl=[{title:"standardWidgets",widgets:[{type:"single",image:Ol},{type:"agent_grid",image:bl},{type:"service_grid",image:bl},{type:"news",image:vl},{type:"summary",image:wl},{type:"gauge",image:ml},{type:"text",image:jl},{type:"datetime",image:pl},{type:"image",image:gl}]},{title:"userWidgets",widgets:[{type:"break_time",image:_l},{type:"dispositions",image:yl},{type:"my_stats",image:Sl},{type:"satisfaction",image:hl},{type:"agenda",image:dl}]},{title:"timeSeriesWidgets",widgets:[{type:"time_series",image:xl}]},{title:"copyFromExisting",widgets:[{type:"copy_from_other",image:fl}]}],El=function(e){var t=e.replacingWidgetId,n=e.onSaved,a=(0,b.useLocalizationState)().t;return(0,r.jsx)("div",{children:Dl.map((function(e){return(0,r.jsx)(Al,{title:a.WALLBOARD_WIDGET_EMPTY[e.title](),widgets:e.widgets,replacingWidgetId:t,onSaved:n},e.title)}))})};function Pl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Il(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Tl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ll=function(e){var t=e.replacingWidgetId,n=e.onClose,a=Tl(e,["replacingWidgetId","onClose"]),i=(0,b.useLocalizationState)().t;return(0,r.jsxs)(d.Modal,Il(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Pl(e,t,n[t])}))}return e}({flex:!0,"data-id":"settings-widgets"},a),{size:"small",onClose:n,className:"max-h-[500px] flex-col",children:[(0,r.jsx)(d.Modal.Header,{role:"heading",children:i.WALLBOARD_WIDGET_EMPTY.name()}),(0,r.jsx)(d.Modal.Content,{className:"overflow-auto",children:(0,r.jsx)(El,{replacingWidgetId:t,onSaved:n})}),(0,r.jsx)(d.Modal.Actions,{children:(0,r.jsx)(d.SemanticButton,{enabledInOffline:!0,onClick:function(){return n()},children:i.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()})})]}))};function Nl(){var e=(0,g.useModalsStateMethods)().openModal,t=(0,b.useLocalizationState)().t,n=(0,ce.useContextSelector)(Mn,(function(e){return e.removeWidget}));return(0,a.useCallback)((function(r){(0,F.assertDefined)(r),e({title:t.WALLBOARD.confirm_delete_title(r.title),body:t.WALLBOARD_WIDGET_EMPTY.confirm_delete_widget(r.title),actions:{ok:{action:function(){n(r.id)},title:t.WALLBOARD.delete()},cancel:{title:t.WALLBOARD.cancel()}}})}),[e,t.WALLBOARD,n,t.WALLBOARD_WIDGET_EMPTY])}const Cl="wallboard_Content_content_ivGCZ";function kl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){l=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ml=function(){var e=(0,a.useRef)(null),t=Ft(),n=er();(0,a.useEffect)((function(){var t;null===(t=e.current)||void 0===t||t.style.setProperty("--widget-font-size",n+"vmin")}),[n]);var i=Xn(),o=(0,ce.useContextSelector)(Mn,(function(e){return e.updateWidget})),l=(0,ce.useContextSelector)(Mn,(function(e){return e.addWidget})),c=Nl(),s=Wl((0,a.useState)({width:0,height:0}),2),d=s[0],_=s[1],f=function(e){var t=Pt(e),n=(0,Z.useQueryClient)(),r=(0,Z.useQuery)({queryKey:dt(t),queryFn:Nt((function(){return Ct(this,(function(e){switch(e.label){case 0:return n.cancelQueries({queryKey:dt()}),n.invalidateQueries({queryKey:_t()}),[4,Ze.deleteSupervisorWidgetsSubscription()];case 1:return e.sent(),[4,Ze.createSupervisorWidgetsSubscription({requestBody:t})];case 2:return e.sent(),[2,!0]}}))})),gcTime:5*m.MS_IN_SECOND,staleTime:5*m.MS_IN_SECOND,enabled:!!Object.keys(t).length}),a=r.data,i=r.isRefetching;return(0,Z.useQuery)({queryKey:_t(),queryFn:Ze.getSupervisorWidgetsSubscriptionData,refetchInterval:5*m.MS_IN_SECOND,retry:function(e){return!(e>2&&(n.invalidateQueries({queryKey:dt(t)}),1))},enabled:!!a&&!i})}(i),p=f.data,y=function(e){var t=e.addWidget,n=e.minCardSize;return(0,a.useCallback)((function(e){var r=e.start,a=e.end;if(r&&a){var i={id:(0,Ar.uuid)(),type:"empty",title:"New Card",x:r.x,y:r.y,width:Math.max(a.x-r.x+1,n.width),height:Math.max(a.y-r.y+1,n.height),show_settings:!0};t(i)}}),[t,n.height,n.width])}({addWidget:l,minCardSize:ne}),b=function(e){var t=e.updateWidget,n=(0,vr.useSetAtom)(Or),r=(0,g.useModalComponentOpener)(Ll),i=(0,g.useModalComponentOpener)(Qi),o=(0,g.useModalComponentOpener)(ei),l=(0,g.useModalComponentOpener)(Ai),c=(0,g.useModalComponentOpener)(Li),s=(0,g.useModalComponentOpener)(to),u=(0,g.useModalComponentOpener)(mo),d=Eo({onSaved:le.noop}),_=Mo({onSaved:le.noop}),f=el({onSaved:le.noop}),p=To({onSaved:le.noop}),y=Bo({onSaved:le.noop}),m=Fo({onSaved:le.noop}),b=cl({onSaved:le.noop});return(0,a.useCallback)((function(e){switch(n({updateWidget:t,widget:e}),e.type){case"agenda":d(e);break;case"break_time":p(e);break;case"dispositions":_(e);break;case"gauge":case"single":f(e.type,e);break;case"grid":switch(e.subscription.type){case"agent_grid":o({replacingWidgetId:e.id,formValues:e});break;case"service_grid":i({replacingWidgetId:e.id,formValues:e})}break;case"image":l({replacingWidgetId:e.id,formValues:e});break;case"my_stats":y(e);break;case"news":var a;c({replacingWidgetId:e.id,formValues:{title:e.title||"",newsCount:null===(a=e.subscription)||void 0===a?void 0:a.req.limit}});break;case"satisfaction":m(e);break;case"summary":b(e);break;case"text":s({replacingWidgetId:e.id,formValues:e});break;case"time_series":u({replacingWidgetId:e.id,formValues:e});break;default:r({replacingWidgetId:e.id})}}),[n,t,d,p,_,f,l,y,c,m,b,s,u,r,o,i])}({updateWidget:o});return(0,r.jsxs)("main",{ref:e,className:u(Cl,"relative m-3 flex min-w-0 flex-auto flex-col"),"data-testid":"wallboard-content",children:[(0,r.jsx)(te.X,{editMode:t.value,subscriptionData:p,createEmptyWidget:y,widgets:i,cellSize:d,setCellSize:_,minCardSize:ne,gridSize:re,WidgetResolverEdit:ea,WidgetResolverView:ta,openSettings:b,removeWidget:c,updateWidget:o}),(0,r.jsx)(oa,{})]})};function zl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rl(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Bl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Kl=function(e){var t=e.className,n=Bl(e,["className"]);return(0,r.jsx)(d.SemanticButton,Rl(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){zl(e,t,n[t])}))}return e}({},n),{basic:!0,className:u("m-0 h-8 w-8 p-0","flex items-center justify-center !bg-white","[&>i]:flex [&>i]:items-center [&>i]:justify-center [&>i]:text-xl [&>i]:outline-none",t)}))},Gl=["dispositions","satisfaction","my_stats","break_time","agenda"];function Fl(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function ql(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vl(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Ul(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var Hl=function(){var e,t=Rn().mutateAsync,n=(e=(0,b.useLocalizationState)().t,(0,a.useMemo)((function(){return{dispositions:{title:function(t){return e.WALLBOARD_DISPOSITION_WIDGET.name(t)},subscription:function(e,t){return da(e,t)}},satisfaction:{title:function(t){return e.WALLBOARD_SATISFACTION_WIDGET.name(t)},subscription:function(e,t){return _a(e,t)}},break_time:{title:function(t){return e.WALLBOARD_BREAK_TIME_WIDGET.name(t)},subscription:function(e,t){return fa(e,t)}},my_stats:{title:function(t){return e.WALLBOARD_MY_STATS_WIDGET.name(t)},subscription:function(e,t){return pa(e,t)}},agenda:{title:function(t){return e.WALLBOARD_AGENDA_WIDGET.name(t)},subscription:function(e,t){}}}}),[e.WALLBOARD_MY_STATS_WIDGET,e.WALLBOARD_SATISFACTION_WIDGET,e.WALLBOARD_BREAK_TIME_WIDGET,e.WALLBOARD_DISPOSITION_WIDGET,e.WALLBOARD_AGENDA_WIDGET])),r=ht().data,i=Xn(),o=(0,g.useModalComponentOpener)(xo);return(0,a.useCallback)((function(){o({onSelected:function(){var e,a=(e=function(e,a){var o;return Ul(this,(function(l){switch(l.label){case 0:return(0,F.assertDefined)(r),o=i.map((function(t){var r=Gl.find((function(e){return e===t.type}));return r?Vl(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ql(e,t,n[t])}))}return e}({},t),{type:r,title:n[r].title(a),subscription:n[r].subscription(t.id,e),user_id:e,userName:a}):t})),o.length&&r?[4,t({wallboardId:r.id,updatedWallboardWidgets:o})]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}}))},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Fl(i,r,a,o,l,"next",e)}function l(e){Fl(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e,t){return a.apply(this,arguments)}}()})}),[i,o,r,t,n])};function Ql(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Yl(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Ql(i,r,a,o,l,"next",e)}function l(e){Ql(i,r,a,o,l,"throw",e)}o(void 0)}))}}function $l(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(l){i=[6,l],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function Jl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xl(e){return function(e){if(Array.isArray(e))return Jl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Jl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jl(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Zl=function(){var e=(0,b.useLocalizationState)().t,t=(0,J.useParams)().wallboardId,n=St().data,i=bn(),o=(0,a.useMemo)((function(){var t=[],r=[];return null==n||n.forEach((function(e){var n=e.id,a=e.name;e.is_global?r.push({value:n,text:a}):t.push({value:n,text:a})})),(0,F.truthy)([t.length?{disabled:!0,text:e.WALLBOARD.wallboard_select_personal()}:void 0].concat(Xl(t),[r.length?{disabled:!0,text:e.WALLBOARD.wallboard_select_global()}:void 0],Xl(r)))}),[n,e.WALLBOARD]),l=(0,a.useCallback)((function(e,t){var n=t.value;if("string"!=typeof n)throw new Error("WallboardSelect: value must be a string");i(n)}),[i]);return(0,r.jsx)(d.Dropdown,{options:o,className:"text-2xl text-white",value:t,onChange:l})},ec=function(){var e,t,n,i,o=Kt(),l=Ft(),c=Gt(),s=(t=ht().data,n=St().data,i=bn(),(0,a.useMemo)((function(){if(n&&t){var e=n.findIndex((function(e){return e.id===(null==t?void 0:t.id)}));return{next:function(){var t=e+1;t>n.length-1&&(t=0),i(n[t].id)},previous:function(){var t=e-1;t<0&&(t=n.length-1),i(n[t].id)}}}}),[i,t,n])),u=(0,m.useBoolean)(),_=function(e){var t=(0,g.useModalsStateMethods)().openModal,n=(0,g.useModalComponentOpener)(it),r=(0,g.useModalComponentOpener)(Jt),i=(0,g.useModalComponentOpener)(fn),o=(0,g.useModalComponentOpener)(tn),l=Dn().mutate,c=ht().data,s=qt(),u=Ft(),d=nr(),_=Zn(),f=(0,b.useLocalizationState)().t,p=jn().mutate,y=gn(),v=Hl(),h=Gt(),O=An().mutate,w=(0,a.useCallback)((function(){(0,F.assertDefined)(c),p({wallboardId:c.id,isGlobal:c.is_global}),e.setFalse()}),[p,c,e]),S=(0,a.useCallback)((function(){e.setFalse(),n()}),[n,e]),j=(0,a.useCallback)((function(){e.setFalse(),r()}),[r,e]),x=(0,a.useCallback)((function(){e.setFalse(),i()}),[i,e]),A=(0,a.useCallback)((function(){e.setFalse(),(0,F.assertDefined)(c),(0,m.downloadJsonFile)(c,"config.json")}),[c,e]),D=(0,a.useCallback)(Yl((function(){var t,n;return $l(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),[4,(0,m.readFromJsonFile)()];case 1:return t=r.sent(),(0,F.assertDefined)(t),y(),d(Dt(t)),_(t.name),u.setTrue(),[3,4];case 2:return n=r.sent(),console.error(n),[3,4];case 3:return e.setFalse(),[7];case 4:return[2]}}))})),[y,d,_,u,e]),E=(0,a.useCallback)((function(){(0,F.assertDefined)(c),l({wallboardId:null==c?void 0:c.id,isGlobal:!0}),e.setFalse()}),[c,e,l]),P=(0,a.useCallback)((function(){o(),e.setFalse()}),[o,e]),I=(0,a.useCallback)((function(){(0,F.assertDefined)(c),t({title:f.WALLBOARD.confirm_delete_title(c.name),actions:{ok:{action:function(){O({wallboardId:c.id})},title:f.WALLBOARD.delete()},cancel:{title:f.WALLBOARD.cancel()}}}),e.setFalse()}),[t,O,c,e,f.WALLBOARD]),T=(0,a.useCallback)((function(){v(),e.setFalse()}),[v,e]);return(0,a.useMemo)((function(){var e,t;return(0,F.truthy)([{children:f.WALLBOARD.menu_new(),onClick:j},{children:f.WALLBOARD.menu_edit(),onClick:u.setTrue},{children:f.WALLBOARD.menu_duplicate(),onClick:w},{children:f.WALLBOARD.delete(),onClick:I,disabled:!c||(null==c?void 0:c.is_global)},{children:f.WALLBOARD.menu_export(),onClick:A,disabled:!c},{children:f.WALLBOARD.menu_import(),onClick:D},{children:f.WALLBOARD.menu_push_to_global(),onClick:E,disabled:!c||(null==c?void 0:c.is_global)},{children:f.WALLBOARD.menu_pull_from_global(),onClick:P,disabled:!c||!c.is_global},{children:f.WALLBOARD.menu_rotation(),onClick:x},(null==h||null===(e=h.deniedActions)||void 0===e?void 0:e.changeTheme)?void 0:s.value?{children:f.WALLBOARD.menu_hide_title_bar(),onClick:s.setFalse}:{children:f.WALLBOARD.menu_show_title_bar(),onClick:s.setTrue},{children:f.WALLBOARD.menu_user_widgets(),onClick:T},(null==h||null===(t=h.deniedActions)||void 0===t?void 0:t.changeTheme)?void 0:{children:f.WALLBOARD.menu_logout(),onClick:S}])}),[h,w,j,u,I,A,S,x,P,E,s.setFalse,s.setTrue,s.value,f.WALLBOARD,c,T,D])}(u);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{className:"flex items-center",children:[(0,r.jsx)(Zl,{}),(0,r.jsxs)(y.SmButtonGroup,{className:"ml-6 flex items-center",children:[(0,r.jsx)(Kl,{icon:"chevron left",onClick:null==s?void 0:s.previous,className:"border border-solid border-main-border !bg-white"}),(0,r.jsx)(Kl,{icon:"chevron right",onClick:null==s?void 0:s.next,className:"border border-solid border-main-border !bg-white"})]})]}),(0,r.jsxs)("section",{className:"flex gap-3",children:[!(null==c||null===(e=c.deniedActions)||void 0===e?void 0:e.changeTheme)&&(0,r.jsx)(Kl,{icon:o.value?"sun outline":"moon outline",onClick:o.toggle}),(0,r.jsx)(Kl,{icon:"edit outline",onClick:l.setTrue}),(0,r.jsx)(d.PopupButton,{options:_,show:u.value,toggleShow:u.toggle,optionClassName:"hover:text-gray-800",className:"flex h-8 w-8 items-center justify-center !bg-white",children:(0,r.jsx)(y.SmIcon,{name:"bars",className:"flex items-center justify-center text-xl"})})]})]})},tc=function(){var e=er(),t=Jn(),n=tr();return(0,r.jsxs)(y.SmButtonGroup,{className:"ml-6 flex items-center",children:[(0,r.jsx)(d.SemanticButton,{disabled:e<=1||t,onClick:function(){return n((function(e){return e<=1?1:e-1}))},className:u("m-0 h-8 w-8 p-0","flex items-center justify-center bg-white","border border-solid border-main-border"),children:"A\u2013"}),(0,r.jsx)(d.SemanticButton,{disabled:e>=7||t,onClick:function(){return n((function(e){return e>=7?7:e+1}))},className:u("m-0 h-8 w-8 p-0","flex items-center justify-center bg-white","border border-solid border-main-border"),children:"A+"})]})},nc=function(){var e,t=(0,ce.useContextSelector)(Mn,(function(e){return e.name})),n=Ft(),i=Gt(),o=Kt(),l=Jn(),c=Zn(),s=(0,a.useCallback)((function(e,t){var n=t.value;c(n)}),[c]),u=(0,a.useCallback)((function(){n.setFalse()}),[n]),d=(0,ce.useContextSelector)(Mn,(function(e){return e.save})),_=(0,a.useCallback)((function(){d()}),[d]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.SmInput,{value:t,onChange:s,className:"w-full flex-1",disabled:l}),(0,r.jsxs)("section",{className:"ml-8 flex flex-1 items-center justify-end gap-6",children:[(0,r.jsx)(tc,{}),!(null==i||null===(e=i.deniedActions)||void 0===e?void 0:e.changeTheme)&&(0,r.jsx)(Kl,{icon:o.value?"sun outline":"moon outline",onClick:o.toggle}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(Kl,{icon:"check",color:"green",loading:l,onClick:_,className:"!ml-2 h-8 w-8 !bg-white p-0"}),(0,r.jsx)(Kl,{icon:"close",color:"red",onClick:u,disabled:l,className:"h-8 w-8 !bg-white p-0"})]})]})]})},rc=function(e){var t=e.className,n=Ft(),a=qt();return(0,r.jsx)("header",{className:u("group",{"absolute inset-x-0 z-10 h-8":!a.value}),"data-testid":"wallboard-header",children:(0,r.jsx)("div",{className:u("flex h-[50px] items-center justify-between px-3 py-1.5",t,"bg-[--wallboard-header-bg]",{"opacity-0 group-hover:opacity-100":!a.value,"translate-y-[-100%] group-hover:translate-y-0":!a.value,"transition-all duration-500":!a.value}),children:n.value?(0,r.jsx)(nc,{}):(0,r.jsx)(ec,{})})})};const ac="wallboard_page_page_fJ6C5";var ic=function(e){var t,n,i,o,l,c,s,d,_,f,p,y=e.children,b=Kt();return t=bn(),n=Ft().value,i=Vt().value,o=i.wallboards,l=i.enabled,c=i.period,s=St().data,d=ht().data,_=(0,a.useMemo)((function(){return(s||[]).filter((function(e){var t=e.id;return o.includes(t)})).map((function(e){return e.id}))}),[s,o]),f=(0,a.useMemo)((function(){var e=_.indexOf((null==d?void 0:d.id)||"");return e<=0?_[_.length-1]:e>=_.length-1?_[0]:_[e+1]}),[null==d?void 0:d.id,_]),p=!!f&&!!d&&l&&!n,(0,a.useEffect)((function(){if(p){var e=setTimeout((function(){t(f)}),(0,m.secondsToMilliseconds)(c));return function(){return clearTimeout(e)}}}),[p,t,f,c]),function(){var e=ht().data;(0,a.useEffect)((function(){(null==e?void 0:e.name)&&(document.title=null==e?void 0:e.name)}),[null==e?void 0:e.name])}(),(0,r.jsx)("div",{className:u(ac,{dark:b.value}),children:y})},oc=i().memo((function(e){var t=e.children,n=(0,ce.useContextSelector)(_n,(function(e){return e.loading})),a=(0,J.useParams)().wallboardId;return n||!a?(0,r.jsx)(d.Loader,{active:!0,color:"primary",size:"big"}):(0,r.jsx)($n,{children:(0,r.jsx)(ic,{children:t})})})),lc=8*m.MS_IN_HOUR,cc=new Z.QueryClient({defaultOptions:{queries:{gcTime:lc}}}),sc=function(){return(0,r.jsx)(Z.QueryClientProvider,{client:cc,children:(0,r.jsx)(Bt,{children:(0,r.jsx)(mn,{children:(0,r.jsxs)(oc,{children:[(0,r.jsxs)("div",{className:"relative flex h-full w-full min-w-0 flex-auto flex-col",children:[(0,r.jsx)(rc,{}),(0,r.jsx)(Ml,{})]}),(0,r.jsx)(ee.Modals,{})]})})})})},uc=function(){var e=(0,X.useUIState)().isTabNavHighlighted;return(0,r.jsx)("div",{className:u("relative h-full w-full",{"[&_*:focus-within]:!outline-none [&_*:focus]:!outline-none":!e,"[&_*:focus-within]:!outline-0 [&_*:focus]:!outline-0":!e}),children:(0,r.jsx)(J.Routes,{children:(0,r.jsx)(J.Route,{path:"/:wallboardId?",element:(0,r.jsx)(sc,{})})})})},dc=function(){return(0,r.jsx)($,{platformSpecific:(0,o.createPlatformSpecific)("wallboard"),app:"wallboard",appRemoteName:"wallboard",children:function(){return(0,r.jsx)(uc,{})}})}}}]);
//# sourceMappingURL=64.0d3aef08.chunk.js.map