/*! For license information please see 72.b357b964.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_bpinc_web_interaction_search_ui=self.webpackChunk_bpinc_web_interaction_search_ui||[]).push([[72],{7029:(e,n,t)=>{var o=t(7704);n.s=o.createRoot,o.hydrateRoot},4072:(e,n,t)=>{t.r(n);var o=t(2322),i=t(6029),r=t.n(i),s=t(7029),a=t(9022),c=t(4483),l=t(6441),u=t(5886),d=t(9008),f=t(7421),_=t(7505),S=t(9717),h=t(9486),p=t(3346),E=new URL("http://localhost:9897");E.searchParams.append("domain",location.hostname);var m=E.toString(),g="bpClient/onShowDomainAuthorizationDialog",v=t(8715),b=t(3650),N="cursor-pointer text-primary-legacy",x="ext-link",L="ext-link-firefox",w="plugin-link",O=function(e){var n=e.isExtAvailable,t=e.install,r=(0,h.useLocalizationState)().t.INSTALLATION_PROCESS,s=(0,b.useInstallationMethods)(),a=s.installChromeExtension,c=s.installFirefoxExtension,l=s.installBPClientPlugin;(0,i.useEffect)((function(){var e=document.getElementById(x),n=document.getElementById(L),t=document.getElementById(w);return null==e||e.addEventListener("click",a),null==n||n.addEventListener("click",c),null==t||t.addEventListener("click",l),function(){null==e||e.removeEventListener("click",a),null==n||n.removeEventListener("click",c),null==t||t.removeEventListener("click",l)}}),[a,c,l]);var u=r.install_updateHeader(w,N);return t&&(u="chrome"===v.platformInfo.browser?n?r.install_installHeader(w,N):r.install_installHeaderChrome(x,w,N):"firefox"===v.platformInfo.browser?n?r.install_installHeader(w,N):r.install_installHeaderFirefox(L,w,N):r.install_installHeader(w,N)),(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:u}})},C=t(6508),I=t(3764);var A=function(e){var n=e.browserName,t=(0,h.useLocalizationState)("t").INSTALLATION_PROCESS,i=(0,d.useSessionState)("serverOrigin"),r="chrome"===v.platformInfo.browser,s="firefox"===v.platformInfo.browser,a="safari"===v.platformInfo.browser,c="";return r?c=b.URL_EXTENSION_INSTALLER_CHROME:s?c=i+b.URL_EXTENSION_INSTALLER_FIREFOX:a&&(c=i+b.URL_MAC_PLUGIN),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:t.bp_client_old_extension_version(n)}),(r||s||a)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("span",{children:t.bp_client_update_extension_part1()}),(0,o.jsx)("a",{href:c,rel:"noopener noreferrer",target:"_blank",children:t.bp_client_update_extension_text()}),(0,o.jsx)("span",{children:t.bp_client_update_extension_part2()})]})]})},P=t(4432),j=function(){return location.reload()};var D=t(1960),M=5e3;function y(){var e,n,t,r,s,a,c,l,u,E,v,b;e=(0,f.useBpClientStateConnector)(),n=(0,p.useModalsStateMethods)(),t=n.openModal,r=n.closeModal,s=(0,h.useLocalizationState)("t"),a=(0,S.useEvent)((function(){t({id:g,title:s.INSTALLATION_PROCESS.bp_client_not_authorized_header(),body:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:s.INSTALLATION_PROCESS.bp_client_not_authorized_message_part1()}),(0,o.jsx)("a",{href:m,rel:"noopener noreferrer",target:"_blank",children:s.ERROR_MESSAGES.domainAuthentificationErrorAnchor()}),(0,o.jsx)("span",{children:s.INSTALLATION_PROCESS.bp_client_not_authorized_message_part2()})]}),actions:function(e){var n=e.closeModal;return(0,o.jsx)(_.SmButton,{onClick:n,children:s.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})}})})),c=(0,S.useEvent)((function(){r(g)})),(0,i.useEffect)((function(){return e.dispenser.subscribe({onShowDomainAuthorizationDialog:a,onHideDomainAuthorizationDialog:c}).unsubscribe}),[e,a,c]),function(){var e=(0,h.useLocalizationState)("t").WINDOW_POPUP_TITLES_AND_MESSAGES,n=(0,f.useBpClientState)("isExtensionAvailable"),t=(0,f.useBpClientStateConnector)(),r=(0,p.useModalsStateMethods)().openModal,s=(0,S.useEvent)((function(t){r({title:e.window_title_warning(),body:(0,o.jsx)(O,{install:t,isExtAvailable:n}),actions:{ok:{title:e.window_buttonOk()}}})}));(0,i.useEffect)((function(){return t.dispenser.subscribe({onInstallationRequired:s}).unsubscribe}),[t,s])}(),l=(0,I.useNotificationsState)("methods").showNotification,u=(0,C.useOfflineStateMethods)().setShowOfflineAlert,E=(0,C.useOfflineStateDataShowOfflineAlert)(),v=(0,C.useOfflineErrorMessages)(),b=(0,C.useIsOffline)(),(0,i.useEffect)((function(){E&&l({type:"error",id:I.Notifications.OfflineStateError,content:v.isOffline,closable:!0,duration:5e3,onHide:function(){return u(!1)}})}),[v.isOffline,u,l,E]),(0,i.useEffect)((function(){b||u(!1)}),[b,u]),function(){var e=(0,f.useBpClientStateConnector)(),n=(0,h.useLocalizationState)("t").WINDOW_POPUP_TITLES_AND_MESSAGES,t=(0,p.useModalsStateMethods)().openModal,r=(0,S.useEvent)((function(e){t({title:n.window_title_warning(),body:(0,o.jsx)(A,{browserName:e}),actions:function(e){var t=e.closeModal;return(0,o.jsx)(_.SmButton,{onClick:t,children:n.window_buttonOk()})}})}));(0,i.useEffect)((function(){return e.dispenser.subscribe({onShowExtensionIsOldDialog:r}).unsubscribe}),[e,r])}(),function(){var e=(0,I.useNotificationsState)("methods"),n=e.showNotification,t=e.hideNotificationById,r=(0,P.useAppConfigState)("isClientOutdated"),s=(0,d.useSessionState)("isLoggedIn"),a=(0,h.useLocalizationState)("t").GLOBAL,c=(0,S.useEvent)((function(){s&&(r?n({type:"error",id:I.Notifications.OutdatedClientAppError,message:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:a.reload_confirm_new_msg_part1()}),(0,o.jsx)("a",{href:"#",onClick:j,children:a.reload_confirm_action_button_text()}),(0,o.jsx)("span",{children:a.reload_confirm_new_msg_part2()})]})}):t(I.Notifications.OutdatedClientAppError))}));(0,i.useEffect)((function(){c()}),[r,c])}(),function(){var e=(0,d.useSessionStateConnector)(),n=(0,f.useBpClientState)("isHelperAppInstanceCreated"),t=(0,I.useNotificationsState)("methods"),o=t.showNotification,r=t.hideNotificationById,s=(0,d.useSessionState)("phoneType"),a=(0,h.useLocalizationState)("t"),c=(0,S.useEvent)((function(e){if(e.canDial||"phone_type_none"===s)D.bpLogger.info("SIP phone or external line is in service"),r(I.Notifications.PhoneOutOfServiceError);else{var t;switch(D.bpLogger.warn("SIP phone or external line is out of service"),s){case"phone_type_nailed":t=a.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_virtual_phone_not_available();break;case"phone_type_soft_secure":case"phone_type_soft_unsecure":t=n?a.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_phone_not_available():a.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_helper_app_not_available();break;default:t=a.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_phone_not_available()}o({type:"error",id:I.Notifications.PhoneOutOfServiceError,message:t,closable:!1,showDelay:M})}})),l=(0,S.useEvent)((function(e,n){"agentServer"===e&&4===n&&o({type:"warning",id:I.Notifications.PhoneOutOfServiceError,message:a.ERROR_MESSAGES.phoneIsNotRegistered(),closable:!1,showDelay:M})})),u=(0,S.useEvent)((function(){o({type:"warning",id:I.Notifications.PhoneOutOfServiceError,message:a.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_3pcc_server_connectionLost(),closable:!1,showDelay:M})})),_=(0,S.useEvent)((function(){r(I.Notifications.PhoneOutOfServiceError)}));(0,i.useEffect)((function(){return e.dispenser.subscribe({onUpdateCapabilities:c,onServerError:l,onThreePCCServerGone:u,onThreePCCServerReady:_}).unsubscribe}),[c,l,u,_,e])}(),function(){var e=(0,I.useNotificationsState)("methods"),n=e.showNotification,t=e.hideNotificationById,o=(0,h.useLocalizationState)("t").WINDOW_POPUP_TITLES_AND_MESSAGES,r=(0,d.useSessionState)("sipServer"),s=(0,S.usePreviousValueRef)(r),a=(0,S.useEvent)((function(){r?t(I.Notifications.SipServerConnectionError):s.current&&n({type:"error",id:I.Notifications.SipServerConnectionError,message:o.window_messages_3pcc_server_connectionLost()})}));(0,i.useEffect)((function(){a()}),[r,a])}(),function(){var e=(0,I.useNotificationsState)("methods"),n=e.showNotification,t=e.hideNotificationById,o=(0,h.useLocalizationState)("t").GLOBAL,r=(0,i.useRef)(0),s=(0,S.useEvent)((function(){0!==r.current||(r.current=(new Date).getTime(),fetch("/",{method:"HEAD",cache:"no-store"}).catch((function(e){return console.error(e)})).finally((function(){var e=(new Date).getTime()-r.current;if(r.current=0,e>800){var i=o.slow_connection();n({type:"error",id:I.Notifications.SlowNetworkConnectionError,message:i}),D.bpLogger.warn("Slow connection detected")}else t(I.Notifications.SlowNetworkConnectionError)})))}));(0,i.useEffect)((function(){var e=setInterval(s,5e3);return function(){return clearInterval(e)}}),[s])}(),function(){var e=(0,I.useNotificationsState)("methods"),n=e.showNotification,t=e.hideNotificationById,r=(0,f.useBpClientState)("isDomainAuthorized"),s=(0,h.useLocalizationState)("t").ERROR_MESSAGES,a=(0,S.useEvent)((function(){r?t(I.Notifications.DomainNotAuthorizedForBPClientError):n({type:"error",id:I.Notifications.DomainNotAuthorizedForBPClientError,closable:!1,message:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:s.domain_authentication_error_part1()}),(0,o.jsx)("a",{href:m,rel:"noopener noreferrer",target:"_blank",children:s.domainAuthentificationErrorAnchor()}),(0,o.jsx)("span",{children:s.domain_authentication_error_part2()})]})})}));(0,i.useEffect)((function(){a()}),[r,a])}()}var T=function(e){var n=e.baseConnectors,t=e.authorizedConnectors,i=e.children;return y(),(0,o.jsx)(o.Fragment,{children:i(n,t)})},R=t(9572),k=t(5100),B=t(7282),z=t(6622),W=t(9464),G=t(4778),F=function(){var e=(0,d.useSessionState)("forceLogoutInfo"),n=(0,d.useSessionStateMethods)().closeForceLogout,t=(0,B.useFormatting)().formatFullName,i=(0,h.useLocalizationState)().t;(0,G.assertDefined)(e);var r=t(e.firstName,e.lastName),s=(0,z.formatDate)(e.timestamp);return(0,o.jsx)(_.SmSegment,{padded:!0,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2   overflow-hidden rounded-none border-none bg-transparent shadow-none",id:"login",children:(0,o.jsxs)(l.Modal,{isOpen:!0,size:"small",className:"max-w-[570px]","aria-describedby":"forceLogoutDialogDescription","data-testid":"forced-logout-modal",children:[(0,o.jsx)(l.Modal.Header,{children:i.WINDOW_POPUP_TITLES_AND_MESSAGES.window_title_information()}),(0,o.jsx)(l.Modal.Content,{children:(0,o.jsx)(l.Modal.Description,{id:"forceLogoutDialogDescription",children:(0,o.jsx)("p",{children:function(){switch(e.errorCode){case W.incomingErrorMessageCodes.forced_logout_by_another_session:return i.ERROR_MESSAGES.sessionWasOverwritten();case W.incomingErrorMessageCodes.forced_logout_by_supervisor:return i.ERROR_MESSAGES.forcedLogout(r,s);case W.incomingErrorMessageCodes.forced_logout_by_disabling_tenant:case W.incomingErrorMessageCodes.forced_logout_by_disabling_user:return i.ERROR_MESSAGES.account_has_been_disabled()}return e.forceLogoutReason}()})})}),(0,o.jsx)(l.Modal.Actions,{children:(0,o.jsx)(_.SmButton,{onClick:n,primary:!0,"data-testid":"ok-button",children:i.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})})]})})},U=function(){var e=(0,R.useCurrentTabRole)(),n=(0,d.useSessionState)(["authChecked","isLoggedIn","showLoginDialog","offerForceLogin","forceLogoutInfo"]),t=n.authChecked,i=n.isLoggedIn,r=n.showLoginDialog,s=n.offerForceLogin,a=n.forceLogoutInfo,c=!(0,h.useLocalizationState)("language")||"undecided"===e&&!t,u=!c&&(r||!i),f=!!a&&u,_=s&&!a&&u;return(0,o.jsxs)("div",{className:"mx-auto h-full w-[496px]",children:[c&&(0,o.jsx)(l.Loader,{active:!0,size:"huge",color:"primary"}),u&&(0,o.jsx)(k.LoginPage,{}),f&&(0,o.jsx)(F,{}),_&&(0,o.jsx)(k.ForceLogin,{})]})},H=r().memo((function(e){var n=e.baseConnectors,t=e.children;return(0,d.useSessionState)("isLoggedIn")?(0,o.jsx)(u.AuthorizedProviders,{baseConnectors:n,children:function(e){return(0,o.jsx)(T,{baseConnectors:n,authorizedConnectors:e,children:t})}}):(0,o.jsx)(U,{})})),X=t(1980),q=function(e){var n=e.baseConnectors,t=e.children,i=e.BaseConnectorsConsumer;return i?(0,o.jsx)(i,{baseConnectors:n,children:t}):t},V=function(e){var n=e.app,t=e.platformSpecific,i=e.BaseConnectorsConsumer,r=e.children;return(0,o.jsx)(u.BaseProviders,{platformSpecific:t,app:n,children:function(e){return(0,o.jsx)(q,{baseConnectors:e,BaseConnectorsConsumer:i,children:(0,o.jsx)(X.Tooltip.Provider,{children:(0,o.jsx)(I.NotificationsStateProvider,{children:r(e)})})})}})},J=function(e){var n=e.app,t=e.platformSpecific,i=e.children,r=e.BaseConnectorsConsumer,s=e.className,a=e.appRemoteName;return(0,o.jsx)(l.AppStyleSelector,{app:a,children:(0,o.jsx)("div",{className:(0,c.B)("h-full",s),children:(0,o.jsx)(V,{app:n,platformSpecific:t,BaseConnectorsConsumer:r,children:function(e){return(0,o.jsx)(H,{baseConnectors:e,children:i})}})})})},K=t(801),Q=(0,S.createProviderWrapper)([]),Y=(0,l.createComponentLoader)("interactionSearch",t.e(437).then(t.t.bind(t,1437,23)),"InteractionSearchPage").InteractionSearchPageLoader,Z=function(){return(0,o.jsx)(J,{platformSpecific:(0,a.createPlatformSpecific)("ais"),app:"ais",appRemoteName:"interactionSearch",children:function(){return(0,o.jsxs)(Q,{children:[(0,o.jsx)(Y,{}),(0,o.jsx)(K.Modals,{})]})}})},$=t(2850);t(7445);(0,$.registerServiceWorker)(),(0,s.s)(document.getElementById("root")).render((0,o.jsx)(Z,{}))},4483:(e,n,t)=>{t.d(n,{B:()=>s});var o=t(9478),i=t.n(o),r=t(324);function s(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,r.m6)(i()(n))}}}]);
//# sourceMappingURL=72.b357b964.chunk.js.map