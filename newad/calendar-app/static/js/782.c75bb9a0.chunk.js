/*! For license information please see 782.c75bb9a0.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_bpinc_web_calendar_ui=self.webpackChunk_bpinc_web_calendar_ui||[]).push([[782],{3393:(e,t,n)=>{n.d(t,{GB:()=>l,Mo:()=>m,c:()=>s,Gz:()=>h,HI:()=>b,Xg:()=>w});var r=n(6029),a=n(9008),o=n(9327),i=n(4870);function l(){var e=(0,a.useSessionState)(),t=e.userId,n=e.firstName,l=e.lastName,u=(0,i.useCalendarState)("calendarOwnerUserId"),c=(0,o.useUserDetailsOnceGetter)(),s=(0,o.useUserDetailsById)(u),f=(0,r.useMemo)((function(){if(u===t)return{userId:u,firstName:n||"",lastName:l||""};var e=null==s?void 0:s.data;return{userId:u,firstName:(null==e?void 0:e.firstName)||"",lastName:(null==e?void 0:e.lastName)||""}}),[u,t,s,n,l]);return(0,r.useEffect)((function(){var e;return f||(e=setTimeout((function(){c({userIds:[u]})}),500)),function(){return clearTimeout(e)}}),[u]),f}var u=n(3999),c=n(9486);function s(e){var t=(0,c.useLocalizationState)().t.DAYS,n=(0,r.useMemo)((function(){return{sunday:t.sunday(),monday:t.monday(),tuesday:t.tuesday(),wednesday:t.wednesday(),thursday:t.thursday(),friday:t.friday(),saturday:t.saturday()}}),[t]),a=(0,r.useMemo)((function(){return{sunday:t.sundayShort(),monday:t.mondayShort(),tuesday:t.tuesdayShort(),wednesday:t.wednesdayShort(),thursday:t.thursdayShort(),friday:t.fridayShort(),saturday:t.saturdayShort()}}),[t]),o=(0,r.useMemo)((function(){return{sunday:t.sundayLetter(),monday:t.mondayLetter(),tuesday:t.tuesdayLetter(),wednesday:t.wednesdayLetter(),thursday:t.thursdayLetter(),friday:t.fridayLetter(),saturday:t.saturdayLetter()}}),[t]);return(0,r.useMemo)((function(){return(0,u.G7)(n,a,o,e)}),[n,a,o,e])}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function m(e,t){var n=s(d(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}({},t),{startsFromMonday:!1}));return n[e.getDay()]}var y=n(635),p=n(9717);function v(){var e=(0,y.useTimezonesState)().localTimezone;return(0,r.useMemo)((function(){return e.length?e:(0,p.getUserTimezone)()}),[e])}function b(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).short,t=(0,c.useLocalizationState)(),n=t.t,a=n.MONTHS,o=(0,r.useMemo)((function(){return[a.january(),a.february(),a.march(),a.april(),a.may(),a.june(),a.july(),a.august(),a.september(),a.october(),a.november(),a.december()]}),[a]),i=(0,r.useMemo)((function(){return[a.januaryShort(),a.februaryShort(),a.marchShort(),a.aprilShort(),a.mayShort(),a.juneShort(),a.julyShort(),a.augustShort(),a.septemberShort(),a.octoberShort(),a.novemberShort(),a.decemberShort()]}),[a]);return e?i:o}function h(e,t){return b(t)[e.getMonth()]}var g=n(7282),x=n(4173),w=function(){var e=(0,i.useCalendarState)(["calendarEvents","calendarEventDetails"]),t=e.calendarEvents,n=e.calendarEventDetails,a=(0,i.useCalendarStateMethods)(),o=a.getCalendarEventDetails,c=a.selectEvent,s=function(){var e=(0,i.useCalendarStateMethods)().selectEvent,t=v(),n=l(),a=(0,g.useFormatting)().formatFullName;return(0,r.useCallback)((function(r,o){var i=n.userId,l=a(n.firstName,n.lastName),c=!(0,u.G5)(r,o),s={_temporaryId:(0,x.uuid)(),allDay:c,assignees:[{userId:i,displayText:l,type:"user"}],completed:!1,contacts:[],remindIn:0,remindInUnit:"MINUTES",screenpopSize:0,startTime:r,endTime:o,timezone:t,title:"",userId:i,userName:l};e(s)}),[e,n,t,a])}(),f=function(){var e=(0,i.useCalendarStateMethods)().selectEvent,t=v(),n=l(),a=(0,g.useFormatting)().formatFullName;return(0,r.useCallback)((function(r){var o=n.userId,i=a(n.firstName,n.lastName),l={id:r.id,allDay:r.allDay,assignees:[{userId:o,displayText:i,type:"user"}],completed:!1,endTime:r.end,notes:r.notes,remindIn:0,remindInUnit:"MINUTES",screenpopSize:0,startTime:r.start,timezone:t,title:r.title,userId:o,userName:i,contacts:[]};e(l)}),[e,n,t,a])}();return(0,r.useCallback)((function(e){"id"in e?function(e){var r=n[e];if(r)c(r);else{var a=t.find((function(t){return t.id===e}));a&&f(a),o(e).then((function(e){e&&c(e)}))}}(e.id):s(e.startTime,e.endTime)}),[t,c,s,f,n,o])}},7649:(e,t,n)=>{n.d(t,{t:()=>l});var r=n(2322),a=(n(6029),n(4483)),o=n(6441),i=n(9486),l=function(e){var t=e.disabled,n=e.onClick,l=(0,i.useLocalizationState)().t;return(0,r.jsx)(o.SemanticButton,{disabled:t,onClick:n,inverted:!0,className:(0,a.B)("mx-2 flex h-7 items-center justify-center text-base font-normal","bg-primary-legacy hover:bg-primary-contrast focus:bg-primary-contrast"),children:l.INCOMING_CALL_DIALOG_BOX.incomingInteraction_open()})}},2018:(e,t,n)=>{function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,n){return a=s()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&u(a,n.prototype),a},a.apply(null,arguments)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function l(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?r(e):t;var n}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return a(e,arguments,i(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)},c(e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{t:()=>R});c(Error);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t,n){return d=g()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&b(a,n.prototype),a},d.apply(null,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function v(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function h(e){var t="function"==typeof Map?new Map:void 0;return h=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return d(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,e)},h(e)}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}h(Error);Symbol.toStringTag;var x={BASE:"/swagger-calendar",VERSION:"1.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0};function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t,n,r,a,o,i){try{var l=e[o](i),u=l.value}catch(c){return void n(c)}l.done?t(u):Promise.resolve(u).then(r,a)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){S(o,r,a,i,l,"next",e)}function l(e){S(o,r,a,i,l,"throw",e)}i(void 0)}))}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){E(e,t,n[t])}))}return e}function D(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var C,I=function(e){return null!=e},T=function(e){return"string"==typeof e},_=function(e){return T(e)&&""!==e},M=function(e){return"object"==typeof e&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.arrayBuffer&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])},P=function(e){return t=e,null!=(n=FormData)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](t):t instanceof n;var t,n},k=(C=j((function(e,t){return A(this,(function(n){return"function"==typeof t?[2,t(e)]:[2,t]}))})),function(e,t){return C.apply(this,arguments)});(function(){var e=j((function(e,t){var n,r,a,o,i,l;return A(this,(function(u){switch(u.label){case 0:return[4,k(t,e.TOKEN)];case 1:return n=u.sent(),[4,k(t,e.USERNAME)];case 2:return r=u.sent(),[4,k(t,e.PASSWORD)];case 3:return a=u.sent(),[4,k(t,e.HEADERS)];case 4:return o=u.sent(),i=Object.entries(O({Accept:"application/json"},o,t.headers)).filter((function(e){var t=N(e,2),n=(t[0],t[1]);return I(n)})).reduce((function(e,t){var n=N(t,2),r=n[0],a=n[1];return D(O({},e),E({},r,String(a)))}),{}),_(n)&&(i.Authorization="Bearer ".concat(n)),_(r)&&_(a)&&(l=function(e){try{return btoa(e)}catch(t){return Buffer.from(e).toString("base64")}}("".concat(r,":").concat(a)),i.Authorization="Basic ".concat(l)),t.body&&(t.mediaType?i["Content-Type"]=t.mediaType:M(t.body)?i["Content-Type"]=t.body.type||"application/octet-stream":T(t.body)?i["Content-Type"]="text/plain":P(t.body)||(i["Content-Type"]="application/json")),[2,new Headers(i)]}}))}))})(),function(){var e=j((function(e,t,n,r,a,o,i){var l,u;return A(this,(function(c){switch(c.label){case 0:return l=new AbortController,u={headers:o,body:null!=r?r:a,method:t.method,signal:l.signal},e.WITH_CREDENTIALS&&(u.credentials=e.CREDENTIALS),i((function(){return l.abort()})),[4,fetch(n,u)];case 1:return[2,c.sent()]}}))}))}(),function(){var e=j((function(e){var t,n;return A(this,(function(r){switch(r.label){case 0:if(204===e.status)return[3,7];r.label=1;case 1:return r.trys.push([1,6,,7]),(t=e.headers.get("Content-Type"))?t.toLowerCase().startsWith("application/json")?[4,e.json()]:[3,3]:[3,5];case 2:return[2,r.sent()];case 3:return[4,e.text()];case 4:return[2,r.sent()];case 5:return[3,7];case 6:return n=r.sent(),console.error(n),[3,7];case 7:return[2,void 0]}}))}))}();var R;!function(e){e.EVENT="event",e.REQUEST="request",e.SHIFT="shift"}(R||(R={})),x.BASE="/newadws/api"},4293:(e,t,n)=>{n.d(t,{Rb:()=>kn,Z$:()=>Fn,Xd:()=>Cr,ih:()=>Hn,V3:()=>Qa,Qb:()=>Kr,fM:()=>Xr,n8:()=>Jr});var r=n(2322),a=n(6029),o=n.n(a),i=n(7500),l=n(2469),u=n(4870),c=n(4315),s=n(635),f=n(3999),d=n(9717);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=[c.View.MONTH,c.View.WEEK,c.View.DAY,c.View.SCHEDULE];function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=n(4483),g=n(6441),x=o().memo((function(){return(0,r.jsx)("div",{className:(0,h.B)("flex items-center justify-center before:absolute before:inset-0","before:z-[5] before:bg-primary-contrast before:opacity-70"),children:(0,r.jsx)(g.Loader,{active:!0,size:"big",color:"primary"})})})),w=n(2122),S=n(9572),j=n(3393);function E(e){var t=e.daysAmount,n=e.start,r=e.events;return(0,a.useMemo)((function(){var e=[],a=n+t*d.MS_IN_DAY,o=Object.values(r).flatMap((function(e){return e.filter((function(e){return function(e){return(e.type===c.EventType.EVENT||e.type===c.EventType.NEW_EVENT)&&(e.data.allDay||!(0,f.G5)(e.data.start,e.data.end))}(e)&&function(e,t,n){return(0,w.inRange)(e.data.start,t,n)||(0,w.inRange)(e.data.end-1,t,n)}(e,n,a)}))}));o.filter((function(e){return e.type!==c.EventType.NEW_EVENT})).forEach((function(t){var n=function(e,t){if(!e.length)return-1;var n=t.data,r=n.start,a=n.end,o=0;for(;o<e.length;){if(e[o].every((function(e){var t=e.data,n=t.start,o=t.end;return n<r&&o<r||n>a&&o>a})))return o;o++}return-1}(e,t);-1===n&&(e.push([]),n=e.length-1),e[n].push(t)}));var i=o.filter((function(e){return e.type===c.EventType.NEW_EVENT}));return i.length>0&&(e.unshift([]),i.forEach((function(t){return e[0].push(t)}))),[e,e.length]}),[r,n,t])}function O(e){var t=e.daysAmount,n=e.start,r=e.events;return Array.from({length:t}).map((function(e,t){var a=n+d.MS_IN_DAY*t,o=(0,f.gB)(new Date(a)),i=[];return o in r&&r[o].forEach((function(e){e.type!==c.EventType.EMPTY&&i.push(e)})),i.sort((function(e,t){if(e.type!==t.type){var n=[c.EventType.OCCUPIED,c.EventType.EVENT,c.EventType.NEW_EVENT];return n.indexOf(e.type)-n.indexOf(t.type)}return e.data.start-t.data.start})),i}))}function D(e,t){var n=new Date(t.data.start).setSeconds(0,0),r=new Date(t.data.end).setSeconds(0,0),a=new Date(e.data.start).setSeconds(0,0),o=new Date(e.data.end).setSeconds(0,0);return!(a<n&&o<=n||a>=r&&o>r)}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=function(){var e=(0,u.useCalendarState)("selectedEvent"),t=A((0,a.useState)(),2),n=t[0],r=t[1],o=(0,d.usePrevious)(e);return(0,a.useEffect)((function(){e&&!o&&r(void 0)}),[e,o]),[n,r]},I=n(2018),T=n(7505),_=n(1460),M=n(7517),P=n(9486);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=n(3346),F=n(4778),z=n(4692),V=n(2008),U=n.n(V),B=(0,n(5977).createSelector)((function(e){return e.locale}),(function(e){return e.timeZone}),(function(e,t){return{fullDate:new Intl.DateTimeFormat(e,{day:"numeric",month:"long",timeZone:t,weekday:"long"}),h:new Intl.DateTimeFormat(e,{hour:"numeric",timeZone:t}),hmm:new Intl.DateTimeFormat(e,{hour:"numeric",minute:"2-digit",timeZone:t}),hhmm:new Intl.DateTimeFormat(e,{hour:"2-digit",minute:"2-digit",timeZone:t}),normalize:function(e){return new RegExp("AM|PM","g").test(e)?e.replace(/^0/,"").replace(/:00/g,"").replace(/AM|PM/g,(function(e){return e.toLowerCase()})):e}}})),H=function(e){var t,n=e.startTime,r=e.endTime,a=e.locale,o=e.timeZone,i=e.allDay,l=void 0!==i&&i,u=e.allDayMessage,c=void 0===u?"":u,s=B({locale:a,timeZone:o}),m=s.fullDate,y=s.h,p=s.hmm,v=s.hhmm,b=s.normalize,h="number"==typeof n?new Date(n):U()(n).toDate(),g={date:m.format(h),time:""};if(!r)return g.time=b(v.format(h)),{from:g,to:t};var x="number"==typeof r?new Date(r):U()(r).toDate();l?(0,f.cr)(h,x)>1?t={date:m.format(x),time:c}:g.time=c:(0,d.areSameDays)(h,x)?g.time=b(p.formatRange(h,x)):(g.time=0===U()(h).minute()?y.format(h):p.format(h),t={date:m.format(x),time:0===U()(x).minute()?y.format(x):p.format(x)},g.time=b(g.time),t.time=b(t.time));return{from:g,to:t}},W=function(e,t){var n=new Date(e),r=new Date(t);return n.setHours(r.getHours()),n.setMinutes(r.getMinutes()),n.setSeconds(r.getSeconds()),Number(n)};function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var $=function(e,t){var n,r=t.startDate&&t.startTime?W(t.startDate,t.startTime):e.startTime,a=t.endDate&&t.endTime?W(t.endDate,t.endTime):e.endTime;return K(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Y(e,t,n[t])}))}return e}({},e,(0,w.omit)(t,["timezone","startTime","startDate","endTime","endDate","contacts"])),{contacts:(null===(n=t.contacts)||void 0===n?void 0:n.map((function(e){return Q(e)})))||[],timezone:t.allDay?(0,d.getUserTimezone)():t.timezone,startTime:r,endTime:a})},Q=function(e){if("new"===e.type){var t=G(function(e){if(0===e.length)return["Anonymous",""];var t=e.replace(/\s+/g," ").trim().split(" ");return[t[0],t.slice(1).join(" ")]}(e.name),2),n=t[0],r=t[1];return{create:e.create,first_name:n,last_name:r,calendar_phone:{type:e.phone.type,phone:e.phone.phone}}}return{id:e.id}};function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var te=function(e,t){var n=(0,u.useCalendarState)(["eventEditing","nextSelectedEvent"]),r=n.eventEditing,o=n.nextSelectedEvent,i=(0,u.useCalendarStateMethods)(),l=i.resetEventForm,c=i.discardEventForm,s=function(){var e=(0,u.useCalendarStateMethods)(),t=e.resetEventForm,n=e.continueEventForm,r=(0,a.useRef)(!1),o=(0,a.useCallback)((function(){r.current=!1,t()}),[t]),i=(0,a.useCallback)((function(){r.current=!1,n()}),[n]),l=(0,L.useModalsStateMethods)().openModal,c=(0,P.useLocalizationState)().t.CALENDAR_EVENT_FORM;return(0,a.useCallback)((function(){r.current||(r.current=!0,l({actions:{ok:{action:o,title:c.discard_modal_discard()},cancel:{action:i,title:c.discard_modal_cancel()}},afterClose:function(){r.current&&(r.current=!1,i())},body:c.discard_modal_text()}))}),[c,l,o,i])}();(0,a.useEffect)((function(){if(r){var n=(0,f.O4)(t),a=(0,f.wP)(t);if(!o)return(0,f.Q5)(a,n,e.getValues())?void s():void l();if((0,w.isEqual)(t,o))return;var i=(0,f.y7)(e.getValues(),n,o);e.reset(i),c()}else if(!o)return void c()}),[e,t,o,r,s,c,l])},ne=n(9073),re=n(161);function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ie="calendar-event-asignee";function le(e){var t=e.name,n=e.control,o=e.label,i=e.rules,l=e.defaultValue,u=e.disabled,c=(0,P.useLocalizationState)().t,s=oe((0,a.useState)(""),2),f=s[0],d=s[1],m=(0,ne.useController)({name:t,control:n,rules:i,defaultValue:l,disabled:u}).field,y=m.onBlur,p=m.onChange,v=m.value,b=(0,a.useCallback)((function(e){if("function"==typeof e){var t=e(v);return p(t),t}return p(e),e}),[p,v]),h=(0,a.useMemo)((function(){return v||[]}),[v]);return(0,r.jsxs)(r.Fragment,{children:[o&&(0,r.jsx)("label",{htmlFor:ie,children:o}),(0,r.jsx)(re.MultipleUserSearch,{searchForUsers:!0,withSessionUser:!0,searchForTeams:!0,uniqueSearchId:ie,searchValue:f,setSearchValue:d,selectedItems:h,setSelectedItems:b,noSearchValueLabel:c.CALENDAR.assignees_search_tooltip(),inputPlaceholder:c.CHAT_CENTER.chat_add_members_search_input_placeholder(),loadingLabel:c.GLOBAL.loading(),onInputBlur:y,disabled:u})]})}var ue=n(2346),ce=n(801);function se(e,t,n,r,a,o,i){try{var l=e[o](i),u=l.value}catch(c){return void n(c)}l.done?t(u):Promise.resolve(u).then(r,a)}function fe(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var de=function(e){var t,n,r=(0,ce.useOpenSearchContactModal)(),o=(0,ue.useContactsStateMethods)().getContact,i=(0,P.useLocalizationState)().t.CALENDAR_EVENT_FORM,l=(0,a.useCallback)((t=function(t){var n,r;return fe(this,(function(a){switch(a.label){case 0:return n=t.id,[4,o({id:n,force:!1})];case 1:return(r=a.sent())&&e(r),[2]}}))},n=function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){se(o,r,a,i,l,"next",e)}function l(e){se(o,r,a,i,l,"throw",e)}i(void 0)}))},function(e){return n.apply(this,arguments)}),[o,e]);return(0,a.useCallback)((function(){r({dataKey:"calendar-event-form-add-contact-modal",title:i.add_contact_dialog_title(),onSelect:l,selectButtonTitle:i.add_contact_dialog_select_button_text()})}),[l,i,r])};function me(e){var t=e.onAdd,n=(0,d.useBoolean)(),o=n.value,i=n.toggle,l=(0,P.useLocalizationState)().t.CALENDAR_EVENT_FORM,u=(0,a.useCallback)((function(e){t(function(e){return{type:"existing",id:e.Id.oid,lastName:e.lastName,firstName:e.firstName,primaryPhone:e.primaryPhone}}(e))}),[t]),c=de(u),s=(0,a.useCallback)((function(){c(),i()}),[i,c]),f=(0,a.useCallback)((function(){t({type:"new",name:"",phone:{type:z.PhoneTypes.BUSINESS,phone:""},create:!1}),i()}),[i,t]),m=(0,d.useOnKeyPressHandler)(i),y=(0,a.useMemo)((function(){return[{children:l.field_contact_dropdown_search_label(),onClick:s,id:"calendar-event-form-add-contact-popup"},{children:l.field_contact_dropdown_manually_label(),onClick:f,id:"calendar-event-form-add-contact-manually-button"}]}),[l,f,s]);return(0,r.jsx)(g.PopupButton,{show:o,toggleShow:i,onKeyDown:m,options:y,size:"small",optionClassName:(0,h.B)("relative flex w-full cursor-pointer border-none bg-transparent px-3 py-1.5 text-sm/[16px] text-black","focus-within:bg-menu-bg-hover hover:bg-menu-bg-hover focus:bg-menu-bg-hover"),content:l.field_contact_label()})}var ye=n(8770),pe=n(7282),ve=n(3711),be=n(6622);function he(e){var t=e.phone,n=e.type,a=(0,pe.useFormatting)().formatPhoneType;return(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-primary-legacy",children:(0,be.formatPhone)(t)})," ",(0,r.jsx)("span",{children:"(".concat(a(n),")")})]})}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xe(e,t,n[t])}))}return e}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e){var t=e.contact,n=e.index,o=e.control,i=(0,ue.useContactsStateMethods)().getContact,l=(0,ye.useGetContactPictureUrl)(),u=(0,pe.useFormatting)().formatFullName,c=Se((0,a.useState)(Ee(t.primaryPhone)),2),s=c[0],f=c[1],d=Se((0,a.useState)((function(){return t.primaryPhone?[t.primaryPhone]:[]})),2),m=d[0],y=d[1],p=Se((0,a.useState)(!0),2),v=p[0],b=p[1];(0,a.useEffect)((function(){i({id:t.id,force:!1}).then((function(e){if(e){y(e.phones||[]);var n=(e.phones||[]).find((function(e){var n;return(null===(n=t.primaryPhone)||void 0===n?void 0:n.phone)===e.phone&&t.primaryPhone.type==e.type}),[]);f(Ee(n)),b(!1)}}))}),[t.id,t.primaryPhone,i]);var h=(0,a.useMemo)((function(){return m.map((function(e){var t=Ee(e);return{key:t,text:(0,r.jsx)(he,{phone:e.phone,type:e.type}),value:t}}))}),[m]),g=(0,a.useMemo)((function(){return{firstName:t.firstName||"",lastName:t.lastName||"",url:l(t.id),type:"contact"}}),[t.firstName,t.id,t.lastName,l]),x=(0,ne.useController)({control:o,name:"contacts.".concat(n,".primaryPhone.id"),defaultValue:Ee(t.primaryPhone)}).field,w=(0,ne.useController)({control:o,name:"contacts.".concat(n,".primaryPhone")}).field.onChange,S=x.value,j=x.onChange;return(0,a.useEffect)((function(){var e=m.find((function(e){return Ee(e)===S}));w(e)}),[m,w,S]),(0,a.useEffect)((function(){j(s)}),[j,s]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.HiddenField,{control:o,name:"contacts.".concat(n,".id"),defaultValue:t.id}),(0,r.jsx)(M.HiddenField,{control:o,name:"contacts.".concat(n,".firstName"),defaultValue:t.firstName}),(0,r.jsx)(M.HiddenField,{control:o,name:"contacts.".concat(n,".lastName"),defaultValue:t.lastName}),(0,r.jsxs)("div",{className:"flex flex-row items-center",children:[(0,r.jsx)(ve.AvatarLegacy,we({size:32},g)),(0,r.jsxs)("div",{className:"ml-2 min-w-0 flex-initial",children:[(0,r.jsx)("div",{className:"truncate text-lg/[23px] font-bold",children:u(t.firstName,t.lastName)}),t.primaryPhone&&(0,r.jsx)(M.SelectFieldRaw,{field:x,inline:!1,options:h,selection:!1,loading:v})]})]})]})}function Ee(e){if(e)return e.type+e.phone}function Oe(e){var t=e.index,n=e.control,o=e.contact,i=(0,P.useLocalizationState)().t.CALENDAR_EVENT_FORM,l=(0,pe.useFormatting)().formatPhoneType,u=(0,a.useMemo)((function(){return Object.keys(z.PhoneTypes).map((function(e){return{value:e,text:l(e),"data-testid":"option"}}))}),[l]),c=(0,_.usePhoneValidationRules)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.HiddenField,{control:n,name:"contacts.".concat(t),defaultValue:o}),(0,r.jsx)(T.SmForm.Field,{className:"mb-2",children:(0,r.jsx)(M.TextField,{control:n,name:"contacts.".concat(t,".name"),defaultValue:o.name,placeholder:i.add_new_contact_name_placeholder(),type:"text"})}),(0,r.jsxs)(T.SmForm.Group,{className:"mb-2 items-center",children:[(0,r.jsx)(M.TextField,{width:9,control:n,name:"contacts.".concat(t,".phone.phone"),defaultValue:o.phone.phone,placeholder:i.add_new_contact_phone_placeholder(),type:"tel",rules:c}),(0,r.jsx)(M.SelectField,{width:7,control:n,name:"contacts.".concat(t,".phone.type"),defaultValue:o.phone.type,options:u,selection:!1})]}),(0,r.jsx)(T.SmForm.Field,{children:(0,r.jsx)(M.CheckboxField,{control:n,name:"contacts.".concat(t,".create"),defaultValue:o.create,label:i.add_new_contact_create_label()})})]})}function De(e){var t=e.control,n=(0,ne.useFieldArray)({control:t,name:"contacts",keyName:"dataId"}),o=n.fields,i=n.remove,l=n.append,u=(0,a.useCallback)((function(e){var t=o.map((function(e){return(0,f.$t)(e)?e:null})).filter(Boolean);(0,f.$t)(e)&&t.some((function(t){return e.id===(null==t?void 0:t.id)}))||l(e)}),[l,o]);return(0,r.jsxs)(r.Fragment,{children:[!!o.length&&(0,r.jsx)("div",{className:"my-4",children:o.map((function(e,n){return(0,r.jsx)(Ne,{index:n,contact:e,remove:i,control:t},e.dataId)}))}),(0,r.jsx)(me,{onAdd:u})]})}function Ne(e){var t=e.contact,n=e.remove,o=e.index,i=e.control,l=(0,a.useCallback)((function(){return n(o)}),[o,n]);return(0,r.jsx)(g.Panel,{className:"mb-2 last:mb-0",actions:(0,r.jsx)(g.Button,{type:"button",className:"text-main opacity-50 hover:opacity-100 focus:opacity-100 active:opacity-100",transparent:!0,semanticIcon:"delete",onClick:l}),children:"existing"==t.type?(0,r.jsx)(je,{index:o,contact:t,control:i}):(0,r.jsx)(Oe,{index:o,contact:t,control:i})})}var Ae=function(e){var t=e.form,n=e.staticValue,a=t.control,o=t.getValues,i=t.setValue,l=void 0===n,u=l?o("screenpopSize")||0:n,c=(0,P.useLocalizationState)().t.CALENDAR_EVENT_FORM;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{children:c.field_details_label()}),(0,r.jsx)("p",{children:u>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:c.field_details_text(u)}),l&&(0,r.jsx)(T.SmIcon,{className:"inline-block pl-2 align-text-top",color:"grey",fitted:!0,link:!0,name:"times",onClick:function(){i("screenpopSize",0,{shouldDirty:!0})}})]}):c.field_details_none()}),l&&(0,r.jsx)(M.TextField,{className:"hidden",control:a,name:"screenpopSize",defaultValue:u})]})},Ce=function(e){var t=e.control,n=(0,s.useTimezonesState)().allTimezones,o=(0,a.useMemo)((function(){return n.map((function(e){var t=e.id,n=e.fullName;return{key:t,text:n,value:t,className:"max-w-[270px]",title:n}}))}),[n]);return(0,r.jsx)(M.SelectField,{tabIndex:0,control:t,name:"timezone",options:o,search:!0,selection:!1})};function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _e=["MINUTES","HOURS","DAYS"].map((function(e){return{key:e,text:e,value:e}})),Me=function(e){var t,n,o,i,l,c,s,m=e.form,y=e.event,p=(0,P.useLocalizationState)().t.CALENDAR_EVENT_FORM,v=(t=(0,u.useCalendarState)(["view","viewDate"]),n=t.view,o=t.viewDate,i=(0,u.useCalendarStateMethods)().changeViewDate,l=ee((0,a.useMemo)((function(){return(0,f.vN)(o,n,{expand:!0})}),[n,o]),2),c=l[0],s=l[1],(0,a.useCallback)((function(e){(c>e||s<e)&&i((0,d.getStartOfDay)(e))}),[c,s,i])),b=(0,u.useCalendarStateMethods)().updateSelectedEvent,h=m.control,g=m.watch,x=m.setValue,w=Te(g(["allDay","startDate","startTime","endDate","endTime"]),5),S=w[0],j=w[1],E=w[2],O=w[3],D=w[4],N=(0,a.useRef)({endMoment:0,startMoment:0}),A=(0,f.O4)(y),C=(0,d.useAsRef)(y),I=(0,_.useOnlyDigitsValidationRule)();return(0,a.useEffect)((function(){if(j&&O&&E&&D&&C.current){var e=W(j,E),t=W(O,D);if(t<=e)if(t!==N.current.endMoment){t===(e=Math.floor(t/d.MS_IN_HOUR)*d.MS_IN_HOUR)&&(e-=d.MS_IN_HOUR);var n=new Date(e).toISOString();x("startTime",n),x("startDate",n)}else{(t=Math.ceil(e/d.MS_IN_HOUR)*d.MS_IN_HOUR)===e&&(t+=d.MS_IN_HOUR);var r=new Date(t).toISOString();x("endTime",r),x("endDate",r)}N.current.endMoment===t&&N.current.startMoment===e||(b({startTime:e,endTime:t}),N.current.endMoment=t,N.current.startMoment=e,v(e))}}),[x,b,j,E,O,D,C,v]),(0,a.useEffect)((function(){C.current&&S!==C.current.allDay&&b({allDay:S})}),[S,C,b]),(0,r.jsxs)("div",{className:"overflow-y-auto overflow-x-hidden",children:[(0,r.jsx)(M.TextField,{autoFocus:!0,required:!0,tabIndex:0,name:"title",control:h,placeholder:p.field_title_placeholder()}),(0,r.jsx)(M.CheckboxField,{control:h,name:"completed",label:p.field_completed_label()}),(0,r.jsxs)(T.SmForm.Group,{widths:"equal",children:[(0,r.jsxs)(T.SmForm.Field,{width:"8",children:[(0,r.jsx)(M.DatePickerField,{readOnly:!0,control:h,clearable:!1,icon:"caret down",name:"startDate",label:p.field_date_label()}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(M.CheckboxField,{control:h,name:"allDay",label:p.field_allday_label()})})]}),(0,r.jsx)(M.DatePickerField,{readOnly:!0,clearable:!1,width:"8",control:h,icon:"caret down",name:"endDate",label:"\xa0"})]}),(0,r.jsxs)(T.SmForm.Group,{widths:"equal",children:[(0,r.jsx)(M.DatePickerField,{readOnly:!0,clearable:!1,disabled:S,width:"8",control:h,displayFormat:"HH:mm",icon:"caret down",name:"startTime",label:p.field_time_label()}),(0,r.jsx)(M.DatePickerField,{readOnly:!0,clearable:!1,disabled:S,width:"8",control:h,displayFormat:"HH:mm",icon:"caret down",name:"endTime",label:"\xa0"})]}),!S&&(0,r.jsx)(Ce,{control:h}),(0,r.jsxs)(T.SmForm.Group,{children:[(0,r.jsx)(M.TextField,{width:"4",tabIndex:0,control:h,defaultValue:0,label:p.field_reminder_label(),rules:I,name:"remindIn",placeholder:"0"}),(0,r.jsx)(M.SelectField,{width:"12",tabIndex:0,control:h,defaultValue:"MINUTES",label:"\xa0",name:"remindInUnit",options:_e})]}),(0,r.jsx)(T.SmForm.Field,{children:(0,r.jsx)(le,{control:h,defaultValue:A.assignees,label:p.field_assignee_label(),name:"assignees"})}),(0,r.jsx)(M.TextAreaField,{tabIndex:0,control:h,label:p.field_summary_label(),maxRows:3,minRows:3,name:"notes"}),(0,r.jsx)(T.SmForm.Field,{children:(0,r.jsx)(Ae,{form:m})}),(0,r.jsx)(T.SmForm.Field,{children:(0,r.jsx)(De,{control:h})})]})},Pe=function(e){var t=e.saveResult,n=e.deleteResult,a=e.clearSaveResult,o=e.clearDeleteResult,i=(0,P.useLocalizationState)().t.CALENDAR_EVENT_FORM;return(0,r.jsxs)(r.Fragment,{children:["error"===t&&(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(T.SmMessage,{error:!0,onDismiss:a,header:i.error_save_event_header(),content:i.error_save_event_text()})}),"error"===n&&(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(T.SmMessage,{error:!0,onDismiss:o,header:i.error_delete_event_header(),content:i.error_delete_event_text()})})]})},ke=n(2654);function Re(e){var t=e.contact,n=(0,ye.useGetContactPictureUrl)(),o=(0,pe.useFormatting)().formatFullName,i=(0,a.useMemo)((function(){var e,n;return"existing"==t.type?{id:t.id,firstName:t.firstName,lastName:t.lastName,phone:(null===(e=t.primaryPhone)||void 0===e?void 0:e.phone)||"",phoneType:null===(n=t.primaryPhone)||void 0===n?void 0:n.type}:{id:void 0,firstName:t.name,lastName:"",phone:t.phone.phone,phoneType:t.phone.type}}),[t]),l=i.id,u=i.firstName,c=i.lastName,s=i.phoneType,f=i.phone,d=(0,a.useMemo)((function(){return{firstName:u,lastName:c,url:n(l),type:"contact"}}),[u,l,c,n]),m=(0,a.useMemo)((function(){return s?(0,r.jsx)(he,{phone:f,type:s}):null}),[f,s]);return(0,r.jsx)(g.Panel,{className:"mb-2 last:mb-0",children:(0,r.jsx)(ke.ContactListItem,{className:"[&>*]:min-h-[auto]",contentClassName:"p-0",contactId:l,title:o(u,c),body:m,avatarProps:d})})}var Le=function(e){var t=e.form,n=e.event,a=e.showTitle,o=(0,P.useLocalizationState)(),i=o.t.CALENDAR_EVENT_FORM,l=o.language,u=t.control,c=(0,f.O4)(n),s=c.allDay,d=c.endTime,m=c.notes,y=c.remindIn,p=c.remindInUnit,v=c.screenpopSize,b=c.startTime,h=c.title,g=c.contacts,x=H({allDay:s,allDayMessage:i.text_all_day_event(),startTime:b,endTime:d,locale:l}),w=x.from,S=x.to;return(0,r.jsxs)("div",{className:"overflow-y-auto overflow-x-hidden",children:[a&&(0,r.jsx)(T.SmHeader,{as:"h3",children:h}),(0,r.jsx)(M.CheckboxField,{className:"mb-4",control:u,name:"completed",label:i.field_completed_label()}),(0,r.jsxs)("p",{className:"mb-3.5",children:[(0,r.jsx)("span",{className:"mr-3 inline-block",children:w.date}),(0,r.jsx)("span",{className:"mr-3 inline-block",children:w.time}),S&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"mr-3 inline-block",children:" \u2014 "+S.date}),(0,r.jsx)("span",{className:"mr-3 inline-block",children:S.time})]})]}),y?(0,r.jsx)("p",{children:i.text_reminde_before("MINUTES"===p?i.format_minutes(y):"HOURS"===p?i.format_hours(y):i.format_days(y))}):null,(0,r.jsx)(T.SmForm.Field,{children:(0,r.jsx)(le,{control:u,label:i.field_assignee_label(),name:"assignees",disabled:!0})}),(0,r.jsxs)(T.SmForm.Field,{children:[(0,r.jsx)("label",{children:i.field_summary_label()}),(0,r.jsx)("p",{children:m||i.field_details_none()})]}),(0,r.jsx)(T.SmForm.Field,{children:(0,r.jsx)(Ae,{form:t,staticValue:v})}),g.map((function(e,t){return(0,r.jsx)(Re,{contact:e},t)})),(0,r.jsx)("div",{className:"h-14",children:(0,r.jsx)("div",{})})]})};function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ve=function(e){var t=e.item,n=e.title,o=e.className,l=e.viewStart,u=e.viewEnd,s=e.isSelectionInProgress,m=e.selectedEvent,y=e.cellSize,p=e.line,v=void 0===p?0:p,b=e.lines,g=void 0===b?1:b,x=e.header,w=(0,a.useRef)(null),S=(0,j.Xg)(),E=(0,d.useValueUpdated)(t.data.start);(0,a.useEffect)((function(){var e;t.type===c.EventType.NEW_EVENT&&E&&(null===(e=w.current)||void 0===e||e.scrollIntoView({block:"center",behavior:"smooth"}))}),[t,E]);var O=ze((0,i.useDrag)((function(){return{type:x?c.DragItemTypes.HEADER_EVENT:c.DragItemTypes.EVENT,item:t,collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){var n=t.getDropResult();n&&n.onEnd()}}}),[t,x]),3),D=O[0].isDragging,N=O[1],A=O[2],C=ze((0,i.useDrag)((function(){return{type:c.DragItemTypes.EVENT_RESIZE,item:t,collect:function(e){return{isResizeDragging:e.isDragging()}},end:function(e,t){var n=t.getDropResult();n&&n.onEnd()}}}),[t]),3),I=C[0].isResizeDragging,T=C[1],_=C[2],M=(0,a.useCallback)((function(e){var t=e.currentTarget.getAttribute("data-event-id");t&&S({id:t})}),[S]),P=(0,a.useCallback)((function(e){if(t=e.target,null!=(n=HTMLElement)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n){var t,n,r=e.target.getAttribute("data-event-id");r&&S({id:r})}}),[S]),k=(0,d.useOnKeyPressHandler)(P),R=(0,a.useMemo)((function(){var e={viewStart:l,viewEnd:u,cellSize:y,start:t.data.start,end:t.data.end,line:v,lines:g};return x?(0,f.vJ)(e):(0,f.J7)(e)}),[t,y,v,g,x,u,l]),L=t.data.end>u,F=t.data.id===(null==m?void 0:m.id),z=t.data.id===c.EventCustomId.SELECTION,V=t.data.id===c.EventCustomId.NEW_EVENT;return(0,r.jsxs)("div",{tabIndex:0,"data-event-id":t.data.id,className:(0,h.B)(o,"absolute z-0 box-border h-4.5 shrink-0 cursor-pointer overflow-hidden","whitespace-nowrap border-l-4 border-solid text-cal-event-text",{"pointer-events-none":s||D||I||m&&!F&&!V,"opacity-75":z&&s||D||I,shadow:F||V}),style:R,onKeyDown:V?void 0:k,onClick:V?void 0:M,onMouseDown:d.stopPropagation,children:[(0,r.jsx)("div",{className:"relative z-[2] h-full w-full truncate py-0 pl-1 pr-0.5 text-sm/[1.7]",ref:N,children:(0,r.jsx)("span",{ref:w,children:n})}),!x&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:T,"data-after":"\xa0",className:(0,h.B)("absolute inset-x-0 bottom-0 z-[2] cursor-s-resize text-center after:content-[attr(data-after)]",{hidden:L})}),(0,r.jsx)("div",{ref:_,className:"invisible absolute p-2.5 opacity-0"})]}),(0,r.jsx)("div",{ref:A,className:"invisible absolute p-2.5 opacity-0"})]})};function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Be=function(e){var t,n,o,i=(t=e.item,n=e.header,o=(0,P.useLocalizationState)("language"),(0,a.useMemo)((function(){var e=t.data.title,a=H({allDay:t.data.allDay,startTime:t.data.start,endTime:t.data.end,locale:o}).from;return(0,r.jsxs)(r.Fragment,{children:[e||"",!n&&(e&&", ")+(0,d.removeSpaces)(a.time)]})}),[t,n,o]));return(0,r.jsx)(Ve,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ue(e,t,n[t])}))}return e}({title:i,className:"border-cal-event-border bg-cal-event-bg"},e))};function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var We=function(e){return(0,r.jsx)(Ve,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){He(e,t,n[t])}))}return e}({title:e.item.data.title,className:"border-l-cal-request-border bg-cal-request-bg"},e))},qe=function(e){var t=(0,P.useLocalizationState)("language");return(0,a.useMemo)((function(){var n=H({startTime:e.data.start,endTime:e.data.end,locale:t}).from.time.replace(/\s/g,"");return"".concat(n," ").concat(e.data.title)}),[e,t])};function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ke=function(e){var t=qe(e.item);return(0,r.jsx)(Ve,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ye(e,t,n[t])}))}return e}({title:t,className:"border-l-cal-shift-border bg-cal-shift-bg"},e))};function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ge(e,t,n[t])}))}return e}var Qe=function(e){switch(e.item.data.type){case I.t.REQUEST:return(0,r.jsx)(We,$e({},e));case I.t.SHIFT:return(0,r.jsx)(Ke,$e({},e));default:return(0,r.jsx)(Be,$e({},e))}},Xe=function(e){var t=e.cellSize,n=e.eventsByLine,a=e.isSelectionInProgress,o=e.selectedEvent,i=e.viewStart,l=e.viewEnd,u=e.isCommunicator;return(0,r.jsx)("div",{className:(0,h.B)("absolute inset-x-0 bottom-0 top-auto flex h-0 w-auto select-none flex-row flex-nowrap pl-[53px]",{"pl-[58px]":u}),children:n.map((function(e,u){return(0,r.jsx)("div",{className:"absolute",children:e.map((function(e){return(0,r.jsx)(Qe,{header:!0,item:e,viewStart:i,viewEnd:l,line:u,lines:n.length,isSelectionInProgress:a,selectedEvent:o,cellSize:t},e.data.id)}))},u)}))})},Ze=n(4915),Je=n(8269);function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nt=(0,a.memo)((function(e){var t=e.localTimezoneId,n=e.onSelectTimezone,o=e.recentTimezoneIds,i=e.allTimezones,l=e.className,u=e.text,c=e.ariaLabel,s=(0,d.useBoolean)(),f=s.value,m=s.setTrue,y=s.setFalse,p=s.toggle,v=tt((0,a.useState)(""),2),b=v[0],h=v[1],x=(0,P.useLocalizationState)().t.CALENDAR,w=(0,a.useRef)(null),S=(0,a.useRef)(null),j=(0,a.useCallback)((function(e,t){(0,d.stopPropagation)(e),"string"==typeof t.value&&n(t.value),y()}),[n,y]),E=(0,a.useCallback)((function(e){h(e.currentTarget.value)}),[]),O=(0,a.useMemo)((function(){return i.find((function(e){return e.id===t}))}),[t,i]),D=(0,a.useMemo)((function(){return o.reduce((function(e,t){var n=i.find((function(e){return e.id===t}));return n?e.concat(n):e}),[])}),[o,i]),N=(0,a.useMemo)((function(){if(b){var e=b.toLowerCase();return i.filter((function(t){return t.fullName.toLowerCase().includes(e)}))}return i}),[i,b]),A=(0,a.useCallback)((function(e){var t=function(e){if((0,Ze.isHTMLElement)(e)&&e.dataset.id&&"timezone-item"===e.dataset.element)return e.dataset.id}(e.target);t&&n(t)}),[n]);(0,d.useOutsideClick)({ref:S,handler:function(){return y()}}),(0,a.useEffect)((function(){var e;f&&(null===(e=w.current)||void 0===e||e.focus())}),[f]);var C=(0,a.useCallback)((function(e){if((0,Ze.isHTMLElement)(e.target))return" "===e.key||"Enter"===e.key?(e.preventDefault(),e.stopPropagation(),A(e),void p()):void(e.shiftKey&&"Tab"===e.key&&e.target===w.current&&y())}),[p,y,A]);return(0,d.useEscapeManager)(y,{enabled:f}),(0,r.jsx)("div",{ref:S,children:(0,r.jsx)(T.SmDropdown,{as:"a",href:"#",tabIndex:0,open:f,icon:!1,closeOnBlur:!1,openOnFocus:!1,className:l,onKeyDown:C,onOpen:m,onClose:y,text:u,"aria-label":c,"data-testid":"timezone-dropdown",children:(0,r.jsxs)(T.SmDropdown.Menu,{id:"timezone-content","data-testid":"timezone-content",className:"w-[340px]",open:f,onClick:d.stopPropagation,children:[(0,r.jsx)(g.SearchInput,{fluid:!0,clearable:!0,value:b,inputRef:w,className:"min-h-9.5 max-w-[324px] text-base","aria-label":x.aria_search_label(),icon:(0,r.jsx)("div",{className:"absolute right-0 top-0 m-0 h-full w-9.5",children:(0,r.jsx)(Je.IconSearch,{className:"h-full w-6"})}),onChange:E,placeholder:x.timezone_search_placeholder(),onClick:d.stopPropagation}),(0,r.jsxs)(T.SmDropdown.Menu,{scrolling:!0,"data-root-navigation-by-keys":!0,className:"max-h-90",children:[O&&!b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(at,{label:x.timezone_local_header()}),O&&(0,r.jsx)(rt,{id:O.id,fullName:O.fullName,highlight:b,onClick:j,onKeyDown:C})]}),D.length>0&&!b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(at,{label:x.timezone_recently_header()}),D.map((function(e){var t=e.id,n=e.fullName;return(0,r.jsx)(rt,{id:t,fullName:n,highlight:b,onClick:j,onKeyDown:C},t)}))]}),N.length>0&&(0,r.jsxs)(r.Fragment,{children:[!b&&(0,r.jsx)(at,{label:x.timezone_all_header()}),N.map((function(e){var t=e.id,n=e.fullName;return(0,r.jsx)(rt,{id:t,fullName:n,highlight:b,onClick:j,onKeyDown:C},t)}))]}),b&&!N.length&&(0,r.jsx)(at,{label:x.no_results_label()})]})]})})})})),rt=function(e){var t=e.id,n=e.fullName,a=e.onClick,o=e.onKeyDown,i=e.highlight;return(0,r.jsx)(T.SmDropdown.Item,{value:t,"data-id":t,"data-testid":t,"aria-label":t,tabIndex:0,"data-element":"timezone-item",className:"cursor-pointer text-base leading-[28px]",onClick:a,onKeyDown:o,children:(0,g.highlighted)({highlight:i,text:n})},t)},at=function(e){var t=e.label;return(0,r.jsx)(T.SmDropdown.Header,{className:"align-middle text-base normal-case leading-[28px]",children:t})};function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function it(e){return function(e){if(Array.isArray(e))return ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var lt=(0,a.memo)((function(){var e=(0,s.useTimezonesState)(),t=e.allTimezones,n=e.localTimezone,o=e.secondaryTimezone,i=e.recentSecondaryTimezones,l=(0,s.useTimezonesStateMethods)().setSecondaryTimezone,u=(0,P.useLocalizationState)().t.CALENDAR,c=(0,a.useCallback)((function(e){var t=it(i);if(e!==n){var r=t.indexOf(e);t=-1===r?[e].concat(t).slice(0,3):t.splice(r,1).concat(t)}l({timezone:e,recentTimezones:t})}),[i,n,l]),d=o&&o!==n,m=(0,a.useMemo)((function(){var e;return(0,f.Ht)(null===(e=t.find((function(e){return e.id===o})))||void 0===e?void 0:e.fullName)}),[t,o]),y=d?u.timezone_local_secondary_title(n,o):u.timezone_local_title(n),p="".concat(u.aria_timezone_dropdown()," ").concat(y),v=d&&m?m:u.timezone_local_name();return(0,r.jsx)(nt,{text:v,ariaLabel:p,className:(0,h.B)("focus:outline first:[&>div]:truncate first:[&>div]:text-center first:[&>div]:align-middle","first:[&>div]:text-sm first:[&>div]:text-primary-legacy first:[&>div]:underline"),allTimezones:t,localTimezoneId:n,onSelectTimezone:c,recentTimezoneIds:i})}));function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ut(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var st=function(){var e=(0,u.useCalendarState)(["viewDate"]).viewDate,t=(0,u.useCalendarStateMethods)(),n=t.changeViewDate,r=t.changeView,o=ct((0,f.vN)(e,c.View.WEEK),1)[0];return(0,a.useCallback)((function(e){var t="object"==typeof e?Number(e):o+d.MS_IN_DAY*e;n(t),r(c.View.DAY)}),[o,n,r])};function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function yt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var vt=function(e){var t=e.children,n=e.start,a=e.dragInfo,o=e.onDrop,l=e.onHover,u=e.cellSize,s=yt(e,["children","start","dragInfo","onDrop","onHover","cellSize"]),d=pt((0,i.useDrop)((function(){return{accept:[c.DragItemTypes.HEADER_EVENT],hover:function(e,t){var r=t.getDifferenceFromInitialOffset();if(r){var o=(0,f.N)(e.data.start,n);if(a){var i=r.x,c=pt(u,1)[0],s=o+Math.round(i/c);s!==a.cell[0]&&l({item:a.item,cell:[s,0]})}else l({item:e,cell:[o,0]})}},drop:function(){return{onEnd:o}}}}),[n,a,u]),2)[1];return(0,r.jsx)("tbody",mt(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){dt(e,t,n[t])}))}return e}({ref:d},s),{children:t}))};function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gt=function(e){var t=e.start,n=e.dragInfo,o=e.daysAmount,i=e.selectionRange,l=e.cellSize,u=e.linesAmount,c=e.setSelectionRange,s=e.isCommunicator,m=e.isStartFromMonday,y=e.showWeekends,p=e.onDrop,v=e.onDropCellHover,b=(0,P.useLocalizationState)().t,g=(0,j.Xg)(),x=st(),w=(0,j.c)({short:!0,startsFromMonday:m,withoutWeekend:!y}),S=(0,j.Mo)(new Date(t)),E=(0,a.useMemo)((function(){return 1===o?[S]:w}),[o,S,w]),O=(0,a.useCallback)((function(e){return t+d.MS_IN_DAY*e}),[t]),D=(0,a.useCallback)((function(e){var t=O(e),n=Date.now();return t<n&&n-t<d.MS_IN_DAY}),[O]),N=(0,a.useCallback)((function(e){return new Date(t+d.MS_IN_DAY*e)}),[t]),A=(0,a.useCallback)((function(e){var t=e.currentTarget.getAttribute("data-i");if(t)return new Date(O(Number(t)))}),[O]),C=(0,a.useCallback)((function(e){var t=A(e);t&&c([t,new Date((0,f.x5)(t))])}),[A,c]),I=(0,a.useCallback)((function(e){var t=A(e);c((function(e){if(!t||!e)return e;var n=ht(e,2),r=n[0],a=n[1],o=t.getTime(),i=(0,f.x5)(t),l=r.getTime(),u=a.getTime();return o<l&&o<u?[new Date(Math.max(l,u)),t]:i>l&&i>u?[new Date(Math.min(l,u)),new Date(i)]:l<i?[new Date(r),new Date(i)]:[new Date(r),t]}))}),[A,c]),T=(0,a.useCallback)((function(e){x(Number(e))}),[x]),_=(0,a.useCallback)((function(e){var t=(0,f.x5)(Number(e));g({startTime:Number(e),endTime:Number(t)})}),[g]),M=(0,a.useCallback)((function(e){(0,Ze.isHTMLElement)(e.currentTarget)&&e.currentTarget.dataset.column&&T(e.currentTarget.dataset.column)}),[T]),k=(0,a.useCallback)((function(e){(0,Ze.isHTMLElement)(e.target)&&(e.target.dataset.day?_(e.target.dataset.day):e.target.dataset.column&&T(e.target.dataset.column))}),[_,T]),R=(0,d.useOnKeyPressHandler)(k),L=(0,a.useMemo)((function(){return{width:l[0],height:l[1]}}),[l]),F=(0,h.B)("relative border border-solid border-cal-border p-0","text-center text-sm uppercase text-cal-header-text no-underline","cursor-pointer select-none first:border-none first:normal-case");return(0,r.jsxs)("table",{className:"-mt-px h-full w-full table-fixed border-collapse border-spacing-0",children:[(0,r.jsxs)("thead",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:(0,h.B)("w-[52px]",{"w-[57px]":s})}),E.map((function(e){return(0,r.jsx)("th",{className:"text-sm uppercase text-cal-header-text",children:e},e)}))]}),(0,r.jsxs)("tr",{id:"row-header-days",children:[(0,r.jsx)("td",{className:"h-6 border-none"}),E.map((function(e,t){return(0,r.jsx)("td",{className:"h-6 border-none",tabIndex:0,"data-column":t,"data-element":"day-header-cell",onClick:M,onKeyDown:R,children:(0,r.jsx)("div",{className:"flex cursor-pointer justify-center",children:(0,r.jsx)("div",{className:(0,h.B)("flex h-5 w-5 select-none items-center justify-center text-sm text-primary-legacy",{"rounded-full bg-primary-legacy text-primary-contrast no-underline":D(t)}),children:N(t).getDate()})})},e)}))]})]}),(0,r.jsxs)(vt,{className:"overflow-auto",start:t,dragInfo:n,cellSize:l,onHover:v,onDrop:p,children:[(0,r.jsxs)("tr",{id:"row-all-day-cells",children:[(0,r.jsx)("td",{className:F,children:u<=1&&(0,r.jsx)(lt,{})}),E.map((function(e,t){return(0,r.jsx)("td",{tabIndex:0,"data-element":"all-day-cell","data-day":O(t),className:F,style:L,"data-i":t,onMouseDown:C,onKeyDown:R,onMouseOver:i?I:void 0,children:b.CALENDAR.all_day()},e)}))]}),u>1&&(0,r.jsx)(xt,{lines:u-1})]})]})},xt=function(e){var t=e.lines;return(0,r.jsx)(r.Fragment,{children:Array.from({length:t}).map((function(e,t,n){return(0,r.jsx)("tr",{className:"h-6",children:t===n.length-1&&(0,r.jsx)("td",{className:"border-none text-center",children:(0,r.jsx)(lt,{})})},t)}))})},wt=function(e){var t=e.start,n=e.events,o=e.isSelectionInProgress,i=e.selectedEvent,l=e.cellSize,u=e.isCommunicator;return(0,r.jsx)("div",{id:"day-events",className:(0,h.B)("absolute inset-x-0 top-0 flex h-0 w-auto select-none","flex-row flex-nowrap pl-[53px]",{"pl-[58px]":u}),children:n.map((function(e,n){var u=t+d.MS_IN_DAY*n,c=u+d.MS_IN_DAY;return(0,r.jsx)("div",{className:"relative flex-1",children:e.map((function(e,t){return(0,r.jsx)(a.Fragment,{children:e.map((function(t,n){return t.map((function(t){return(0,r.jsx)(Qe,{item:t,selectedEvent:i,isSelectionInProgress:o,viewStart:u,viewEnd:c,cellSize:l,line:n,lines:e.length},t.data.id)}))}))},t)}))},n)}))})};function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Ot(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return St(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return St(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Nt=o().forwardRef((function(e,t){var n=e.children,a=e.start,o=e.dragInfo,l=e.resizeInfo,u=e.onDrop,s=e.onResize,m=e.onHover,y=e.onEventResizeMove,p=e.cellSize,v=Ot(e,["children","start","dragInfo","resizeInfo","onDrop","onResize","onHover","onEventResizeMove","cellSize"]);return(0,Dt((0,i.useDrop)((function(){return{accept:[c.DragItemTypes.EVENT,c.DragItemTypes.EVENT_RESIZE],hover:function(e,t){var n=t.getItemType(),r=t.getDifferenceFromInitialOffset();if(r){var i=r.x,u=r.y,s=Dt(p,2),v=s[0],b=s[1];if(n===c.DragItemTypes.EVENT){var h=Dt((0,f.Cb)(e.data.start,a),2),g=h[0],x=h[1];if(o){var w=g+Math.round(i/v),S=x+Math.round(u/b);S<0&&(w-=Math.floor(-S/f.mB)+1,S+=f.mB),w===o.cell[0]&&S===o.cell[1]||m({item:o.item,cell:[w,S]})}else m({item:e,cell:[g,x]})}if(n===c.DragItemTypes.EVENT_RESIZE){var j=Math.round(i/v)*d.MS_IN_DAY+Math.round(u/b)*f.nv;l&&l.shift===j||y({item:(null==l?void 0:l.item)||e,shift:j})}}},drop:function(e,t){return t.getItemType()===c.DragItemTypes.EVENT?{onEnd:u}:{onEnd:s}}}}),[a,o,l,p]),2)[1])(t),(0,r.jsx)("div",Et(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){jt(e,t,n[t])}))}return e}({ref:t},v),{children:n}))})),At=o().memo((function(e){var t,n,o,i,l=e.isCommunicator,u=(t=(0,s.useTimezonesState)(),n=t.secondaryTimezone,o=t.localTimezone,i=t.allTimezones,(0,a.useMemo)((function(){var e,t=function(e){var t;return null===(t=i.find((function(t){return t.id===e})))||void 0===t?void 0:t.offset};if(!n)return 0;var r,a=null!==(e=t(n))&&void 0!==e?e:0;return((null!==(r=t(o))&&void 0!==r?r:0)-a)*d.MS_IN_MINUTE}),[i,o,n])),c=(0,P.useLocalizationState)().language,f=B({locale:c,timeZone:"UTC"}),m=f.h,y=f.hhmm,p=f.normalize,v=(0,a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0===e||e%2)return"";var n=d.MS_IN_HOUR*e/2,r=new Date(d.MS_IN_DAY+n-t),a=m.format(r);return new RegExp("AM|PM","i").test(a)?a.toUpperCase():p(y.format(r))}),[m,y,p]);return(0,r.jsx)("div",{className:(0,h.B)("w-[52px]",{"w-[57px]":l}),children:Array.from({length:48},(function(e,t){var n=0===t,a=v(t),o=u&&v(t,u);return(0,r.jsx)("div",{className:(0,h.B)("relative h-6 select-none border border-l-0 border-solid border-cal-border",{"border-b-0 border-t":n},{"odd:border-y-0 even:border-t-0":!n}),children:(0,r.jsxs)("div",{className:(0,h.B)("box-border whitespace-nowrap pr-1 text-right text-sm/[16px]","-translate-x-2 -translate-y-1/2 bg-white uppercase"),children:[a,!!o&&(0,r.jsx)("div",{className:"uppercase text-main-secondary",children:o})]})},t)}))})}));function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function It(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e){var t=e.getMinutes()%f.qc/f.qc*100;return{top:"".concat(t,"%")}}var _t=o().memo((function(){var e=It((0,a.useState)(Tt(new Date)),2),t=e[0],n=e[1];return(0,a.useEffect)((function(){var e=setInterval((function(){n(Tt(new Date))}),3e4);return function(){clearInterval(e)}}),[]),(0,r.jsx)("div",{className:"relative h-[calc(100%_+_2px)] w-[calc(100%_+_4px)]",children:(0,r.jsx)("div",{style:t,className:(0,h.B)("absolute top-0 z-[1] h-px w-full bg-cal-timeline","before:absolute before:block before:h-2 before:w-2","before:-translate-x-2 before:-translate-y-1/2 before:rounded-full before:bg-cal-timeline")})})}));function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var kt=function(e){var t=e.start,n=e.daysAmount,o=e.headerLinesAmount,i=e.cellSize,l=e.dragInfo,u=e.resizeInfo,c=e.isCommunicator,s=e.selectionRange,d=e.onEventDrop,m=e.onEventResize,y=e.onCellSizeChange,p=e.onCellMouseDown,v=e.onCellMouseOver,b=e.onDropCellHover,g=e.onEventResizeMove,x=(0,a.useRef)(null),w=(0,a.useCallback)((function(e){if(p&&(0,Ze.isHTMLDivElement)(e.target)){var n=e.target.closest("[data-cell]");if(n){var r=(0,f.DN)(n,t);r&&p(e,r)}}}),[p,t]),S=(0,a.useCallback)((function(e){if(v&&(0,Ze.isHTMLDivElement)(e.target)){var n=e.target.closest("[data-cell]");if(n){var r=(0,f.DN)(n,t);if(r){var a=f.qc;if(s)r<Pt(s,1)[0]&&(a=0);r.setMinutes(r.getMinutes()+a),v(e,r)}}}}),[v,t,s]);return(0,a.useLayoutEffect)((function(){var e,t=x.current,n=null==t?void 0:t.querySelector("[data-cell]:last-child");return n&&(e=new ResizeObserver((function(e){var t=Pt(e,1)[0].target.getBoundingClientRect(),n=t.width,r=t.height;y([n,r])})),e.observe(n)),function(){return e.disconnect()}}),[y]),(0,r.jsx)(Nt,{ref:x,className:(0,h.B)("m-0 h-full w-full",{"-mt-px":o<=1}),start:t,cellSize:i,dragInfo:l,resizeInfo:u,onDrop:d,onHover:b,onResize:m,onEventResizeMove:g,onMouseDown:w,onMouseOver:v&&S,children:(0,r.jsxs)("div",{id:"day-columns",className:"flex",children:[(0,r.jsx)(At,{isCommunicator:c}),Array.from({length:n}).map((function(e,n){return(0,r.jsx)("div",{"data-element":"day-column",tabIndex:-1,className:"grow",children:Array.from({length:f.mB},(function(e,a){var o=0===a,i=(0,h.B)("relative h-6 select-none","border border-l-0 border-solid border-cal-border",{"border-b-0 border-t":o},{"odd:border-y-0 even:border-t-0":!o});return(0,r.jsx)("div",{className:i,"data-cell":!0,"data-x":n,"data-y":a,children:(0,f.kd)((0,f.f1)(t,n,a))&&(0,r.jsx)(_t,{})},a)}))},n)}))]})})};function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ft=[0,0],zt=function(){var e=Lt((0,a.useState)(),2),t=e[0],n=e[1],o=Lt((0,a.useState)(),2),i=o[0],l=o[1],s=(0,d.useAsRef)(t),m=(0,d.useAsRef)(i),y=(0,u.useCalendarState)(["calendarFilters","selectedEvent","calendarEvents","timeoffRequests","shifts","view","viewDate","viewDaysAmount"]),p=y.calendarFilters,v=y.selectedEvent,b=y.calendarEvents,h=y.timeoffRequests,g=y.shifts,x=y.view,N=y.viewDate,A=y.viewDaysAmount,I=(0,u.useCalendarStateMethods)().closeEventForm,T=(0,S.useIsCommunicator)(),_=!1,M=!0,P=Lt((0,a.useState)(Ft),2),k=P[0],R=P[1],L=k[0]!==Ft[0]||k[1]!==Ft[1],F=Lt((0,a.useMemo)((function(){return(0,f.vN)(N,x,{weekStartsFromMonday:_,withoutWeekend:!1})}),[x,N,_,M]),2),z=F[0],V=F[1],U=(0,j.Xg)(),B=(0,u.useCalendarStateMethods)(),H=B.moveCalendarEvent,W=B.stretchCalendarEvent,q=B.updateSelectedEvent,Y=Lt(C(),2),K=Y[0],G=Y[1],$=(0,a.useRef)(null),Q=(0,d.usePrevious)(v),X=(0,a.useMemo)((function(){return(0,w.isEqual)(v,Q)}),[v,Q]);(0,a.useEffect)((function(){!t&&!i||X||(n(void 0),l(void 0))}),[t,i,X]);var Z=(0,a.useMemo)((function(){var e=void 0,n=v&&(0,f.Xk)(v);if(t){var r=t.item,a=r.type,o=r.data,l=b;if(a===c.EventType.NEW_EVENT&&n){var u=(0,f.qe)(o.start,t,z);n=(0,f.sp)(o,u)}else l=b.map((function(e){if(e.id===o.id){var n=(0,f.qe)(e.start,t,z);return(0,f.sp)(e,n)}return e}));e=(0,f.eR)(l,n,K)}if(i){var s=i.item,d=s.type,m=s.data,y=i.shift,x=b;d===c.EventType.NEW_EVENT&&n?n=(0,f.kM)(m,y):x=b.map((function(e){return e.id===m.id?(0,f.kM)(e,y):e})),e=(0,f.eR)(x,n,K)}return e=e||(0,f.eR)(b,n,K),p[c.DefaultCalendars.REQUESTS]&&(e=(0,f.hY)(e,h)),p[c.DefaultCalendars.SHIFTS]&&(e=(0,f.rY)(e,g)),e}),[p,b,h,g,t,i,z,v,K]),J=(0,a.useCallback)((function(){if(s.current&&s.current.item){var e=s.current.item;if(e.type===c.EventType.EVENT){var t=e.data.id,r=b.find((function(e){return e.id===t}));if(r){var a=(0,f.qe)(r.start,s.current,z);H(t,a)}n(void 0)}if(e.type===c.EventType.NEW_EVENT){var o=(0,f.qe)(e.data.start,s.current,z);q({startTime:e.data.start+o,endTime:e.data.end+o})}}}),[b,s,H,z,q]),ee=(0,a.useCallback)((function(){if(m.current&&m.current.item){var e=m.current.item,t=m.current.shift;if(e.type===c.EventType.EVENT&&(W(e.data.id,t),l(void 0)),e.type===c.EventType.NEW_EVENT){var n=[e.data.start,e.data.end],r=n[0],a=n[1],o=a-r,i=Lt(t<0&&Math.abs(t)>o?[a+t,r]:[r,a+t],2),u=i[0],s=i[1];q({startTime:u,endTime:s})}}}),[m,W,q]),te=(0,a.useCallback)((function(e,t){v?I():G([t,t])}),[G,v,I]),ne=(0,a.useCallback)((function(e,t){G((function(e){return e?[e[0],t]:e}))}),[G]),re=(0,a.useCallback)((function(){if(K){var e=Lt((0,f.TF)(K),2),t=e[0],n=e[1],r=t!==n?n:(0,f.LU)(t);U({startTime:Number(t),endTime:Number(r)})}}),[U,K]);(0,d.useEventListener)("mouseup",re),(0,a.useEffect)((function(){if(L){var e=$.current,t=12*k[1];e&&(e.scrollTop=t)}}),[L]);var ae=(0,a.useMemo)((function(){return[k[0],24]}),[k]),oe=(0,a.useMemo)((function(){return A}),[A,M]),ie=Lt(E({start:z,events:Z,daysAmount:oe}),2),le=ie[0],ue=ie[1],ce=function(e){var t=e.daysAmount,n=e.start,r=e.events,o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).withinOneDay;return(0,a.useMemo)((function(){var e=O({daysAmount:t,start:n,events:r});return Array.from({length:t}).map((function(t,n){var r=[];return e[n].forEach((function(e){var t=!e.data.allDay&&(0,f.G5)(e.data.start,e.data.end);if(!(!o&&t||o&&!t))if(e.type!==c.EventType.OCCUPIED){var n=r.findIndex((function(t){return(0,w.flatten)(t).some((function(t){return D(e,t)}))}));if(-1===n)return n=r.length,r.push([]),void r[n].push([e]);var a=r[n].findIndex((function(t){return t.every((function(t){return!D(e,t)}))}));-1===a&&(a=r[n].length,r[n].push([])),r[n][a].push(e)}else{var i=r.length-1,l=r[i].length-1;r[i][l].push(e)}})),r}))}),[t,r,n,o])}({start:z,events:Z,daysAmount:oe},{withinOneDay:!0});return(0,r.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,r.jsxs)("div",{className:"relative flex-none pr-2.5",children:[(0,r.jsx)(gt,{start:z,dragInfo:t,daysAmount:oe,selectionRange:K,setSelectionRange:G,cellSize:ae,linesAmount:ue,isCommunicator:T,isStartFromMonday:_,showWeekends:M,onDrop:J,onDropCellHover:n}),(0,r.jsx)(Xe,{viewStart:z,viewEnd:V,cellSize:ae,selectedEvent:v,isSelectionInProgress:Boolean(K),eventsByLine:le,isCommunicator:T})]}),(0,r.jsx)("div",{className:"relative flex-1",children:(0,r.jsxs)("div",{className:"absolute left-0 top-0 h-full w-full overflow-y-auto overflow-x-hidden",ref:$,children:[(0,r.jsx)(kt,{start:z,daysAmount:oe,headerLinesAmount:ue,cellSize:k,isCommunicator:T,selectionRange:K,onCellSizeChange:R,onCellMouseDown:te,onCellMouseOver:K?ne:void 0,dragInfo:t,resizeInfo:i,onEventDrop:J,onEventResize:ee,onDropCellHover:n,onEventResizeMove:l}),(0,r.jsx)(wt,{start:z,cellSize:k,events:ce,selectedEvent:v,isSelectionInProgress:Boolean(K),isCommunicator:T})]})})]})},Vt=o().memo((function(){return(0,r.jsx)("div",{className:(0,h.B)("relative mx-0 my-0.5 box-border self-start","z-[1] h-4.5 cursor-auto border-none bg-transparent text-transparent",'mt-0.5 after:inline-block after:content-["_"]',"after:h-4.5 after:leading-[18px]")})})),Ut=function(e){var t=(0,P.useLocalizationState)("language");return(0,a.useMemo)((function(){var n=e.data.allDay||e.lastsDays>1,a=function(e,t){return(e.type===c.EventType.EVENT||e.type===c.EventType.NEW_EVENT)&&e.data.id!==c.EventCustomId.SELECTION&&!t}(e,n),o=H({startTime:e.data.start,locale:t}).from.time.replace(/\s/g,"");return(0,r.jsxs)(r.Fragment,{children:[a&&(0,r.jsx)("span",{children:(0,d.removeSpaces)(o)+" "}),(0,r.jsx)("span",{children:e.data.title})]})}),[e,t])};function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var qt=function(e){var t,n=e.item,o=e.title,l=e.dayOfWeek,u=e.className,s=e.classNameAllDay,m=e.dragInfo,y=e.onDragStart,p=e.showOccupied,v=void 0!==p&&p,b=e.selectedEvent,g=e.isSelectionInProgress,x=void 0!==g&&g,w=e.showInModal,S=void 0!==w&&w,E=(0,j.Xg)(),O=Wt((0,i.useDrag)((function(){return{type:c.DragItemTypes.EVENT,item:n,collect:function(e){return{isDragging:e.isDragging()}}}}),[n]),2),D=O[0].isDragging,N=O[1],A=(0,a.useCallback)((function(){n.type!==c.EventType.EVENT&&n.type!==c.EventType.OCCUPIED||n.data.id===c.EventCustomId.SELECTION||E({id:n.data.id})}),[n,E]),C=(0,a.useCallback)((function(e){e.stopPropagation();var t=S?new Date(n.data.start):(0,f.MH)(e.pageX,e.pageY);t&&y(t)}),[n,y,S]),I=(0,d.useOnKeyPressHandler)(A),T=n.data,_=n.lastsDays,M=v?1:(0,f.XT)(_,l),P={width:S||(v?_>1:M<_)?"calc(100% * ".concat(M,")"):"calc(100% * ".concat(M," - 16px + ").concat(M-1,"px)")},k=m&&"data"in m.item?null==m?void 0:m.item.data:null,R=T.allDay||_>1,L=(null==b?void 0:b.id)===T.id||T.id===c.EventType.NEW_EVENT,F=n.type===c.EventType.OCCUPIED&&!S,z=(0,h.B)("relative z-[2] box-border cursor-pointer self-start overflow-hidden whitespace-nowrap text-sm","mx-0 my-0.5 border-l-4 border-solid text-cal-event-text","ease transition-all duration-300",u,(Ht(t={},s||"",R||F),Ht(t,"!border-l-0",F),Ht(t,"shadow",L||T.id===c.EventCustomId.SELECTION),Ht(t,"invisible",D||T.id===(null==k?void 0:k.id)),Ht(t,"pointer-events-none",m||T.id===c.EventCustomId.SELECTION&&x||b&&!L),t));return(0,r.jsx)("div",{ref:x?void 0:N,tabIndex:0,"data-event-id":n.data.id,className:z,style:P,onClick:A,onMouseDown:C,onKeyDown:I,children:(0,r.jsx)("div",{className:"h-4.5 select-none truncate px-[3px] py-0 leading-[18px]",children:o})})};function Yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kt=function(e){var t=Ut(e.item);return(0,r.jsx)(qt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Yt(e,t,n[t])}))}return e}({title:t,className:"border-l-cal-event-border bg-cal-event-bg",classNameAllDay:"!border-l-cal-day-event-border !bg-cal-day-event-bg"},e))};function Gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $t=function(e){return(0,r.jsx)(qt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Gt(e,t,n[t])}))}return e}({title:e.item.data.title,className:"border-l-cal-request-border bg-cal-request-bg"},e))};function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xt=function(e){var t=qe(e.item);return(0,r.jsx)(qt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Qt(e,t,n[t])}))}return e}({title:t,className:"border-l-cal-shift-border bg-cal-shift-bg"},e))};function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Zt(e,t,n[t])}))}return e}function en(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var tn=function(e){var t=e.item,n=en(e,["item"]);if(t.type===c.EventType.EVENT||t.type===c.EventType.NEW_EVENT||t.type===c.EventType.OCCUPIED&&(0===n.dayOfWeek||n.showOccupied))switch(t.data.type){case I.t.REQUEST:return(0,r.jsx)($t,Jt({item:t},n));case I.t.SHIFT:return(0,r.jsx)(Xt,Jt({item:t},n));default:return(0,r.jsx)(Kt,Jt({item:t},n))}return(0,r.jsx)(Vt,{})},nn=function(e){var t=e.day,n=e.events,o=e.selectedEvent,i=e.dragInfo,l=e.dayOfWeek,u=e.onDragStart,s=e.onEventFormClose,f=e.onClose,m=(0,P.useLocalizationState)().t,y=(0,j.Gz)(t),p=(0,j.Mo)(t),v=(0,a.useMemo)((function(){return function(e,t,n){return"".concat(n,", ").concat(t," ").concat(e.getDate())}(t,y,p)}),[t,y,p]),b=(0,a.useCallback)((function(e){e.stopPropagation(),o&&s()}),[o,s]),h=(0,a.useMemo)((function(){return n.filter((function(e){return e.type!==c.EventType.EMPTY}))}),[n]);return(0,r.jsxs)("div",{onMouseDown:b,onMouseOver:d.stopPropagation,onMouseUp:d.stopPropagation,children:[(0,r.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,r.jsx)("div",{className:"my-0 ml-0 mr-4 whitespace-nowrap text-lg/[23px]",children:v}),(0,r.jsx)(g.SemanticButton,{className:"m-0 h-6 w-6 border-none p-0 shadow-none",basic:!0,icon:"close",tooltip:m.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonClose(),size:"large",onClick:f})]}),(0,r.jsx)("div",{className:"mt-4",children:h.map((function(e,t){return(0,r.jsx)(tn,{item:e,selectedEvent:o,dayOfWeek:l,dragInfo:i,onDragStart:u,showOccupied:!0,showInModal:!0},t)}))})]})};var rn=function(e){var t=e.children,n=e.day,o=e.events,i=e.selectedEvent,l=e.dragInfo,u=e.onDragStart,c=e.onEventFormClose,s=e.dayOfWeek,f=(0,a.useRef)(null),m=(0,d.useBoolean)(),y=m.value,p=m.toggle,v=m.setFalse;return(0,r.jsx)("div",{ref:f,className:"w-full [&>div>div]:!transform-none",children:(0,r.jsx)(g.Popup,{show:y,mountNode:f.current,placement:"top",contentClassName:(0,h.B)("z-[3] mt-px min-w-full rounded border-[#ddd]",{"pointer-events-none opacity-30":l}),onClickOutside:v,content:(0,r.jsx)(nn,{day:n,events:o,selectedEvent:i,onEventFormClose:c,onClose:v,dragInfo:l,dayOfWeek:s,onDragStart:u}),children:t({toggle:p})})})},an=function(e){var t=e.eventsCount,n=e.onClick,a=(0,P.useLocalizationState)().t;return(0,r.jsx)("button",{className:(0,h.B)("relative z-[2] self-start overflow-hidden whitespace-nowrap text-sm/[14px]","ease mt-0.5 box-border px-2 py-0.5 no-underline transition-all duration-300","h-4.5 w-[calc(100%-16px)] bg-cal-light-bg","cursor-pointer select-none text-cal-dark-text hover:underline"),onClick:n,onMouseDown:d.stopPropagation,children:a.CALENDAR.more(t.toString())})};function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||cn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(e){return function(e){if(Array.isArray(e))return on(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){if(e){if("string"==typeof e)return on(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?on(e,t):void 0}}var sn=[],fn=function(e){var t=e.day,n=e.dayOfWeek,o=e.dragInfo,l=e.dragStartDate,u=e.onDragStart,s=e.eventsByDate,m=e.itemsInCell,y=e.onCellMouseDown,p=e.onCellMouseOver,v=e.onCellKeyPress,b=e.onDrop,g=e.onDropCellHover,x=e.onEventFormClose,w=e.weekOfMonth,j=e.selectedEvent,E=e.selectionRange,O=e.isOtherMonth,D=s[(0,f.gB)(t)]||sn,N=(0,S.useIsCommunicator)(),A=st(),C=ln((0,i.useDrop)((function(){return{accept:c.DragItemTypes.EVENT,hover:function(e){var t=[w,n];o&&o.item.data.id===e.data.id&&o.cell[0]===t[0]&&o.cell[1]===t[1]||g({cell:t,item:e})},collect:function(e){return{isDragging:!!e.getItem()}},drop:b}}),[o]),2),I=C[0].isDragging,T=C[1],_=ln((0,f.bh)(D,m,s),2),M=_[0],P=_[1],k=(0,a.useMemo)((function(){return un(D).sort((function(e,t){var n=e.type===c.EventType.NEW_EVENT,r=t.type===c.EventType.NEW_EVENT;return Number(r)-Number(n)})).slice(0,M?m-1:m)}),[D,M,m]),R=(0,a.useCallback)((function(e){y(e,t)}),[t,y]),L=(0,a.useCallback)((function(e){p(e,t)}),[t,p]),F=(0,a.useCallback)((function(){A(t)}),[t,A]),z=(0,a.useCallback)((function(e){(0,Ze.isHTMLDivElement)(e.target)&&"month-cell"===e.target.dataset.element&&v(t)}),[v,t]),V=(0,d.useOnKeyPressHandler)(z),U=(0,d.useOnKeyPressHandler)(F),B=!!E,H=E||(0,f.pl)(j),W=H&&(0,f.Sx)(t,H),q=o&&(0,f.PG)(w,n,o,l);return(0,r.jsx)("div",{tabIndex:0,"data-element":"month-cell","data-day":Number(t),className:(0,h.B)("h-full",{"bg-[#bce8f1]":!I&&!o&&W||q}),ref:T,onMouseDown:R,onMouseOver:B?L:void 0,onKeyDown:V,children:(0,r.jsxs)("div",{className:"absolute left-0 top-0 flex h-full w-full flex-col items-stretch",children:[(0,r.jsx)("div",{className:(0,h.B)("flex justify-start px-4 py-1",{"justify-end p-0.5":N}),children:(0,r.jsx)("button",{onClick:F,onMouseDown:d.stopPropagation,onMouseOver:d.stopPropagation,onMouseUp:d.stopPropagation,onKeyDown:U,className:(0,h.B)("flex h-6 w-6 select-none items-center justify-center text-base text-primary-legacy",{"rounded-full bg-primary-legacy text-primary-contrast":(0,d.isToday)(t),"h-5 w-5 text-sm underline":N,"pointer-events-none":B||j,"opacity-50":O}),children:t.getDate()})}),(0,r.jsxs)("div",{id:"month-events-container",className:"flex shrink grow basis-full flex-col items-center justify-start",children:[k.map((function(e,t){return(0,r.jsx)(tn,{item:e,selectedEvent:j,dayOfWeek:n,dragInfo:o,onDragStart:u,isSelectionInProgress:B},t)})),M&&(0,r.jsx)(rn,{events:D,selectedEvent:j,onEventFormClose:x,day:t,dayOfWeek:n,onDragStart:u,children:function(e){var t=e.toggle;return(0,r.jsx)(an,{eventsCount:P,onClick:t})}})]})]})})};function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var yn=o().memo((function(e){var t=e.itemsInCell,n=e.isStartFromMonday,o=e.showWeekends,i=mn((0,a.useState)(),2),l=i[0],s=i[1],m=mn((0,a.useState)(),2),y=m[0],p=m[1],v=(0,u.useCalendarState)(["viewDate","calendarFilters","calendarEvents","selectedEvent","timeoffRequests","shifts"]),b=v.viewDate,h=v.calendarFilters,g=v.calendarEvents,x=v.selectedEvent,S=v.timeoffRequests,E=v.shifts,O=(0,u.useCalendarStateMethods)(),D=O.moveCalendarEvent,N=O.resetEventForm,A=O.closeEventForm,I=O.updateSelectedEvent,T=(0,j.Xg)(),_=mn(C(),2),M=_[0],P=_[1],k=mn((0,f.vN)(b,c.View.MONTH,{expand:!0,weekStartsFromMonday:n}).map((function(e){return new Date(e)})),1)[0],R=(0,a.useMemo)((function(){return(0,f.Rn)(b)}),[b]),L=(0,a.useMemo)((function(){return(0,f.ly)({startsFromMonday:n,withoutWeekend:!o})}),[n,o]),F=(0,a.useMemo)((function(){var e=x&&(0,f.Xk)(x),t=M&&(0,f.N2)(M),n=(0,f.eR)(g,e,t);return h[c.DefaultCalendars.REQUESTS]&&(n=(0,f.hY)(n,S)),h[c.DefaultCalendars.SHIFTS]&&(n=(0,f.rY)(n,E)),n}),[g,S,E,x,M,h]),z=(0,d.usePrevious)(x),V=(0,a.useMemo)((function(){return(0,w.isEqual)(x,z)}),[x,z]);(0,a.useEffect)((function(){l&&!V&&(s(void 0),p(void 0))}),[l,V]);var U=(0,a.useCallback)((function(){if(l&&y){var e=l.item.data,t=e.id,n=e.start,r=e.end,a=(0,f.lN)(k,l.cell[0],l.cell[1]),o=((0,f.cr)(y,a)-1)*d.MS_IN_DAY*(y<a?1:-1);t===c.EventCustomId.NEW_EVENT?I({startTime:new Date(n+o).getTime(),endTime:new Date(r+o).getTime()}):(D(t,o),s(void 0),p(void 0))}}),[l,y,k,D,I]),B=(0,a.useCallback)((function(e,t){x?A():P([t,t])}),[x,P,A]),H=(0,a.useCallback)((function(e,t){P((function(e){return e?[e[0],t]:e}))}),[P]),W=(0,a.useCallback)((function(e){if(M){var t=mn((0,f.N2)(M,F),2),n=t[0],r=t[1];T({startTime:Number(n),endTime:Number(r)})}}),[T,M,F]);(0,d.useEventListener)("mouseup",W);var q=(0,a.useCallback)((function(e){T((0,f.IX)(e))}),[T]);return(0,r.jsx)("div",{className:"relative flex-1",children:(0,r.jsx)("div",{className:"absolute left-0 top-0 h-full w-full overflow-y-auto overflow-x-hidden",children:(0,r.jsx)("table",{className:"-mt-px h-full w-full table-fixed border-collapse border-spacing-0",children:(0,r.jsx)("tbody",{id:"month-content","data-root-navigation-by-keys":!0,className:"overflow-auto",children:Array.from({length:R},(function(e,n){return(0,r.jsx)("tr",{children:L.map((function(e){var a=(0,f.lN)(k,n,e);return(0,r.jsx)("td",{className:"relative border border-solid border-cal-border p-0",children:(0,r.jsx)(fn,{day:a,isOtherMonth:!(0,d.areSameMonths)(a,new Date(b)),selectedEvent:x,weekOfMonth:n,dayOfWeek:e,eventsByDate:F,itemsInCell:t,dragInfo:l,dragStartDate:y,onDragStart:p,onDropCellHover:s,onDrop:U,onEventFormClose:N,selectionRange:M,onCellMouseDown:B,onCellMouseOver:H,onCellKeyPress:q})},e)}))},n)}))})})})})})),pn=o().memo((function(e){var t=e.isCommunicator,n=e.isStartFromMonday,a=e.showWeekends,o=(0,j.c)(t?{oneLetter:!0,startsFromMonday:n,withoutWeekend:!a}:{short:!0,startsFromMonday:n,withoutWeekend:!a});return(0,r.jsx)("div",{className:"relative flex-none",children:(0,r.jsx)("table",{className:"-mt-px h-full w-full table-fixed border-collapse border-spacing-0",children:(0,r.jsx)("thead",{className:"border-b border-solid border-b-cal-border",children:(0,r.jsx)("tr",{children:o.map((function(e,n){return(0,r.jsx)("th",{className:(0,h.B)("h-11 text-center text-sm font-bold uppercase text-cal-header-text",{"h-5 border-none":t}),children:e},"".concat(e,"_").concat(n))}))})})})})}));function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var hn,gn=o().memo((function(){var e=(0,a.useRef)(null),t=bn((0,a.useState)(1),2),n=t[0],o=t[1],i=(0,S.useIsCommunicator)(),l=(0,d.useResizeObserver)(e),u=null==l?void 0:l.contentRect.height,c=(0,d.usePrevious)(u),s=(0,a.useCallback)((function(){var e=document.getElementById("month-events-container");if(e){var t=e.offsetHeight,n=Math.floor(t/22);o(n)}}),[]);return(0,a.useLayoutEffect)((function(){s()}),[s]),(0,a.useEffect)((function(){u!==c&&s()}),[u,c,s]),(0,r.jsxs)("div",{className:"flex flex-1 flex-col",ref:e,children:[(0,r.jsx)(pn,{isCommunicator:i,isStartFromMonday:false,showWeekends:true}),(0,r.jsx)(yn,{itemsInCell:n,isStartFromMonday:false,showWeekends:true})]})})),xn=n(4173),wn=function(e){var t=e.event,n=e.selected,o=(0,P.useLocalizationState)(),i=o.t,l=o.language,u=(0,j.Xg)(),c=(0,a.useCallback)((function(){u({id:t.id})}),[t.id,u]),s=(0,d.useOnKeyPressHandler)(c),f=H({allDay:t.allDay,allDayMessage:i.CALENDAR.all_day(),startTime:t.start,endTime:t.end,locale:l}).from;return(0,r.jsxs)("div",{tabIndex:0,"data-event-id":t.id,onKeyDown:s,className:(0,h.B)("mb-1 cursor-pointer px-1 py-0.5","text-sm/[16px] text-cal-event-text","border-l-4 border-solid border-l-cal-event-border bg-cal-event-bg",{"border-l-cal-day-event-border bg-cal-day-event-bg":t.allDay,shadow:n}),onClick:c,children:[(0,r.jsx)("div",{children:t.title}),(0,r.jsx)("div",{children:f.time})]})},Sn=function(e){var t=e.row,n=e.cellStyles,o=e.selected,i=e.isCommunicator,l=(0,j.HI)({short:!0}),u=(0,a.useMemo)((function(){var e=new Date(t.date),n=e.getMonth(),r=l[n],a=e.toLocaleDateString("en",{weekday:"short"});return"".concat(r,", ").concat(a)}),[t.date,l]),c=new Date(t.date).getDate(),s=(0,d.isToday)(new Date(t.date));return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:n,children:t.isFirstEventInCurrentDay&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:(0,h.B)("text-center text-xs font-bold uppercase text-cal-header-text",{"-translate-x-1":i}),children:u}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("div",{className:(0,h.B)("text-sm no-underline",{"text-black":!s}),children:(0,r.jsx)("div",{className:(0,h.B)("flex h-5 w-5 select-none items-center justify-center text-sm text-primary-legacy",{"rounded-full bg-primary-legacy text-primary-contrast no-underline":s,"-translate-x-1":i}),children:c})})})]})}),(0,r.jsx)("td",{className:n,children:(0,r.jsx)(wn,{event:t.event,selected:o})})]})},jn=function(e){var t=e.row,n=e.cellStyles,o=e.isCommunicator,i=(0,j.HI)({short:!0}),l=(0,a.useMemo)((function(){var e=new Date(t.date),n=e.getDate(),r=e.getMonth(),a=i[r],o=new Date(e.getFullYear(),e.getMonth(),n+7),l=o.getDate(),u=o.getMonth(),c=i[u],s=a!==c;return"".concat(a," ").concat(n,"-").concat(s?"".concat(c," "):"").concat(l)}),[t.date,i]);return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:n}),(0,r.jsx)("td",{className:n,children:(0,r.jsx)("div",{className:(0,h.B)("text-xs font-bold uppercase text-cal-header-text",{"-translate-x-1":o}),children:l})})]})};!function(e){e.EVENT="EVENT",e.WEEK_TITLE="WEEK_TITLE"}(hn||(hn={}));var En=function(e){var t=e.row,n=e.selectedEvent,a=e.isCommunicator,o="relative h-[34px] p-0 no-underline first:w-[79px]";switch(t.type){case"EVENT":return(0,r.jsx)(Sn,{row:t,cellStyles:o,selected:t.event.id===(null==n?void 0:n.id),isCommunicator:a});case"WEEK_TITLE":return(0,r.jsx)(jn,{row:t,cellStyles:o,isCommunicator:a});default:return null}};function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return On(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var An=function(e){var t=e.tableRows,n=Nn((0,a.useState)(0),2),o=n[0],i=n[1],l=(0,a.useMemo)((function(){return{top:o}}),[o]);return(0,a.useEffect)((function(){var e=function(){return i((e=new Date,n=t.findIndex((function(t){return t.date>=e.valueOf()})),t.slice(0,n).reduce((function(e,t){var n;return e+(Dn(n={},hn.EVENT,44),Dn(n,hn.WEEK_TITLE,34),n)[t.type]}),0)));var e,n},n=setInterval(e,3e4);return e(),function(){return clearInterval(n)}}),[t]),(0,r.jsx)("div",{className:(0,h.B)("absolute top-0 z-[1] h-px w-full bg-cal-timeline","before:absolute before:block before:h-2 before:w-2","before:-translate-x-2 before:-translate-y-1/2 before:rounded-full before:bg-cal-timeline"),style:l})};function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function In(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||_n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tn(e){return function(e){if(Array.isArray(e))return Cn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e,t){if(e){if("string"==typeof e)return Cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cn(e,t):void 0}}var Mn=o().memo((function(){var e=(0,u.useCalendarState)(["viewDate","calendarEvents","selectedEvent"]),t=e.viewDate,n=e.calendarEvents,o=e.selectedEvent,i=(0,S.useIsCommunicator)(),l=(0,a.useMemo)((function(){return n.reduce((function(e,t){return e.find((function(e){return e.id===t.id}))?e:Tn(e).concat([t])}),[])}),[n]),s=In((0,f.vN)(t,c.View.SCHEDULE),2),m=s[0],y=s[1],p=(0,a.useMemo)((function(){for(var e=function(){r%d.DAYS_IN_WEEK==0&&t.push({type:hn.WEEK_TITLE,uuid:(0,xn.uuid)(),date:n});var e=n+d.MS_IN_DAY-1,a=!0;l.forEach((function(r){var o,i;o=[r.start,r.end],i=[n,e],(o[0]>=i[0]&&o[0]<=i[1]||o[1]>=i[0]&&o[1]<=i[1]||i[0]>=o[0]&&i[0]<=o[1]||i[1]>=o[0]&&i[1]<=o[1])&&(t.push({type:hn.EVENT,uuid:(0,xn.uuid)(),event:r,isFirstEventInCurrentDay:a,date:n}),a=!1)})),r++,n=e+1},t=[],n=m,r=0;n<y;)e();return t}),[l,m,y]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("table",{className:"-mt-px h-full w-full table-fixed border-collapse border-spacing-0",children:(0,r.jsx)("tbody",{className:"overflow-auto",children:p.map((function(e){return(0,r.jsx)(En,{row:e,selectedEvent:o,isCommunicator:i},e.uuid)}))})}),(0,r.jsx)(An,{tableRows:p})]})})),Pn=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"h-5 border border-solid border-[#eaf0f4] bg-[#f5f6fa]"}),(0,r.jsx)("div",{className:"flex flex-1 flex-col",children:(0,r.jsx)("div",{className:"relative flex-1",children:(0,r.jsx)("div",{className:"absolute left-0 top-0 h-full w-full overflow-y-auto overflow-x-hidden pr-[3px]",children:(0,r.jsx)(Mn,{})})})})]})},kn=o().memo((function(){var e,t,n;!function(){var e=(0,u.useCalendarStateMethods)().getCalendarEvents,t=(0,u.useCalendarState)(["calendarOwnerUserId","viewDate","view"]),n=t.calendarOwnerUserId,r=t.viewDate,o=t.view,i=(0,s.useTimezonesState)().localTimezone,l=(0,d.usePreviousValue)(r),c=(0,d.usePreviousValue)(o),m=(0,d.useValueUpdated)(o),v=(0,a.useMemo)((function(){return(0,f.Rn)(r)}),[r]),b=(0,a.useMemo)((function(){if(!l)return!0;if(m&&c)return p.indexOf(c)>p.indexOf(o);if(l===r)return!1;var e=y((0,f.vN)(l,o),1)[0];return y((0,f.vN)(r,o),1)[0]!==e}),[l,m,c,r,o]);(0,a.useEffect)((function(){if(b){var t=y((0,f.vN)(r,o,{expand:7*v}),2),a=t[0],l=t[1];a&&l&&n&&e({user:n,start:a,end:l,timezone:i,defaultCalendarEventsIncluded:!0})}}),[n,i,r,v,e,b,o])}(),function(){var e=(0,u.useCalendarStateMethods)().getTimeoffRequests,t=(0,u.useCalendarState)(["calendarOwnerUserId","viewDate"]),n=t.calendarOwnerUserId,r=t.viewDate,o=(0,d.usePreviousValue)(r);(0,a.useEffect)((function(){if(!o){var t=b((0,f.vN)(r,c.View.MONTH),2),a=t[0],i=t[1];n&&e({userId:n,dateFrom:new Date(a).toISOString(),dateTo:new Date(i).toISOString()})}}),[n,r,o,e])}(),e=(0,u.useCalendarStateMethods)().getShifts,t=(0,u.useCalendarState)("calendarOwnerUserId"),n=(0,a.useRef)(!1),(0,a.useEffect)((function(){n.current||t&&(n.current=!0,e(t))}),[n,t,e]);var o=(0,u.useCalendarState)(["view","calendarEventsLoading"]),m=o.view,v=o.calendarEventsLoading;return(0,r.jsx)(i.DndProvider,{backend:l.HTML5Backend,children:(0,r.jsxs)("div",{className:"relative flex flex-1 flex-col",children:[m===c.View.MONTH&&(0,r.jsx)(gn,{}),(m===c.View.WEEK||m===c.View.DAY)&&(0,r.jsx)(zt,{}),m===c.View.SCHEDULE&&(0,r.jsx)(Pn,{}),v&&(0,r.jsx)(x,{})]})})}));function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ln=(0,a.memo)((function(e){var t=e.defaultValues,n=e.isNewEvent,o=e.editing,i=e.deleting,l=e.saving,c=e.onDelete,s=e.isCommunicator,f=(0,P.useLocalizationState)().t.CALENDAR_EVENT_FORM,d=(0,u.useCalendarStateMethods)(),m=d.closeEventForm,y=d.editSelectedEvent,p=(0,a.useCallback)((function(){return m()}),[m]),v=(0,a.useCallback)((function(){return y()}),[y]),b=(0,a.useMemo)((function(){return(0,r.jsx)(g.SemanticButton,{type:"submit",color:"blue","aria-label":f.aria_event_save_label(),content:f.button_save_text(),loading:l,disabled:i})}),[f,l,i]),x=(0,a.useMemo)((function(){return(0,r.jsx)(g.SemanticButton,{type:"button",basic:!0,"aria-label":f.aria_event_edit_label(),content:f.button_edit_text(),enabledInOffline:!0,disabled:i,onClick:v})}),[f,i,v]),w=(0,a.useMemo)((function(){return(0,r.jsx)(g.SemanticButton,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Rn(e,t,n[t])}))}return e}({type:"button",onClick:p,"aria-label":f.aria_event_cancel_label()},s?{basic:!0,content:f.button_cancel_text(),disabled:l||i}:{className:"flex h-auto items-center bg-transparent p-1",size:"large",icon:"times"}))}),[f,l,i,p,s]),S=(0,a.useMemo)((function(){return(0,r.jsx)(g.SemanticButton,{type:"button",basic:!0,className:(0,h.B)({"px-[11px] py-[7px]":!s}),"aria-label":f.aria_event_delete_label(),onClick:c,loading:i,disabled:l,children:s?f.button_delete_text():(0,r.jsx)(Je.IconTrash,{className:(0,h.B)("h-4.5 w-3.5",{"opacity-0":i})})})}),[f,l,i,c,s]);return s?(0,r.jsxs)("div",{className:"flex items-center justify-end pb-4",children:[!o&&(0,r.jsx)(T.SmHeader,{as:"h3",className:"m-0",children:t.title}),o&&!n&&(0,r.jsxs)(r.Fragment,{children:[w,b]}),(0,r.jsxs)("div",{className:"flex grow-[2] justify-end last:!mr-0",children:[n&&w,n&&b,!o&&x,!n&&S]})]}):(0,r.jsxs)("div",{className:"flex items-center justify-end pb-4",children:[w,(0,r.jsxs)("div",{className:"flex grow-[2] justify-end",children:[o&&b,!o&&x,!n&&S]})]})})),Fn=function(e){var t=e.form,n=e.event,o=e.onClose,i=(0,S.useIsCommunicator)(),l=(0,u.useCalendarState)(["eventEditing","eventSaving","eventDeleting","calendarEventDetailsLoading"]),c=l.eventEditing,s=l.eventSaving,d=l.eventDeleting,m=l.calendarEventDetailsLoading,y=function(e,t){var n=R((0,a.useState)(!1),2),r=n[0],o=n[1];return(0,a.useEffect)((function(){var n=(0,f.O4)(t);return e.reset(n),o(!0),function(){e.reset({})}}),[]),r}(t,n);te(t,n);var p=function(e,t){var n=Z((0,a.useState)(),2),r=n[0],o=n[1],i=Z((0,a.useState)(),2),l=i[0],c=i[1],s=(0,u.useCalendarState)(["selectedEvent","eventSaving","eventDeleting"]),f=s.selectedEvent,d=s.eventSaving,m=s.eventDeleting;(0,F.assertDefined)(f);var y=(0,u.useCalendarStateMethods)(),p=y.resetEventForm,v=y.saveCalendarEventDetails,b=y.deleteCalendarEvent,h=(0,L.useModalsStateMethods)().openModal,g=(0,P.useLocalizationState)().t.CALENDAR_EVENT_FORM,x=(0,a.useCallback)((function(){o(void 0)}),[]),w=(0,a.useCallback)((function(){if(!d){c(void 0),o(void 0);var n=$(f,e.getValues());v(n).then((function(){p(),null==t||t()}),(function(){o("error")}))}}),[f,e,d,t,v,p]),S=(0,a.useCallback)((function(){m||((0,F.assertDefined)(f),c(void 0),o(void 0),h({actions:{ok:{action:function(){(0,F.assertDefined)(f.id),b(f.id).then((function(){p(),null==t||t()}),(function(){c("error")}))},title:g.delete_modal_ok()},cancel:{title:g.delete_modal_cancel()}},body:g.delete_modal_text(f.title),title:g.delete_modal_title()}))}),[f,b,m,g,t,h,p]);return{saveRequestResult:r,deleteRequestResult:l,clearDeleteResult:(0,a.useCallback)((function(){c(void 0)}),[]),clearSaveResult:x,handleDelete:S,handleSave:w}}(t,o),v=p.clearDeleteResult,b=p.clearSaveResult,x=p.handleDelete,w=p.handleSave,j=p.saveRequestResult,E=p.deleteRequestResult,O=(0,f.O4)(n),D=(0,f.wP)(n),N=D?n._temporaryId:n.id,A=N&&m[N];return(0,r.jsxs)("div",{className:(0,h.B)("relative h-full w-[308px] overflow-x-hidden py-0 pl-3 pr-4",{"mt-5 w-full overflow-y-auto p-0 text-left":i}),children:[A&&(0,r.jsx)("div",{className:"absolute inset-0 bg-white opacity-50",children:(0,r.jsx)(g.Loader,{active:!0,size:"medium"})}),!A&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Pe,{saveResult:j,clearSaveResult:b,deleteResult:E,clearDeleteResult:v}),(0,r.jsxs)(T.SmForm,{className:"overflow-hidden",onSubmit:t.handleSubmit(w),children:[(0,r.jsx)(Ln,{defaultValues:O,editing:c,saving:s,deleting:d,isNewEvent:D,onDelete:x,isCommunicator:i}),!c&&(0,r.jsx)(Le,{form:t,event:n,showTitle:!i}),c&&y&&(0,r.jsx)(Me,{form:t,event:n})]}),!1]})]})};function zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Hn=function(){var e,t,n,o=(0,S.useIsCommunicator)(),i=(0,u.useCalendarStateMethods)().changeViewDate,l=(0,P.useLocalizationState)().t,s=(0,j.Xg)(),m=function(){var e=(0,u.useCalendarState)(["viewDate","view"]),t=e.viewDate,n=e.view,r=(0,u.useCalendarStateMethods)().changeViewDate;return(0,a.useCallback)((function(e){var a=Bn((0,f.vN)(t,n),1)[0],o=new Date(a);switch(n){case c.View.MONTH:var i=o.getFullYear(),l=o.getMonth();o.setFullYear(i,l+(e?1:-1),1),r(Number(o));break;case c.View.WEEK:o.setHours(168*(e?1:-1)),r(Number(o));break;case c.View.DAY:case c.View.SCHEDULE:o.setHours(24*(e?1:-1)),r(Number(o))}}),[t,n,r])}(),y=(0,a.useCallback)((function(){m(!1)}),[m]),p=(0,a.useCallback)((function(){m(!0)}),[m]),v=(0,a.useCallback)((function(){i(Date.now())}),[i]),b=(0,a.useCallback)((function(){s({startTime:(0,d.getStartOfDay)((new Date).valueOf())+8*d.MS_IN_HOUR,endTime:(0,d.getStartOfDay)((new Date).valueOf())+9*d.MS_IN_HOUR})}),[s]),x=(e=(0,u.useCalendarState)(["viewDate","view"]),t=e.viewDate,n=e.view,(0,a.useMemo)((function(){var e=Date.now(),r=Vn((0,f.vN)(t,n),2),a=r[0],o=r[1];return e>=a&&e<=o}),[t,n]));return(0,r.jsxs)("div",{className:"flex flex-1",children:[(0,r.jsx)(g.SemanticButton,{size:"small",onClick:b,className:(0,h.B)({"mr-2":!o}),icon:"plus",color:o?void 0:"blue",tooltip:l.CALENDAR.add_event_btn_tooltip()}),(0,r.jsx)(g.SemanticButton,{basic:!0,size:"small",color:x?"grey":"blue",disabled:x,onClick:v,className:(0,h.B)("mr-2",{"px-2 py-1.5":o}),tooltip:l.CALENDAR.today(),children:o?(0,r.jsx)(Je.IconCalendarToday,{}):l.CALENDAR.today()}),(0,r.jsxs)(T.SmMenu,{compact:!0,className:"m-0 min-h-0 shadow-none last:m-0",children:[(0,r.jsx)(T.SmMenu.Item,{as:"button",className:(0,h.B)("p-[9px]",{"h-8 w-8 px-[11px] py-[7px]":o}),onClick:y,title:l.GLOBAL.back(),children:o?(0,r.jsx)(Je.IconChevronLeft,{className:"h-4.5 w-2.5"}):(0,r.jsx)(T.SmIcon,{className:"m-0",name:"angle left"})}),(0,r.jsx)(T.SmMenu.Item,{as:"button",className:(0,h.B)("p-[9px]",{"h-8 w-8 px-[11px] py-[7px]":o}),onClick:p,title:l.GLOBAL.next(),children:o?(0,r.jsx)(Je.IconChevronRight,{className:"h-4.5 w-2.5"}):(0,r.jsx)(T.SmIcon,{className:"m-0",name:"angle right"})})]})]})};function Wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kn(e){return function(e){if(Array.isArray(e))return Yn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Gn=["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],$n=["day-header-cell","all-day-cell","day-column"];function Qn(e){if(e.dataset.element&&$n.includes(e.dataset.element))return e}var Xn=function(){return(0,a.useCallback)((function(e){if(Gn.includes(e.key)&&e.target&&(0,Ze.isHTMLElement)(e.target)){if("month-cell"===e.target.dataset.element)return void function(e,t){var n=Zn(t);if(!(null==n?void 0:n.length))return;var r=n.indexOf(t);switch(e){case"ArrowDown":return r+7<n.length?r+=7:r=(r+1)%7,n[r].focus();case"ArrowUp":return r>=7?r-=7:r=0===r?n.length-1:r+27,n[r].focus();case"ArrowLeft":return 0===r&&(r=n.length),r>0&&r--,n[r].focus();case"ArrowRight":return r===n.length-1?r=0:r<n.length-1&&r++,n[r].focus();default:;}}(e.key,e.target);if(Qn(e.target))return void function(e,t){var n=document.getElementById("row-header-days"),r=document.getElementById("row-all-day-cells"),a=document.getElementById("day-columns");if(!r||!n||!a)return;var o=Array.from(n.children),i=Array.from(r.children),l=Array.from(a.children),u=Kn(o).concat(Kn(i),Kn(l)).filter((function(e){return Qn(e)})),c=u.indexOf(t);switch(e){case"ArrowLeft":return c>0&&c--,u[c].focus();case"ArrowRight":return c<u.length-1&&c++,u[c].focus();case"ArrowDown":return 3===u.length&&c<u.length-1?c++:c+7<u.length?c+=7:c<u.length&&c&&(c%=7),u[c].focus();case"ArrowUp":return 3===u.length&&c>0?c--:u.length>2&&c>=7&&(c-=7),u[c].focus();default:;}}(e.key,e.target);if("timezone-item"===e.target.dataset.element)return void function(e,t){var n=Zn(t);if(!(null==n?void 0:n.length))return;var r=n.indexOf(t);"ArrowDown"===e&&(r=r<n.length-1?r+1:0);"ArrowUp"===e&&(r=r>0?r-1:n.length-1);n[r].focus()}(e.key,e.target)}}),[])};function Zn(e){var t=document.querySelector("[data-root-navigation-by-keys]");if(t)return Array.from(t.querySelectorAll("[data-element=".concat(e.dataset.element,"]")))}var Jn=o().memo((function(e){var t=e.onToggle,n=e.tooltip;return(0,r.jsx)(g.SemanticButton,{basic:!0,size:"small",icon:"calendar",onClick:t,tooltip:n})})),er=n(2443),tr=n(3037),nr=n(9190),rr=n(7704),ar=n.n(rr),or=n(9162),ir=n.n(or),lr=n(3650);const ur=n.p+"3b1877afd860a02fcbbbfdf93cf0f48c.svg",cr=n.p+"static/media/notification-bg.94fc60ee.png";var sr=n(7649);function fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){fr(e,t,n[t])}))}return e}function mr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var yr={ad:o().lazy((function(){return n.e(164).then(n.bind(n,5164)).then((function(e){return{default:e.AdOpenEventButton}}))})),adc:o().lazy((function(){return n.e(533).then(n.bind(n,533)).then((function(e){return{default:e.AdcOpenEventButton}}))}))},pr=function(e){var t=e.type,n=mr(e,["type"]),o=yr[t];return o?(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)(sr.t,{disabled:!0}),children:(0,r.jsx)(o,dr({},n))}):null},vr=n(1650),br=n.n(vr);var hr=function(e){var t=e.eventId,n=e.onClose,o=e.type,i=(0,P.useLocalizationState)().t,l=function(e){var t=e.onClose,n=e.eventId,r=(0,u.useCalendarStateMethods)(),o=r.completeCalendarEvent,i=r.snoozeCalendarEvent,l=(0,j.Xg)(),c=(0,a.useCallback)((function(){n&&(o(n),br()((function(){return l({id:n})}))),t()}),[o,n,t,l]),s=(0,a.useCallback)((function(){n&&i(n),t()}),[n,t,i]);return{handleDismiss:(0,a.useCallback)((function(){n&&o(n),t()}),[o,n,t]),handleSnooze:s,handleOpen:c}}({eventId:t,onClose:n}),c=l.handleDismiss,s=l.handleSnooze,f=l.handleOpen;return(0,r.jsxs)("div",{className:"-ml-2 mt-4 flex justify-end",children:[(0,r.jsx)(pr,{type:o,eventId:t,onClick:f}),(0,r.jsx)(g.SemanticButton,{className:"mx-2 flex h-7 items-center justify-center text-base font-normal",inverted:!0,onClick:s,children:i.INCOMING_CALL_DIALOG_BOX.calendarAlert_snooze()}),(0,r.jsx)(g.SemanticButton,{onClick:c,inverted:!0,className:"ml-6 flex h-7 items-center justify-center text-base font-normal",children:i.INCOMING_CALL_DIALOG_BOX.calendarAlert_dismiss()})]})};function gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var wr=function(e){var t=e.onClose,n=e.eventId,o=e.moreQueue,i=e.position,l=e.mountNode,c=(0,P.useLocalizationState)().t,s=(0,S.useBrowserTabMetaInfo)(),f=null==s?void 0:s.app,m=function(){var e=(0,P.useLocalizationState)().t,t=(0,j.HI)({short:!0}),n=(0,j.c)({startsFromMonday:!1,short:!0});return(0,a.useCallback)((function(r){var a=new Date(r),o=t[a.getMonth()],i=a.getDate(),l=n[i],u=a.getHours(),c=a.getMinutes(),s=u<12?"AM":"PM";u=u%12||12;var f="".concat(o," ").concat(i,", ").concat(l,", ").concat((0,d.addLeadingZero)(u),":").concat((0,d.addLeadingZero)(c)).concat(s);return e.INCOMING_CALL_DIALOG_BOX.calendarAlert_dateString(f)}),[e.INCOMING_CALL_DIALOG_BOX,t,n])}(),y=function(e){var t=(0,u.useCalendarState)(["calendarEventDetails","calendarEventDetailsLoading"]),n=t.calendarEventDetails,r=t.calendarEventDetailsLoading,o=(0,u.useCalendarStateMethods)().getCalendarEventDetails,i=n[e],l=!!r[e];return(0,a.useEffect)((function(){i||o(e)}),[i,e,o]),{eventDetails:i,loading:l}}(n),p=y.eventDetails,v=y.loading,b=function(e){var t=e.moreQueue,n=e.eventDetails,r=(0,P.useLocalizationState)().t;return[null==n?void 0:n.title,t?r.GLOBAL.heading_calendarAlert_morePrefix(String(t)):""].filter(Boolean).join(" ")}({eventDetails:p,moreQueue:o}),x=(0,lr.useDraggableModal)({modalType:"calendar_event_notification",position:i}),w=x.draggableNodeRef,E=x.draggableProps,O=!!f&&["ad","cal"].includes(f),D=(0,a.useMemo)((function(){return f?(0,r.jsxs)("section",{role:"alertdialog","aria-modal":"true",style:O?{backgroundImage:"url(".concat(cr,")")}:void 0,className:(0,h.B)("absolute inset-x-4 top-2 z-[100] rounded-md bg-cal-event-border p-4 text-main-text-inverted shadow",{"fixed bottom-2 left-auto right-2 top-auto bg-repeat-y":O}),"aria-label":c.GLOBAL.heading_calendarAlert(),"data-testid":"calendar-event-alert",ref:O?w:void 0,children:[(0,r.jsxs)("header",{className:"flex w-full items-center",children:[(0,r.jsx)("img",{alt:"calendar icon",src:ur}),(0,r.jsxs)("p",{className:"my-0 ml-2 mr-0 h-[17px] text-base/[17px]",children:[b,!O&&p&&" ".concat(m(p.startTime))]})]}),O&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"mx-0 mb-0 mt-4 h-[17px] leading-[17px]",children:p&&m(p.startTime)}),(0,r.jsx)(g.Loader,{active:v,color:"primary",size:"medium"})]}),(0,r.jsx)(hr,{eventId:n,onClose:t,type:f})]}):null}),[f,O,w,p,n,m,v,t,c.GLOBAL,b]);return O?ar().createPortal((0,r.jsx)(ir(),xr(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){gr(e,t,n[t])}))}return e}({},E),{children:D})),l||document.getElementById("root")||window.document.body):D};function Sr(e,t,n,r,a,o,i){try{var l=e[o](i),u=l.value}catch(c){return void n(c)}l.done?t(u):Promise.resolve(u).then(r,a)}function jr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Sr(o,r,a,i,l,"next",e)}function l(e){Sr(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Er(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Er(e,t,n[t])}))}return e}function Dr(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Nr,Ar,Cr=function(){var e=(0,L.useModalComponentOpener)(wr),t=(0,nr.useOpenGlobalSlidingModal)(),n=(0,tr.useCalendarAlertState)("calendarEventAlerts"),r=(0,er.useLocalSettings)(),o=(0,S.useIsCommunicator)(),i=(0,u.useCalendarState)((function(e){return!!e.selectedEvent}));return(0,a.useEffect)((function(){function t(){return(t=jr((function(){var t,a,o,i,l,u,c;return Dr(this,(function(s){switch(s.label){case 0:return n.length?(t=n[0],a=t.id,o=t.time,i=n.length>1?n.length-1:void 0,[4,r.get("modals")]):[3,2];case 1:l=s.sent(),c=null!==(u=null==l?void 0:l.calendar_event_notification)&&void 0!==u?u:{},e(Or({eventId:a,eventTime:o,moreQueue:i},c),{id:"calendar_event_notification",notification:!0}),s.label=2;case 2:return[2]}}))}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[n,n.length,r,e]),(0,a.useEffect)((function(){o&&i&&t("calendarEvent")}),[i,o,t]),null};function Ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Mr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ir(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ir(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.ABSENCE="absence",e.SCHEDULE_CHANGE="schedule_change",e.OVERTIME="overtime"}(Nr||(Nr={})),function(e){e.ABSENCE_SICK="absence_sick"}(Ar||(Ar={}));var kr=function(e){var t=e.onClose,n=Mr(e,["onClose"]),o=(0,P.useLocalizationState)().t,i=(0,u.useCalendarState)(["timeoffTypes","timeoffRequestSaving"]),l=i.timeoffTypes,c=i.timeoffRequestSaving,s=(0,u.useCalendarStateMethods)().saveTimeoffRequest,f=Pr((0,a.useState)("absence"),2),m=f[0],y=f[1],p=(0,ne.useForm)({defaultValues:{timeOffTypeId:"",startDate:(new Date).toISOString(),endDate:new Date(Date.now()+d.MS_IN_DAY).toISOString(),comment:"",allOrNothing:!1}}),v=p.control,b=(0,a.useMemo)((function(){return["absence_sick"].map((function(e){var t,n="";"absence_sick"===e&&(n=o.CALENDAR_REQUESTS.absence_sick());var r=null===(t=l.find((function(t){return t.name===e})))||void 0===t?void 0:t.id;return{key:e,text:n,value:r}}))}),[o,l]),h=(0,a.useMemo)((function(){return[{id:"absence",title:o.CALENDAR_REQUESTS.absence_request()},{id:"schedule_change",title:o.CALENDAR_REQUESTS.schedule_change_request()},{id:"overtime",title:o.CALENDAR_REQUESTS.overtime_request()}]}),[o]),x=(0,a.useCallback)((function(e){y(e)}),[]),w=(0,a.useCallback)((function(){s(p.getValues()).then((function(){return t()})).catch((function(){return t()}))}),[p,s,t]);return(0,r.jsxs)(g.Modal,_r(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Tr(e,t,n[t])}))}return e}({onClose:t,"aria-labelledby":"activeDialogHeader",className:"!max-w-[600px]"},n),{children:[(0,r.jsxs)(g.Modal.Header,{id:"activeDialogHeader",role:"heading",className:"border-b-0 p-0",children:[(0,r.jsx)("div",{className:"px-6 pt-6 text-lg",children:o.CALENDAR_REQUESTS.schedule_request()}),(0,r.jsx)(g.Tabs,{tabs:h,activeTabId:m,headerClassName:"bg-transparent",tabClassName:"after:bg-black pt-2",activeTabClassName:"font-bold",onChange:x})]}),(0,r.jsx)(g.Modal.Content,{children:(0,r.jsxs)(T.SmForm,{onSubmit:p.handleSubmit(w),children:[(0,r.jsx)(M.SelectField,{control:v,label:o.CALENDAR_REQUESTS.absence_type(),name:"timeOffTypeId",options:b}),(0,r.jsxs)(T.SmForm.Group,{className:"border-b border-b-cal-border pb-6",children:[(0,r.jsx)(M.DatePickerField,{readOnly:!0,control:v,clearable:!1,width:"4",icon:"caret down",name:"startDate",label:o.CALENDAR_REQUESTS.date()}),(0,r.jsx)(M.DatePickerField,{readOnly:!0,clearable:!1,width:"4",control:v,icon:"caret down",name:"endDate",label:"\xa0"})]}),(0,r.jsx)(M.TextAreaField,{control:v,label:o.CALENDAR_REQUESTS.comments(),maxRows:5,minRows:5,name:"comment"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)(M.CheckboxField,{className:"mb-1",control:v,name:"allOrNothing",label:o.CALENDAR_REQUESTS.all_or_nothing()}),(0,r.jsx)("div",{className:"text-sm text-cal-dark-text",children:o.CALENDAR_REQUESTS.if_unavailable_deny()})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)(g.SemanticButton,{className:"mr-2.5",onClick:function(){return t()},children:o.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(g.SemanticButton,{type:"submit",primary:!0,disabled:c,loading:c,children:o.CALENDAR_REQUESTS.create_request()})]})]})})]}))};var Rr=n(2242);function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Vr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Br=function(e){var t=e.eventId,n=e.onClose,o=Vr(e,["eventId","onClose"]),i=(0,P.useLocalizationState)(),l=i.t,c=i.language,s=(0,u.useCalendarStateMethods)().assignCalendarEvent,f=(0,u.useCalendarState)("calendarOwnerUserId"),m=Ur((0,a.useState)(""),2),y=m[0],p=m[1],v=Ur((0,a.useState)({after:null,before:null}),2),b=v[0],h=v[1],x=Ur((0,a.useState)([]),2),w=x[0],S=x[1],j=(0,a.useCallback)((function(){s({fromUser:f,toUser:w.map((function(e){return e.id})),start:(null==b?void 0:b.before)||null,end:(null==b?void 0:b.after)||null}),n()}),[n,b,f,w,s]);return(0,r.jsxs)(g.Modal,zr(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Fr(e,t,n[t])}))}return e}({onClose:n,closeIcon:!0,"aria-labelledby":"activeDialogHeader",className:"!max-w-[540px]"},o),{children:[(0,r.jsx)(g.Modal.Header,{role:"heading",id:"activeDialogHeader",children:l.CALENDAR_EVENT_FORM.batchAssignEvents()}),(0,r.jsx)(g.Modal.Content,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"-mt-2 mb-4",children:(0,r.jsx)(re.MultipleUserSearch,{searchForUsers:!0,searchForTeams:!0,withSessionUser:!0,autoFocus:!0,uniqueSearchId:"calendar-owner",searchValue:y,setSearchValue:p,selectedItems:w,setSelectedItems:S,inputPlaceholder:l.CALENDAR_EVENT_FORM.batch_assign_event_users_placeholder(),loadingLabel:l.GLOBAL.loading()})}),!t&&(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("div",{className:"mx-0 mb-2 mt-0 items-center",children:(0,r.jsx)("div",{className:"max-w-[330px]",children:(0,r.jsx)(Rr.k,{config:{input:{format:"".concat((0,d.getLongDateFormat)("L")," ").concat((0,d.getLongDateFormat)("LT")),label:l.CALENDAR.events_period(),placeholder:""},form:{dateFormat:d.languageToLocaleMap[c],timeFormat:d.languageToLocaleMap[c]}},hideOnScrollPopup:!1,onChange:h,value:b})})})}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)(g.SemanticButton,{className:"mr-2.5",onClick:function(){return n()},children:l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(g.SemanticButton,{primary:!0,disabled:0===w.length,onClick:j,children:l.CALENDAR.assign_button()})]})]})})]}))};var Hr=o().memo((function(){var e=(0,P.useLocalizationState)().t,t=(0,L.useModalComponentOpener)(Br),n=(0,a.useCallback)((function(){t({})}),[t]);return(0,r.jsx)(g.SemanticButton,{basic:!0,size:"small",className:"self-start whitespace-nowrap",onClick:n,tooltip:e.CALENDAR_EVENT_FORM.batchAssignEvents(),children:e.CALENDAR_EVENT_FORM.batchAssignEvents()})}));function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Yr=[],Kr=function(e){var t=e.className,n=(0,P.useLocalizationState)().t,o=(0,u.useCalendarStateMethods)().setCalendarOwnerUserId,i=(0,j.GB)(),l=i.firstName,c=i.lastName,s=(0,pe.useFormatting)().formatFullName,f=qr((0,a.useState)(!1),2),d=f[0],m=f[1],y=(0,a.useCallback)((function(){return m((function(e){return!e}))}),[]),p=(0,a.useCallback)((function(){m(!1),g(""),S([])}),[]),v=qr((0,a.useState)(""),2),b=v[0],g=v[1],x=qr((0,a.useState)([]),2),w=x[0],S=x[1];return(0,a.useEffect)((function(){var e=w[0];e&&(p(),S([]),"user"===e.type&&o(e.id))}),[w,p,o]),(0,r.jsx)("div",{className:"relative inline-block",children:d?(0,r.jsx)(re.MultipleUserSearch,{searchForUsers:!0,className:(0,h.B)("absolute left-2.5 top-[-25px] z-[3] w-[280px] rounded text-base shadow",t),searchForTeams:!0,withSessionUser:!0,autoFocus:!0,uniqueSearchId:"calendar-owner",searchValue:b,onClickOutside:p,setSearchValue:g,selectedItems:Yr,setSelectedItems:S,inputPlaceholder:n.CHAT_CENTER.chat_add_members_search_input_placeholder(),loadingLabel:n.GLOBAL.loading()}):(0,r.jsx)("button",{className:(0,h.B)("-mx-1 my-0 border-none bg-none text-xl text-cal-dark-text",'after:ml-[0.3em] after:inline-block after:h-0 after:w-0 after:border-solid after:content-["_"]',"after:border-x-[0.3em] after:border-b-[0.1em] after:border-t-[0.3em] after:border-[#4d4d4d_transparent_transparent]"),onClick:y,children:s(l,c)})})},Gr=o().memo((function(e){var t=e.title;return(0,r.jsxs)("div",{className:"self-center whitespace-nowrap",children:[(0,r.jsx)("span",{className:"mr-1.5 text-xl text-cal-dark-text",children:"".concat(t,": ")}),(0,r.jsx)(Kr,{})]})}));function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Xr=function(){var e=(0,P.useLocalizationState)().t,t=(0,u.useCalendarState)("view"),n=function(){var e=(0,u.useCalendarStateMethods)(),t=e.changeViewDate,n=e.changeView,r=e.closeEventForm,o=(0,u.useCalendarState)(["viewDate","view","selectedEvent"]),i=o.viewDate,l=o.view,s=o.selectedEvent;return(0,a.useCallback)((function(e,a){var o=a.view;if(o===c.View.SCHEDULE&&s&&(0,f.wP)(s))r();else{n(o);var u=[c.View.DAY,c.View.WEEK,c.View.MONTH];if(!(u.indexOf(o)>=u.indexOf(l)))if(!s||s.id||i===s.startTime){var d=Qr((0,f.vN)(i,o,{weekStartsFromMonday:!1,withoutWeekend:!1}),2),m=d[0],y=d[1];m<=i&&i<=y||t(m)}else t(s.startTime)}}),[i,s,l,t,n,r,!1,!0])}(),o=(0,S.useIsCommunicator)();return(0,r.jsxs)(T.SmMenu,{compact:!0,className:"min-h-0 shadow-none",children:[(0,r.jsx)(Zr,{view:c.View.MONTH,active:t===c.View.MONTH,onClick:n,Icon:Je.IconCalendarViewMonth,title:e.CALENDAR.month(),isCommunicator:o}),(0,r.jsx)(Zr,{view:c.View.WEEK,active:t===c.View.WEEK,onClick:n,Icon:Je.IconCalendarViewWeek,title:e.CALENDAR.week(),isCommunicator:o}),(0,r.jsx)(Zr,{view:c.View.DAY,active:t===c.View.DAY,onClick:n,Icon:Je.IconCalendarViewDay,title:e.CALENDAR.day(),isCommunicator:o}),(0,r.jsx)(Zr,{view:c.View.SCHEDULE,active:t===c.View.SCHEDULE,onClick:n,Icon:Je.IconCalendarViewSchedule,title:e.CALENDAR.schedule(),isCommunicator:o})]})},Zr=function(e){var t=e.view,n=e.active,a=e.onClick,o=e.Icon,i=e.title,l=e.isCommunicator;return(0,r.jsx)(T.SmMenu.Item,{as:"button",view:t,active:n,title:i,onClick:a,className:(0,h.B)("px-4 py-[9px]",{"h-8 w-8 px-[7px]":l}),children:l?(0,r.jsx)(o,{className:"[&>svg]:h-3.5 [&>svg]:w-4.5"}):i})},Jr=o().memo((function(){var e=(0,P.useLocalizationState)().t,t=(0,u.useCalendarState)(["view","viewDate"]),n=t.view,o=t.viewDate,i=(0,j.HI)(),l=(0,j.HI)({short:!0}),c=(0,S.useIsCommunicator)(),s=(0,a.useMemo)((function(){return(0,f.Hs)(n,o,i,l,{weekStartsFromMonday:false,withoutWeekend:!1})}),[n,o,i,l,false,true]);return(0,r.jsx)("div",{className:(0,h.B)("ml-2.5 flex flex-1 items-center justify-center text-center text-xl text-cal-dark-text",{"text-base":c}),title:e.CALENDAR.date_title_tooltip(),children:s})})),ea=function(){var e=(0,P.useLocalizationState)().t,t=(0,u.useCalendarStateMethods)().toggleCalendarSidebar;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-1 flex flex-wrap items-start justify-end gap-x-4 gap-y-1",children:[(0,r.jsxs)("div",{className:"flex flex-1 justify-between gap-x-4",children:[(0,r.jsx)(Gr,{title:e.CALENDAR.calendar_heading()}),(0,r.jsx)(Hr,{})]}),(0,r.jsxs)("div",{className:"flex gap-x-4",children:[(0,r.jsx)(Xr,{}),(0,r.jsx)(Jn,{onToggle:t,tooltip:e.CALENDAR.month_nav_btn_tooltip()})]})]}),(0,r.jsxs)("div",{className:"mb-4 flex flex-row items-center justify-between after:flex-1",children:[(0,r.jsx)(Hn,{}),(0,r.jsx)(Jr,{})]})]})},ta=o().memo((function(e){var t=e.title,n=e.filters,o=e.onFilterChange,i=(0,a.useCallback)((function(e){return function(t){o(e,t)}}),[o]);return(0,r.jsxs)("div",{className:"pl-2",children:[(0,r.jsx)("div",{className:"mb-4",children:t}),n.map((function(e){var t=e.name,n=e.label,a=e.disabled,o=e.checked;return(0,r.jsx)(g.Checkbox,{className:"mb-2",name:t,label:n,onChange:i(t),disabled:a,checked:o},t)}))]})}));function na(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return na(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return na(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var aa=o().memo((function(e){var t=e.monthDate,n=e.viewStart,o=e.viewEnd,i=e.eventsMap,l=e.daysOfWeek,u=e.hidePreviousMonth,c=e.hideNextMonth,s=(0,j.Gz)(t),m=ra((0,f.vN)(t.getTime(),"month",{expand:!0}).map((function(e){return new Date(e)})),1)[0],y=(0,a.useMemo)((function(){var e=t.getFullYear();return"".concat(s," ").concat(e)}),[t,s]),p=(0,a.useMemo)((function(){return(0,f.Rn)(t.getTime())}),[t]);return(0,r.jsxs)("div",{className:"mb-9 w-full",children:[(0,r.jsx)("div",{className:"mb-1 pl-2 text-cal-dark-text",children:y}),(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:l.map((function(e,t){return(0,r.jsx)("th",{className:"h-8 text-sm font-normal text-cal-dark-text opacity-50",children:e},e+t)}))})}),(0,r.jsx)("tbody",{children:Array.from({length:p},(function(e,a){return(0,r.jsx)("tr",{children:l.map((function(e,l){var s=(0,f.lN)(m,a,l),y=n<=s&&s<=o,p=s.getMonth()!==t.getMonth(),v=p&&s<t&&u||p&&s>t&&c,b=!!i[(0,f.gB)(s)];return(0,r.jsx)("td",{className:(0,h.B)("h-8 w-8",{"rounded-none bg-cal-light-bg":!v&&y}),children:(0,r.jsx)("div",{className:(0,h.B)("flex h-7 w-7 select-none items-center justify-center rounded-[16px]","text-center text-sm text-cal-dark-text",{"bg-primary-legacy font-bold text-white":!v&&(0,d.isToday)(s),"opacity-50":p,"font-bold":b}),children:v?" ":s.getDate()})},l)}))},a)}))})]})]})}));function oa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ia(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var la=o().memo((function(e){var t=e.currentDate,n=e.viewDate,o=e.eventsDatesMap,i=ia((0,f.vN)(n.getTime(),"month",{expand:!0}).map((function(e){return new Date(e)})),2),l=i[0],u=i[1],c=(0,a.useMemo)((function(){return(0,d.getNextMonthDate)(t)}),[t]),s=(0,j.c)({oneLetter:!0});return(0,r.jsxs)("div",{children:[(0,r.jsx)(aa,{monthDate:t,viewStart:l,viewEnd:u,eventsMap:o,daysOfWeek:s,hideNextMonth:!0}),(0,r.jsx)(aa,{monthDate:c,viewStart:l,viewEnd:u,eventsMap:o,daysOfWeek:s,hidePreviousMonth:!0})]})})),ua=function(e){var t=e.goNextPage,n=e.goPreviousPage,a=e.nextTooltip,o=e.previousTooltip;return(0,r.jsxs)("div",{className:"absolute right-3 top-3 flex",children:[(0,r.jsx)(g.SemanticButton,{transparent:!0,className:"m-0 h-6 w-6",onClick:n,tooltip:o,icon:"chevron left",enabledInOffline:!0}),(0,r.jsx)(g.SemanticButton,{transparent:!0,className:"m-0 h-6 w-6",onClick:t,tooltip:a,icon:"chevron right",enabledInOffline:!0})]})};function ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){sa(e,t,n[t])}))}return e}function da(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ca(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ma=o().memo((function(e){var t=e.show,n=e.viewDate,o=e.eventsDatesMap,i=e.filters,l=e.pagination,u=da((0,a.useState)(n),2),c=u[0],s=u[1],f=(0,a.useCallback)((function(e){var t=e.forward;return function(){return s((function(e){var n=new Date(e);return n.setMonth(n.getMonth()+(t?2:-2)),n}))}}),[]),d=(0,a.useMemo)((function(){return f({forward:!0})}),[f]),m=(0,a.useMemo)((function(){return f({forward:!1})}),[f]);return(0,r.jsx)("div",{className:(0,h.B)("ease w-0 transition-[width] duration-300",{"w-[258px]":t}),children:(0,r.jsx)(T.SmTransition,{visible:t,duration:"300",animation:"fade right",unmountOnHide:!0,children:(0,r.jsxs)("div",{className:(0,h.B)("relative box-border flex h-full w-[258px] flex-col","overflow-y-auto overflow-x-hidden py-4 pl-6 pr-2"),children:[(0,r.jsx)(la,{currentDate:c,viewDate:n,eventsDatesMap:o}),(0,r.jsx)(ua,{goNextPage:d,goPreviousPage:m,nextTooltip:null==l?void 0:l.nextTooltip,previousTooltip:null==l?void 0:l.previousTooltip}),(0,r.jsx)(ta,fa({},i))]})})})})),ya=o().memo((function(){var e,t=(0,u.useCalendarState)(["viewDate","calendarEvents","showCalendarSidebar"]),n=t.viewDate,o=t.calendarEvents,i=t.showCalendarSidebar;e=(0,u.useCalendarStateMethods)().getCalendarsList,(0,a.useEffect)((function(){e()}),[e]);var l=(0,a.useMemo)((function(){return(0,f.eR)(o)}),[o]),s=function(){var e=(0,P.useLocalizationState)().t,t=(0,u.useCalendarState)(["calendars","calendarFilters"]),n=t.calendars,r=t.calendarFilters,o=(0,u.useCalendarStateMethods)().changeCalendarFilter;return(0,a.useMemo)((function(){var t=[{name:c.DefaultCalendars.HOLIDAYS,label:e.CALENDAR.holidays(),disabled:!0,checked:r[c.DefaultCalendars.HOLIDAYS]},{name:c.DefaultCalendars.EVENTS,label:e.CALENDAR.events_and_meetings(),disabled:!0,checked:r[c.DefaultCalendars.EVENTS]},{name:c.DefaultCalendars.REQUESTS,label:e.CALENDAR.requests(),disabled:!1,checked:r[c.DefaultCalendars.REQUESTS]},{name:c.DefaultCalendars.SHIFTS,label:e.CALENDAR.shifts(),disabled:!1,checked:r[c.DefaultCalendars.SHIFTS]}];return n.forEach((function(e){t.push({name:e.id,label:e.title})})),{title:e.CALENDAR.calendars_heading(),filters:t,onFilterChange:o}}),[e,n,r,o])}();return(0,r.jsxs)("div",{className:"z-0 flex flex-1 flex-col",children:[(0,r.jsx)(ea,{}),(0,r.jsxs)("div",{className:"flex h-full flex-row items-stretch overflow-hidden",children:[(0,r.jsx)(kn,{}),(0,r.jsx)(ma,{show:i,viewDate:new Date(n),eventsDatesMap:l,filters:s})]})]})})),pa=o().memo((function(e){var t=e.activePage,n=e.onPageChange,o=(0,P.useLocalizationState)().t,i=(0,a.useMemo)((function(){return[{id:"calendar",title:o.CALENDAR.calendar_heading()}]}),[o]),l=(0,a.useMemo)((function(){return[{id:c.Page.MY_CALENDAR,title:o.CALENDAR.my_calendar()},{id:c.Page.MY_REQUESTS,title:o.CALENDAR.my_requests()}]}),[o]),u=(0,a.useCallback)((function(e){n(e)}),[n]);return(0,r.jsxs)("header",{className:"flex h-[50px] justify-between bg-tabs-header-bg pr-44",children:[(0,r.jsx)(g.Tabs,{tabs:i,activeTabId:"calendar",headerClassName:"bg-transparent border-b-transparent"}),(0,r.jsx)(g.Tabs,{tabs:l,activeTabId:t,tabClassName:"after:bg-black pt-3",headerClassName:"bg-transparent border-b-transparent",activeTabClassName:"font-bold",onChange:u})]})})),va=o().memo((function(){var e=(0,ne.useForm)(),t=(0,u.useCalendarState)("selectedEvent");return(0,r.jsx)("div",{className:(0,h.B)("relative ml-[15px] w-0 overflow-hidden border-l border-solid border-l-transparent","ease transition-[width,border-left-color] duration-300",{"w-[308px] border-l-[#c6c8c9]":t}),children:t&&(0,r.jsx)(Fn,{form:e,event:t})})}));var ba=o().memo((function(e){var t=e.timeoffType,n=e.balance,a=(0,P.useLocalizationState)().t;return(0,r.jsxs)("div",{className:"mr-2 flex min-w-[200px] flex-col rounded border border-cal-border px-4 py-2.5 last:mr-0",children:[(0,r.jsx)("div",{className:"mb-1.5 text-sm/[16px] text-cal-dark-text",children:t.name}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"mr-2 text-2xl/[28px] font-bold text-cal-dark-text",children:n.unused}),(0,r.jsx)("span",{className:"text-sm",children:a.CALENDAR_REQUESTS.hours_available()})]})]})})),ha=o().memo((function(){var e=(0,u.useCalendarState)(["timeoffBalances","timeoffTypes"]),t=e.timeoffBalances,n=e.timeoffTypes;return t.length?(0,r.jsx)("div",{className:"mb-4 flex px-3 pt-4",children:t.map((function(e){var t=n.find((function(t){return t.id===e.time_off_type_id}));return t?(0,r.jsx)(ba,{timeoffType:t,balance:e},e.time_off_type_id):null}))}):null})),ga=n(5412),xa=n(3705);const wa=n.p+"a3da30986912ac774d1b421c621e1372.svg";const Sa=n.p+"30b944264eba605166388fde096c6685.svg";const ja=n.p+"76a3fe6dd1a5e874bedaab488ec9a676.svg";const Ea=n.p+"b984faca46269ddda49735a4cde775b7.svg";const Oa=n.p+"390016c449788fef1d1daf9ab58f6940.svg";var Da,Na,Aa,Ca=function(e){var t=e.children,n=e.className;return(0,r.jsx)("div",{className:(0,h.B)("block w-full truncate text-base font-normal text-cal-dark-text",n),children:t})};!function(e){e.VACATION="Vacation",e.PTO="PTO"}(Da||(Da={})),function(e){e.PENDING="pending",e.WAITLISTED="waitlisted",e.APPROVED="approved",e.DENIED="denied"}(Na||(Na={})),function(e){e.SYSTEM="system",e.SUPERVISOR="supervisor"}(Aa||(Aa={}));var Ia=function(e){var t=e.value,n=e.onChange,o=(0,P.useLocalizationState)().t.CALENDAR_REQUESTS,i=(0,a.useCallback)((function(e){n(e)}),[n]);return(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(Ta,{color:"#DEDEDF",active:void 0===t,label:o.all(),onChoose:i}),(0,r.jsx)(Ta,{color:"#FFC107",active:t===Na.PENDING,value:Na.PENDING,onChoose:i}),(0,r.jsx)(Ta,{color:"#FFC107",active:t===Na.WAITLISTED,value:Na.WAITLISTED,onChoose:i}),(0,r.jsx)(Ta,{color:"#4CAF50",active:t===Na.APPROVED,value:Na.APPROVED,onChoose:i}),(0,r.jsx)(Ta,{color:"#EA4335",active:t===Na.DENIED,value:Na.DENIED,onChoose:i})]})},Ta=function(e){var t=e.color,n=e.active,o=e.value,i=e.label,l=e.onChoose,u=(0,a.useCallback)((function(){l(o)}),[o,l]);return(0,r.jsx)("button",{className:(0,h.B)("box-border flex h-7 select-none items-center text-sm text-cal-header-text","cursor-pointer rounded-[8px] border px-2",{"text-cal-dark-text":n}),style:{borderColor:t,backgroundColor:n?t:"transparent"},onClick:u,children:o&&(0,d.capitalize)(o)||i})};function _a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ma(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Pa=function(){var e=(0,P.useLocalizationState)(),t=e.t.CALENDAR_REQUESTS,n=e.language,o=(0,L.useModalComponentOpener)(kr),i=Ma((0,a.useState)({after:null,before:null}),2),l=i[0],u=i[1],c=Ma((0,a.useState)(),2),s=c[0],f=c[1],m=(0,a.useCallback)((function(){o()}),[o]),y=(0,a.useCallback)((function(e){f(e)}),[]),p=(0,a.useMemo)((function(){return[{key:"all",value:"",text:t.any_type()},{key:Da.PTO,value:Da.PTO,text:Da.PTO},{key:Da.VACATION,value:Da.VACATION,text:Da.VACATION}]}),[t]);return(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(g.SemanticButton,{size:"small",onClick:m,className:"mr-4",icon:"plus",color:"blue",tooltip:t.create_request()}),(0,r.jsx)("span",{className:"text-sm text-cal-dark-text",children:t.new_request()})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(Rr.k,{popupPosition:"bottom center",config:{input:{className:"cursor-pointer min-w-[300px] mr-2",format:(0,d.getLongDateFormat)("L"),placeholder:t.choose_requests_period()},form:{showTime:!1,showSearchCheckbox:!1,dateFormat:d.languageToLocaleMap[n],timeFormat:d.languageToLocaleMap[n]}},hideOnScrollPopup:!1,onChange:u,value:l,clearable:!0}),(0,r.jsx)(T.SmSelect,{className:"mr-2",placeholder:t.any_type(),options:p}),(0,r.jsx)(Ia,{value:s,onChange:y})]})]})},ka=function(e){var t=e.children;return(0,r.jsx)("div",{className:"block w-full truncate pl-1 text-start text-sm font-normal text-cal-event-text",children:t})},Ra=[{id:"0",type:Da.PTO,status:Na.APPROVED,reqTimeStart:16960896e5,reqTimeEnd:16963488e5,submissionDate:16951392e5,approvalDate:16954848e5,approvalType:Aa.SYSTEM,comment:"Qui aliqua excepteur occaecat qui ad exercitation ut laborum tempor reprehenderit adipisicing consequat nulla laboris."},{id:"1",type:Da.VACATION,status:Na.APPROVED,reqTimeStart:16952304e5,reqTimeEnd:16955952e5,submissionDate:16951392e5,approvalDate:16954848e5,approvalType:Aa.SUPERVISOR,approvedBy:"Sarah Pastor",comment:"Tempor nulla duis nulla Lorem non."},{id:"2",type:Da.PTO,status:Na.APPROVED,reqTimeStart:16953536e5,reqTimeEnd:1695576e6,submissionDate:16954848e5,approvalDate:16952304e5,approvalType:Aa.SUPERVISOR,approvedBy:"Sarah Pastor",comment:"Irure officia dolore laboris do est nulla eiusmod et id id esse anim aute."},{id:"3",type:Da.VACATION,status:Na.WAITLISTED,reqTimeStart:1695512e6,reqTimeEnd:16956672e5,submissionDate:16953984e5,approvalDate:16953536e5},{id:"4",type:Da.VACATION,status:Na.DENIED,reqTimeStart:16952448e5,reqTimeEnd:1695504e6,submissionDate:16953168e5,approvalDate:16953984e5,approvalType:Aa.SYSTEM,comment:"Aute irure ullamco eiusmod occaecat tempor duis."},{id:"5",type:Da.VACATION,status:Na.DENIED,reqTimeStart:169534e7,reqTimeEnd:16957048e5,submissionDate:16952064e5,approvalDate:16956192e5,approvalType:Aa.SUPERVISOR,approvedBy:"Sarah Pastor",decisionDetails:"Incididunt laboris laborum velit officia."},{id:"6",type:Da.VACATION,status:Na.APPROVED,reqTimeStart:16954176e5,reqTimeEnd:16957224e5,submissionDate:16952688e5,approvalDate:169534e7,approvalType:Aa.SUPERVISOR,approvedBy:"Sarah Pastor",comment:"Commodo occaecat est sunt do duis commodo adipisicing enim duis."},{id:"7",type:Da.PTO,status:Na.PENDING,reqTimeStart:16960896e5,reqTimeEnd:16963488e5,submissionDate:16951392e5,comment:"Ex adipisicing nostrud ad voluptate dolore excepteur cupidatat cillum amet."},{id:"8",type:Da.PTO,status:Na.PENDING,reqTimeStart:16953168e5,reqTimeEnd:1695324e6,submissionDate:16952256e5,comment:"Sint proident et pariatur commodo minim labore consectetur laborum deserunt aliqua ipsum laboris."},{id:"9",type:Da.PTO,status:Na.PENDING,reqTimeStart:1695384e6,reqTimeEnd:16955808e5,submissionDate:169534e7},{id:"10",type:Da.VACATION,status:Na.PENDING,reqTimeStart:16952592e5,reqTimeEnd:16955916e5,submissionDate:16952256e5,comment:"Veniam labore cupidatat est elit sunt fugiat magna labore sint deserunt elit adipisicing."},{id:"11",type:Da.PTO,status:Na.PENDING,reqTimeStart:16952688e5,reqTimeEnd:16955264e5,submissionDate:16951632e5},{id:"12",type:Da.VACATION,status:Na.PENDING,reqTimeStart:16955264e5,reqTimeEnd:16957368e5,submissionDate:16952912e5,comment:"Nostrud velit mollit cupidatat eu."}],La=function(e){switch(e.status){case Na.APPROVED:return(0,r.jsx)(g.Svg,{src:wa});case Na.DENIED:return(0,r.jsx)(g.Svg,{src:ja});case Na.WAITLISTED:return(0,r.jsx)(g.Svg,{src:Oa});case Na.PENDING:return(0,r.jsx)(g.Svg,{src:Ea});default:return null}},Fa=o().memo((function(e){var t=e.request,n=e.onClose,o=(0,P.useLocalizationState)().t.CALENDAR_REQUESTS,i=(0,u.useCalendarState)("timeoffRequestDeleting"),l=(0,u.useCalendarStateMethods)().deleteTimeoffRequest,c=Boolean(t),s=(0,a.useCallback)((function(){t&&l(t.id).then((function(){return n()})).catch((function(){return n()}))}),[t,l,n]);return(0,d.useEscapeManager)(n,{enabled:c}),(0,r.jsx)("div",{className:(0,h.B)("absolute right-0 top-0 h-full w-0 bg-white shadow","ease transition-[width] duration-300",{"w-90":c}),children:(0,r.jsx)(T.SmTransition,{visible:c,duration:"300",animation:"fade right",unmountOnHide:!0,children:(0,r.jsxs)("div",{className:(0,h.B)("relative box-border flex h-full w-90 flex-col","overflow-y-auto overflow-x-hidden"),children:[(0,r.jsxs)("div",{className:"box-border flex h-[34px] items-center justify-end border-y border-cal-border bg-cal-light-bg px-2",children:[(0,r.jsx)("button",{className:(0,h.B)("flex h-8 w-8 cursor-pointer items-center justify-center",{"cursor-not-allowed":i}),onClick:i?void 0:s,children:(0,r.jsx)(Je.IconTrash,{className:"h-4.5 w-3.5"})}),(0,r.jsx)("button",{className:"flex h-8 w-8 cursor-pointer items-center justify-center",onClick:n,children:(0,r.jsx)(Je.IconClose,{className:"w-5"})})]}),t&&(0,r.jsxs)("div",{className:"flex flex-col px-6 py-5",children:[(0,r.jsxs)("div",{className:"mb-4 border-b border-cal-border",children:[(0,r.jsx)("span",{className:"mb-4 block text-lg font-bold text-cal-dark-text",children:o.absence_request()}),(0,r.jsxs)("div",{className:"mb-4 flex flex-col gap-1",children:[(0,r.jsx)(za,{label:o.requested_time(),value:(0,f.LL)(t.reqTimeStart,t.reqTimeEnd)}),(0,r.jsx)(za,{label:o.type(),value:t.type}),(0,r.jsx)(za,{label:o.created_at(),value:(0,f.Ze)(t.submissionDate)})]})]}),t.comment&&(0,r.jsx)("span",{className:"mb-6",children:t.comment}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(La,{status:t.status}),(0,r.jsx)("span",{className:"ml-2 font-bold",children:(0,d.capitalize)(t.status)})]}),qa(t)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-1 text-sm text-cal-header-text",children:[(0,r.jsx)("span",{children:(0,d.capitalize)(t.status)+" at "}),(0,r.jsx)("span",{children:(0,f.Ze)(t.approvalDate)+", "}),(0,r.jsx)("span",{children:Ya(t,o.by_system())})]}),(0,r.jsx)("span",{children:t.decisionDetails})]})]})]})]})})})})),za=function(e){var t=e.label,n=e.value;return(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"mr-2 w-32 shrink-0 truncate text-cal-header-text",children:t}),(0,r.jsx)("div",{className:"truncate text-cal-dark-text",children:n})]})};function Va(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ua(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||Ha(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(e){return function(e){if(Array.isArray(e))return Va(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ha(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ha(e,t){if(e){if("string"==typeof e)return Va(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Va(e,t):void 0}}var Wa=function(){var e=(0,P.useLocalizationState)().t.CALENDAR_REQUESTS,t=Ua((0,a.useState)((function(){return Ba(Ra)})),1)[0],n=Ua((0,a.useState)(),2),o=n[0],i=n[1],l=Ua((0,a.useState)([]),2),u=l[0],c=l[1],s=(0,a.useCallback)((function(e){var n=e.dataset.id;(0,F.assertDefined)(n);var r=t.find((function(e){return e.id===n}));i(r)}),[t]),d=(0,a.useCallback)((function(e){if((0,Ze.isHTMLElement)(e.target)){var t=e.target.closest("tr");t&&s(t)}}),[s]),m=(0,a.useCallback)((function(e){if("Enter"===e.key){var t=e.target;n=t,(null!=(r=HTMLTableRowElement)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r)&&s(t)}var n,r}),[s]),y=(0,a.useCallback)((function(){i(void 0)}),[]),p=(0,a.useMemo)((function(){return[{id:"select",header:function(e){var t=e.table;return(0,r.jsx)("div",{className:"w-9.5 px-2.5 pt-1",children:(0,r.jsx)(g.Checkbox,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:function(e){return t.toggleAllPageRowsSelected(e)}})})},cell:function(e){var t=e.row;return(0,r.jsx)("div",{className:"w-9.5 px-2.5 pt-1",children:(0,r.jsx)(g.Checkbox,{checked:t.getIsSelected(),disabled:!t.getCanSelect(),indeterminate:t.getIsSomeSelected(),onChange:function(e){return t.toggleSelected(e)}})})},size:38},{id:"status",accessorKey:"status",header:function(){return null},cell:function(e){return(0,r.jsx)(Ca,{children:(0,r.jsx)(La,{status:e.getValue()})})},size:30},{id:"type",accessorKey:"type",header:function(){return(0,r.jsx)(ka,{children:e.type()})},cell:function(e){return(0,r.jsx)(Ca,{children:e.getValue()})},size:150},{id:"requested-time",accessorFn:function(e){return(0,f.LL)(e.reqTimeStart,e.reqTimeEnd)},header:function(){return(0,r.jsx)(ka,{children:e.requested_time()})},cell:function(e){return(0,r.jsx)(Ca,{children:e.getValue()})},size:250},{id:"submission-date",accessorFn:function(e){return(0,f.Ze)(e.submissionDate)},header:function(){return(0,r.jsx)(ka,{children:e.submission_date()})},cell:function(e){return(0,r.jsx)(Ca,{children:e.getValue()})},size:160},{id:"approval-date",accessorFn:function(e){return e.status!==Na.PENDING&&(0,f.Ze)(e.approvalDate)},header:function(){return(0,r.jsx)(ka,{children:e.approval_date()})},cell:function(e){return(0,r.jsx)(Ca,{children:e.getValue()})},size:160},{id:"approval",accessorFn:function(t){return Ya(t,e.system_approval())},header:function(){return null},cell:function(e){return(0,r.jsx)(Ca,{className:"text-cal-header-text",children:e.getValue()})},size:120},{id:"reason",accessorFn:function(e){return e.status===Na.DENIED},header:function(){return null},cell:function(e){return(0,r.jsx)(Ca,{children:e.getValue()?(0,r.jsx)(g.Svg,{src:Sa}):null})},size:40},{id:"comment",accessorKey:"comment",header:function(){return(0,r.jsx)(ka,{children:e.comments()})},cell:function(e){return(0,r.jsx)(Ca,{className:"max-w-[150px] truncate",children:e.getValue()})},enableResizing:!0}]}),[e]),v=(0,ga.b7)({data:t,columns:p,state:{columnFilters:u},onColumnFiltersChange:c,getCoreRowModel:(0,xa.sC)()});return(0,r.jsxs)("div",{className:"flex flex-1 flex-col gap-3",children:[(0,r.jsx)(Pa,{}),(0,r.jsxs)("div",{className:"relative h-full overflow-hidden",children:[(0,r.jsxs)("table",{className:"flex flex-1 flex-col",children:[(0,r.jsx)("thead",{className:"box-border h-[34px] border-y border-cal-border bg-cal-light-bg",children:v.getHeaderGroups().map((function(e){return(0,r.jsx)("tr",{children:e.headers.map((function(e){return(0,r.jsx)("th",{style:{minWidth:e.getSize()},children:e.isPlaceholder?null:(0,ga.ie)(e.column.columnDef.header,e.getContext())},e.id)}))},e.id)}))}),(0,r.jsx)("tbody",{onClick:d,children:v.getRowModel().rows.map((function(e){return(0,r.jsx)("tr",{className:"h-9.5 cursor-pointer border-b border-cal-border","data-id":e.original.id,tabIndex:0,onKeyDown:m,children:e.getVisibleCells().map((function(e){return(0,r.jsx)("td",{style:{minWidth:e.column.getSize()},children:(0,ga.ie)(e.column.columnDef.cell,e.getContext())},e.id)}))},e.id)}))})]}),(0,r.jsx)(Fa,{request:o,onClose:y})]})]})};function qa(e){return function(e){return e.status===Na.APPROVED}(e)||function(e){return e.status===Na.DENIED}(e)}function Ya(e,t){return qa(e)?e.approvalType===Aa.SYSTEM?t:"by ".concat(e.approvedBy):""}var Ka=o().memo((function(){var e,t,n;return e=(0,u.useCalendarStateMethods)().getTimeoffTypes,(0,a.useEffect)((function(){e()}),[e]),t=(0,u.useCalendarStateMethods)().getTimeoffBalances,n=(0,u.useCalendarState)("calendarOwnerUserId"),(0,a.useEffect)((function(){n&&t(n)}),[n,t]),(0,r.jsxs)("div",{className:"z-0 flex flex-1 flex-col",children:[(0,r.jsx)(ha,{}),(0,r.jsx)(Wa,{})]})}));function Ga(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ga(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ga(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Qa=function(){var e,t,n,o=$a((e=qn((0,a.useState)(null),2),t=e[0],n=e[1],(0,a.useEffect)((function(){var e=(0,d.parseQueryString)().tab;return e?n(e):((0,d.setQueryParams)({tab:c.Page.MY_CALENDAR}),n(c.Page.MY_CALENDAR)),function(){return(0,d.setQueryParams)({})}}),[]),(0,a.useEffect)((function(){(0,d.setQueryParams)({tab:t})}),[t]),[t,n]),2),i=o[0],l=o[1],u=Xn();return(0,d.useEventListener)("keydown",u),i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(pa,{activePage:i,onPageChange:l}),(0,r.jsxs)("div",{"data-testid":"calendar-page",className:"flex h-full flex-row items-stretch overflow-hidden pb-2 pl-4 pr-0 pt-3",children:[i===c.Page.MY_CALENDAR&&(0,r.jsx)(ya,{}),i===c.Page.MY_REQUESTS&&(0,r.jsx)(Ka,{}),(0,r.jsx)(va,{})]})]}):null}},3999:(e,t,n)=>{n.d(t,{mB:()=>Ce,qc:()=>f,nv:()=>d,PG:()=>he,Sx:()=>be,sp:()=>Le,Xk:()=>R,eR:()=>ne,Ze:()=>_,LL:()=>T,f1:()=>Re,lN:()=>O,DN:()=>ke,G7:()=>S,ly:()=>j,IX:()=>A,O4:()=>q,qe:()=>Pe,MH:()=>ve,LU:()=>D,gB:()=>te,J7:()=>_e,Ht:()=>I,vJ:()=>Me,bh:()=>xe,XT:()=>w,N2:()=>ge,x5:()=>N,vN:()=>g,cr:()=>x,pl:()=>pe,TF:()=>Q,Hs:()=>je,Cb:()=>Te,N:()=>Ie,Rn:()=>m,kd:()=>E,$t:()=>Z,Q5:()=>K,wP:()=>G,G5:()=>C,y7:()=>X,hY:()=>re,kM:()=>Fe,rY:()=>oe});var r=n(4315),a=n(9717);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}a.MS_IN_WEEK;var f=30,d=f*a.MS_IN_MINUTE;function m(e){var t=u(g(e,r.View.MONTH,{expand:!0}),1)[0],n=O(new Date(t),4,6),o=y(new Date(e));return(0,a.getStartOfDay)(n)<(0,a.getStartOfDay)(o)?6:5}var y=function(e){var t=new Date(e.getFullYear(),e.getMonth()+1,1);return new Date(t.getTime()-1)},p=function(e,t){var n=new Date(e);n.setHours(0,0,0,0);var r=Number(n);return n.setHours(24),[r,Number(n)]},v=function(e,t){var n=t.weekStartsFromMonday,r=t.withoutWeekend,o=new Date(e),i=n||r?0:1;o.setHours(-24*(o.getDay()-1+i),0,0,0);var l=Number(o);return o.setHours(24*(6-(r?a.DAYS_IN_WEEKEND:0))),[l,Number(o)]},b=function(e,t){var n=new Date(e);n.setHours(-24*(n.getDate()-1),0,0,0);var r,a,o=u(t.expand?v(Number(n),t):[Number(n)],1)[0],i="number"==typeof t.expand?t.expand-7:(r=n.getFullYear(),a=n.getMonth(),new Date(r,a+1,0).getDate());return n.setHours(24*i-1),[o,u(t.expand?v(Number(n),t):[0,Number(n)],2)[1]]},h=function(e){var t=new Date(e);t.setHours(0,0,0,0);var n=t.valueOf(),r=new Date(n);return r.setHours(4320),[n,Number(r)]},g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l({expand:!1,weekStartsFromMonday:!1,withoutWeekend:!1},n);switch(t){case"day":return p(e);case"week":return v(e,r);case"month":return b(e,r);case"schedule":return h(e);default:return[0,0]}},x=function(e,t){var n;e>t&&(e=(n=[t,e])[0],t=n[1]);var r=Number(t)-Number(e),o=Math.floor(r/a.MS_IN_DAY);r-=o*a.MS_IN_DAY;var i=new Date(Number(e)+r);return 0!==o&&e.getDate()!==i.getDate()&&o++,o+1},w=function(e,t){return e+t<=7?e:7-t},S=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.short,i=r.oneLetter,l=r.startsFromMonday,u=r.withoutWeekend,s=u?a.WEEK_DAYS_ORDER_MONDAY.slice(0,5):a.WEEK_DAYS_ORDER_MONDAY,f=u?a.WEEK_DAYS_ORDER_SUNDAY.slice(1,6):a.WEEK_DAYS_ORDER_SUNDAY,d=c(l?s:f);return o?d.map((function(e){return t[e]})):i?d.map((function(e){return n[e]})):d.map((function(t){return e[t]}))},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withoutWeekend,n=e.startsFromMonday;return t?a.WEEK_DAYS_INDICES.slice(1,6):n?c(a.WEEK_DAYS_INDICES.slice(1)).concat([a.WEEK_DAYS_INDICES[0]]):c(a.WEEK_DAYS_INDICES)};function E(e){var t=new Date,n=new Date(e),r=t.toDateString()===n.toDateString(),a=t.getHours()===n.getHours(),o=t.getMinutes()<30?0:1,i=n.getMinutes()<30?0:1;return r&&a&&o===i}var O=function(e,t,n){var r=7*t+n;return new Date(e.getFullYear(),e.getMonth(),e.getDate()+r)},D=function(e){var t=new Date(Number(e));return t.setMinutes(t.getMinutes()+f),t},N=function(e){return("number"==typeof e?e:e.getTime())+a.MS_IN_DAY-1},A=function(e){var t=e.setHours(8);return{startTime:t,endTime:t+a.MS_IN_HOUR}},C=function(e,t){return 1===x(new Date(e),new Date(t))&&!function(e,t){var n=[new Date(e),new Date(t)],r=n[0],o=n[1];return(0,a.areSameDays)(r,o)&&(0,a.isMidnight)(r)&&23===o.getHours()&&59===o.getMinutes()}(e,t)};function I(e){var t=null==e?void 0:e.match(/GMT[-+]\d\d:\d\d/);return null==t?void 0:t[0].replace(/:00$/,"")}function T(e,t){var n=x(new Date(e),new Date(t));return 1===n?"".concat((0,a.formatDate)(e,"LT")," \u2014 ").concat((0,a.formatDate)(t,"LT"),", ").concat((0,a.formatDate)(e,"L")):"".concat((0,a.formatDate)(e,"L")," \u2014 ").concat((0,a.formatDate)(t,"L"),", ").concat(n," days")}function _(e){return"".concat((0,a.formatDate)(e,"LT"),", ").concat((0,a.formatDate)(e,"L"))}var M=n(2018);function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=function(e){return{id:e.id||r.EventCustomId.NEW_EVENT,allDay:e.allDay||!1,start:e.startTime,end:e.endTime,title:e.title}},L=n(2122),F=(n(6622),n(4778));function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){V(e,t,n[t])}))}return e}function B(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function H(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var W=["endDate","endTime","startDate","startTime"],q=function(e){var t,n,r=new Date(e.startTime).toISOString(),a=new Date(e.endTime).toISOString();return{allDay:e.allDay||!1,assignees:e.assignees||[],completed:e.completed,contacts:(null===(t=e.contacts)||void 0===t?void 0:t.map((function(e){return Y(e)})))||[],email:e.email||void 0,endDate:a,endTime:a,notes:e.notes||"",remindIn:e.remindIn?Number(e.remindIn):0,remindInUnit:null!==(n=e.remindInUnit)&&void 0!==n?n:"MINUTES",screenpopSize:e.screenpopSize||0,startDate:r,startTime:r,timezone:e.timezone||"",title:e.title||""}},Y=function(e){var t,n,r,a,o=e.first_name||"Anonymous",i=e.last_name||"";return e.id?{type:"existing",id:e.id,firstName:o,lastName:i,primaryPhone:{phone:(null===(r=e.calendar_phone)||void 0===r?void 0:r.phone)||"",type:null===(a=e.calendar_phone)||void 0===a?void 0:a.type}}:{type:"new",name:o+(i&&" "+i),phone:{phone:(null===(t=e.calendar_phone)||void 0===t?void 0:t.phone)||"",type:null===(n=e.calendar_phone)||void 0===n?void 0:n.type},create:!1}},K=function(e,t,n){var r=(0,F.typedKeys)(n).reduce((function(e,r){return(0,L.isEqual)(n[r],t[r])||(e[r]=!0),e}),{});return e&&W.forEach((function(e){delete r[e]})),(0,F.typedKeys)(r).length>0},G=function(e){return Boolean(!e.id&&e._temporaryId)};function $(e){return e.type===r.EventType.EVENT}var Q=function(e){return e[0]>e[1]?[e[1],e[0]]:H(e)},X=function(e,t,n){var r=q(n);return(0,F.typedKeys)(r).filter((function(t){return t in e})).reduce((function(e,n){var a=e[n],o=r[n];if(a===o)return e;var i=a!==t[n],l=W.includes(n);return i&&!l?e:B(U({},e),V({},n,o))}),U({},e))};function Z(e){return"existing"===e.type}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var te=function(e){var t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return"".concat(t,"-").concat(n,"-").concat(r)},ne=function(e,t,n){var a={};return e.slice(0).sort((function(e,t){return e.start-t.start})).forEach((function(e){e.id!==(null==t?void 0:t.id)&&le(a,e)})),t&&t.id!==r.EventCustomId.SELECTION?se(a,t):n&&ce(a,n),a},re=function(e,t){return t.map((function(e){return ae(e)})).slice(0).sort((function(e,t){return e.start-t.start})).forEach((function(t){le(e,t)})),e},ae=function(e){var t=ee([e.startDate,e.endDate].map((function(e){return new Date(e).getTime()})),2),n=t[0],r=t[1];return{type:M.t.REQUEST,id:e.id,allDay:!C(n,r),start:n,end:r,title:e.status}},oe=function(e,t){return t.map((function(e){return ie(e)})).slice(0).sort((function(e,t){return e.start-t.start})).forEach((function(t){le(e,t)})),e},ie=function(e){var t=ee([e.startTime,e.endTime].map((function(e){return new Date(e).getTime()})),2),n=t[0],r=t[1];return{type:M.t.SHIFT,id:e.id,allDay:!C(n,r),start:n,end:r,title:"Shift"}},le=function(e,t){var n=new Date(t.start),a=new Date(t.end),o=te(n);e[o]||(e[o]=[]);var i=x(n,a),l={type:r.EventType.EVENT,data:t,lastsDays:i},u=e[o].findIndex((function(e){return e.type===r.EventType.EMPTY}));u=-1===u?e[o].length:u,e[o][u]=l,i>1&&ue(e,l,n,i,u)},ue=function(e,t,n,a,o){for(var i=new Date(n),l=1;l<a;l++){i.setHours(24);var u=te(i);e[u]||(e[u]=[]);var c=0===i.getDay();if(!c)for(;e[u].length<o;)e[u].push({type:r.EventType.EMPTY});var s={type:r.EventType.OCCUPIED,data:t.data,lastsDays:a-l};c||e[u].length===o?e[u].push(s):e[u][o]=s}},ce=function(e,t){var n=function(e){var t=k(e.map((function(e){return Number(e)})),2),n=t[0],a=t[1];return{id:r.EventCustomId.SELECTION,allDay:!C(n,a),start:n,end:a,title:""}}(Q(t));se(e,n)},se=function(e,t){for(var n=[new Date(t.start),new Date(t.end)],a=n[0],o=n[1],i=x(a,o),l=0;l<i;l++){var u=new Date(new Date(a).setHours(24*l)),c=te(u);e[c]||(e[c]=[]),e[c].unshift({type:0===l?r.EventType.NEW_EVENT:r.EventType.OCCUPIED,lastsDays:i-l,data:t})}fe(e,a,o)},fe=function(e,t,n){(function(e){for(var t=u(e,2),n=t[0],r=t[1],a=function(e){var t=e.getDay();return new Date(new Date(e).setHours(-24*t))},o=[],i=new Date(n);i<r;)o.push(a(i)),i.setHours(168);var l=a(i);return l<=r&&o.push(l),o})([t,n]).forEach((function(a){for(var o=0;o<7;o++){var i=new Date(new Date(a).setHours(24*o));if(!de(i,t,n)){var l=te(i);e[l]||(e[l]=[]),e[l].unshift({type:r.EventType.EMPTY})}}}))},de=function(e,t,n){var r=Number(e),o=Number(e)+a.MS_IN_DAY,i=Number(t),l=Number(n);return r<=i&&i<o||i<r&&o<l||r<=l&&l<o};function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pe=function(e){if(e&&!e.id){var t=e.startTime,n=e.endTime;if(t&&n)return[new Date(t),new Date(n)]}},ve=function(e,t){var n=document.getElementById("month-content");if(!n)return null;var r=Array.from(n.querySelectorAll('[data-element="month-cell"]')).find((function(n){var r=n.getBoundingClientRect();return e>=r.left&&e<=r.right&&t>=r.top&&t<=r.bottom}));if(!r)return null;var a=r.dataset.day;return a?new Date(Number(a)):null},be=function(e,t){var n=ye(Q(t),2),r=n[0],o=n[1];if(!C(Number(r),Number(o))){var i=ye([r,o].map((function(e){return new Date((0,a.getStartOfDay)(e))})),2),l=i[0],u=i[1];return l<=e&&e<=u}return(0,a.isMidnight)(o)?(0,a.areSameDays)(e,r):(0,a.areSameDays)(e,r)||(0,a.areSameDays)(e,o)},he=function(e,t,n,r){if(!n||!r)return!1;var o=n.item,i=n.cell,l=ye([o.data.start,o.data.end].map((function(e){return new Date(e)})),2),u=l[0],c=l[1],s=x(u,c),f=x(u,r)-1,d=ye(i,2),m=d[0],y=d[1],p=e*a.DAYS_IN_WEEK+t,v=m*a.DAYS_IN_WEEK+y-f;return v<=p&&p<v+s},ge=function(e,t){var n=ye(Q(e),2),r=n[0],o=n[1];if(!(0,a.areSameDays)(r,o))return[r,new Date(N(Number(o)))];if(!t)return[r,o];var i=new Date(e[0]),l=t[te(i)].filter($),u=l.length>0?l[l.length-1]:void 0,c=ye([r,o].map((function(e,t){var n=new Date(e);if(u&&(0,a.areSameDays)(i,new Date(u.data.end+a.MS_IN_HOUR-1))){var r=new Date(u.data.end);return n.setHours(r.getHours()+t),n.setMinutes(r.getMinutes()),n}return n.setHours(8+t),n})),2);return[c[0],c[1]]},xe=function(e,t,n){var a=!1,o=0;if(t<=0)return[a=!!(o=e.length),o];if(e.length>t){if(t--,o=e.filter((function(e,n){return n>=t})).length,o)return[a=!0,o]}else if(e.length===t){var i=e[e.length-1];if(i.type===r.EventType.EVENT&&i.lastsDays>1)for(var l=new Date(i.data.start),u=1;u<i.lastsDays&&(l.setHours(24),0!==l.getDay());u++){var c=n[te(l)];if(ye(xe(c,t,n),1)[0])return[a=!0,o=1]}}return[a,o]};function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var je=function(e,t,n,a,o){var i=new Date(t),l=i.getMonth(),u=i.getFullYear();switch(e){case r.View.MONTH:var c=n[l];return"".concat(c," ").concat(u);case r.View.WEEK:var s=Se(g(t,r.View.WEEK,{weekStartsFromMonday:null==o?void 0:o.weekStartsFromMonday,withoutWeekend:null==o?void 0:o.withoutWeekend}).map((function(e){return new Date(e)})),2),f=s[0],d=s[1],m=[f.getDate(),a[f.getMonth()],f.getFullYear()],y=m[0],p=m[1],v=m[2],b=[d.getDate(),a[d.getMonth()],d.getFullYear()],h=b[0],x=b[1],w=b[2];return h<y?v===w?"".concat(p," ").concat(y," - ").concat(x," ").concat(h,", ").concat(u):"".concat(p," ").concat(y,", ").concat(v," - ").concat(x," ").concat(h,", ").concat(w):"".concat(p," ").concat(y," - ").concat(h,", ").concat(u);case r.View.DAY:var S=n[l],j=i.getDate();return"".concat(S," ").concat(j,", ").concat(u);case r.View.SCHEDULE:var E=n[l],O=Se(g(t,r.View.SCHEDULE),2)[1],D=new Date(O),N=n[D.getMonth()],A=D.getFullYear();return"".concat(E," - ").concat(N).concat(u!==A?", ".concat(A):"");default:return""}};function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Oe(e,t,n[t])}))}return e}function Ne(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ce=48,Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor((e-t)/a.MS_IN_DAY)},Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.floor((e-t)/a.MS_IN_DAY),r=new Date(e),o=r.getHours(),i=r.getMinutes(),l=2*o+Math.floor(i/f);return[n,l]};function _e(e){var t=e.viewStart,n=e.viewEnd,r=Ae(e.cellSize,2),a=(r[0],r[1]),o=e.start,i=e.end,l=e.line,u=e.lines,c=function(e){return Ae(Te(e),2)[1]*a},s={};s.width="calc((100% - ".concat(16,"px) / ").concat(u,")"),s.left="calc(".concat(s.width," * ").concat(l," + ").concat(l,"px)"),s.top=o<=t?0:c(o);var f=(i>=n?24*a*2:c(i)-1)-s.top;return s.height=f>=24?f:23,s}function Me(e){var t=e.viewStart,n=e.viewEnd,r=Ae(e.cellSize,2),a=r[0],o=r[1],i=e.start,l=e.end,u=e.line,c=e.lines,s={},f=Math.min(i,l)<t,d=x(new Date(Math.max(i,t)),new Date(Math.min(n,l))),m=x(new Date(t),new Date(i))-1;return s.bottom=2+(c?24*(c-u-1):0),s.height=o-4,s.width=d*a-16,s.left=f?2:a*m,s.backgroundColor="var(--c-calendar-day-event-bg)",s.borderLeftColor="var(--c-calendar-day-event-border)",s}var Pe=function(e,t,n){var r=Ae(Te(e,n),2),o=r[0],i=r[1],l=Ae(t.cell,2),u=l[0],c=l[1];return(u-o)*a.MS_IN_DAY+(c-i)*d},ke=function(e,t){var n=e.getAttribute("data-x"),r=e.getAttribute("data-y");if(n&&r){var a=Number(n),o=Number(r);return Re(t,a,o)}},Re=function(e,t,n){var r=e+a.MS_IN_DAY*t,o=Math.floor(n/2),i=n%2?f:0;return new Date(r+o*a.MS_IN_HOUR+i*a.MS_IN_MINUTE)},Le=function(e,t){return Ne(De({},e),{start:e.start+t,end:e.end+t})},Fe=function(e,t){var n,r=[e.start,e.end+t],a=r[0],o=r[1];return a>o&&(a=(n=[o,a])[0],o=n[1]),a===o&&(o+=d),Ne(De({},e),{start:a,end:o})}},4483:(e,t,n)=>{n.d(t,{B:()=>i});var r=n(9478),a=n.n(r),o=n(324);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.m6)(a()(t))}}}]);
//# sourceMappingURL=782.c75bb9a0.chunk.js.map