/*! For license information please see 352.acd80f96.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_bpinc_web_calendar_ui=self.webpackChunk_bpinc_web_calendar_ui||[]).push([[352],{7029:(e,n,t)=>{var o=t(7704);n.s=o.createRoot,o.hydrateRoot},352:(e,n,t)=>{t.r(n);var o=t(2322),i=t(6029),r=t.n(i),s=t(7029),a=t(2850),c=t(2488),l=t(4293),u=t(801),d=t(4483),f=function(){var e=(0,c.useUIState)().isTabNavHighlighted;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:(0,d.B)("flex h-full flex-col justify-items-stretch",{"[&_*:focus-within]:!outline-none [&_*:focus]:!outline-none":!e,"[&_*:focus-within]:!outline-0 [&_*:focus]:!outline-0":!e}),children:(0,o.jsx)("section",{className:"flex grow flex-col items-stretch overflow-hidden",role:"tabpanel",children:(0,o.jsx)(l.V3,{})})}),(0,o.jsx)(u.Modals,{})]})},_=t(7500),S=t(2469),h=t(9022),p=t(6441),E=t(5886),m=t(9008),g=t(7421),v=t(7505),b=t(9717),x=t(9486),N=t(3346),w=new URL("http://localhost:9897");w.searchParams.append("domain",location.hostname);var L=w.toString(),O="bpClient/onShowDomainAuthorizationDialog",C=t(8715),I=t(3650),A="cursor-pointer text-primary-legacy",P="ext-link",j="ext-link-firefox",D="plugin-link",M=function(e){var n=e.isExtAvailable,t=e.install,r=(0,x.useLocalizationState)().t.INSTALLATION_PROCESS,s=(0,I.useInstallationMethods)(),a=s.installChromeExtension,c=s.installFirefoxExtension,l=s.installBPClientPlugin;(0,i.useEffect)((function(){var e=document.getElementById(P),n=document.getElementById(j),t=document.getElementById(D);return null==e||e.addEventListener("click",a),null==n||n.addEventListener("click",c),null==t||t.addEventListener("click",l),function(){null==e||e.removeEventListener("click",a),null==n||n.removeEventListener("click",c),null==t||t.removeEventListener("click",l)}}),[a,c,l]);var u=r.install_updateHeader(D,A);return t&&(u="chrome"===C.platformInfo.browser?n?r.install_installHeader(D,A):r.install_installHeaderChrome(P,D,A):"firefox"===C.platformInfo.browser?n?r.install_installHeader(D,A):r.install_installHeaderFirefox(j,D,A):r.install_installHeader(D,A)),(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:u}})},T=t(6508),y=t(3764);var R=function(e){var n=e.browserName,t=(0,x.useLocalizationState)("t").INSTALLATION_PROCESS,i=(0,m.useSessionState)("serverOrigin"),r="chrome"===C.platformInfo.browser,s="firefox"===C.platformInfo.browser,a="safari"===C.platformInfo.browser,c="";return r?c=I.URL_EXTENSION_INSTALLER_CHROME:s?c=i+I.URL_EXTENSION_INSTALLER_FIREFOX:a&&(c=i+I.URL_MAC_PLUGIN),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:t.bp_client_old_extension_version(n)}),(r||s||a)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("span",{children:t.bp_client_update_extension_part1()}),(0,o.jsx)("a",{href:c,rel:"noopener noreferrer",target:"_blank",children:t.bp_client_update_extension_text()}),(0,o.jsx)("span",{children:t.bp_client_update_extension_part2()})]})]})},k=t(4432),B=function(){return location.reload()};var z=t(1960),W=5e3;function G(){var e,n,t,r,s,a,c,l,u,d,f,_;e=(0,g.useBpClientStateConnector)(),n=(0,N.useModalsStateMethods)(),t=n.openModal,r=n.closeModal,s=(0,x.useLocalizationState)("t"),a=(0,b.useEvent)((function(){t({id:O,title:s.INSTALLATION_PROCESS.bp_client_not_authorized_header(),body:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:s.INSTALLATION_PROCESS.bp_client_not_authorized_message_part1()}),(0,o.jsx)("a",{href:L,rel:"noopener noreferrer",target:"_blank",children:s.ERROR_MESSAGES.domainAuthentificationErrorAnchor()}),(0,o.jsx)("span",{children:s.INSTALLATION_PROCESS.bp_client_not_authorized_message_part2()})]}),actions:function(e){var n=e.closeModal;return(0,o.jsx)(v.SmButton,{onClick:n,children:s.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})}})})),c=(0,b.useEvent)((function(){r(O)})),(0,i.useEffect)((function(){return e.dispenser.subscribe({onShowDomainAuthorizationDialog:a,onHideDomainAuthorizationDialog:c}).unsubscribe}),[e,a,c]),function(){var e=(0,x.useLocalizationState)("t").WINDOW_POPUP_TITLES_AND_MESSAGES,n=(0,g.useBpClientState)("isExtensionAvailable"),t=(0,g.useBpClientStateConnector)(),r=(0,N.useModalsStateMethods)().openModal,s=(0,b.useEvent)((function(t){r({title:e.window_title_warning(),body:(0,o.jsx)(M,{install:t,isExtAvailable:n}),actions:{ok:{title:e.window_buttonOk()}}})}));(0,i.useEffect)((function(){return t.dispenser.subscribe({onInstallationRequired:s}).unsubscribe}),[t,s])}(),l=(0,y.useNotificationsState)("methods").showNotification,u=(0,T.useOfflineStateMethods)().setShowOfflineAlert,d=(0,T.useOfflineStateDataShowOfflineAlert)(),f=(0,T.useOfflineErrorMessages)(),_=(0,T.useIsOffline)(),(0,i.useEffect)((function(){d&&l({type:"error",id:y.Notifications.OfflineStateError,content:f.isOffline,closable:!0,duration:5e3,onHide:function(){return u(!1)}})}),[f.isOffline,u,l,d]),(0,i.useEffect)((function(){_||u(!1)}),[_,u]),function(){var e=(0,g.useBpClientStateConnector)(),n=(0,x.useLocalizationState)("t").WINDOW_POPUP_TITLES_AND_MESSAGES,t=(0,N.useModalsStateMethods)().openModal,r=(0,b.useEvent)((function(e){t({title:n.window_title_warning(),body:(0,o.jsx)(R,{browserName:e}),actions:function(e){var t=e.closeModal;return(0,o.jsx)(v.SmButton,{onClick:t,children:n.window_buttonOk()})}})}));(0,i.useEffect)((function(){return e.dispenser.subscribe({onShowExtensionIsOldDialog:r}).unsubscribe}),[e,r])}(),function(){var e=(0,y.useNotificationsState)("methods"),n=e.showNotification,t=e.hideNotificationById,r=(0,k.useAppConfigState)("isClientOutdated"),s=(0,m.useSessionState)("isLoggedIn"),a=(0,x.useLocalizationState)("t").GLOBAL,c=(0,b.useEvent)((function(){s&&(r?n({type:"error",id:y.Notifications.OutdatedClientAppError,message:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:a.reload_confirm_new_msg_part1()}),(0,o.jsx)("a",{href:"#",onClick:B,children:a.reload_confirm_action_button_text()}),(0,o.jsx)("span",{children:a.reload_confirm_new_msg_part2()})]})}):t(y.Notifications.OutdatedClientAppError))}));(0,i.useEffect)((function(){c()}),[r,c])}(),function(){var e=(0,m.useSessionStateConnector)(),n=(0,g.useBpClientState)("isHelperAppInstanceCreated"),t=(0,y.useNotificationsState)("methods"),o=t.showNotification,r=t.hideNotificationById,s=(0,m.useSessionState)("phoneType"),a=(0,x.useLocalizationState)("t"),c=(0,b.useEvent)((function(e){if(e.canDial||"phone_type_none"===s)z.bpLogger.info("SIP phone or external line is in service"),r(y.Notifications.PhoneOutOfServiceError);else{var t;switch(z.bpLogger.warn("SIP phone or external line is out of service"),s){case"phone_type_nailed":t=a.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_virtual_phone_not_available();break;case"phone_type_soft_secure":case"phone_type_soft_unsecure":t=n?a.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_phone_not_available():a.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_helper_app_not_available();break;default:t=a.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_phone_not_available()}o({type:"error",id:y.Notifications.PhoneOutOfServiceError,message:t,closable:!1,showDelay:W})}})),l=(0,b.useEvent)((function(e,n){"agentServer"===e&&4===n&&o({type:"warning",id:y.Notifications.PhoneOutOfServiceError,message:a.ERROR_MESSAGES.phoneIsNotRegistered(),closable:!1,showDelay:W})})),u=(0,b.useEvent)((function(){o({type:"warning",id:y.Notifications.PhoneOutOfServiceError,message:a.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_3pcc_server_connectionLost(),closable:!1,showDelay:W})})),d=(0,b.useEvent)((function(){r(y.Notifications.PhoneOutOfServiceError)}));(0,i.useEffect)((function(){return e.dispenser.subscribe({onUpdateCapabilities:c,onServerError:l,onThreePCCServerGone:u,onThreePCCServerReady:d}).unsubscribe}),[c,l,u,d,e])}(),function(){var e=(0,y.useNotificationsState)("methods"),n=e.showNotification,t=e.hideNotificationById,o=(0,x.useLocalizationState)("t").WINDOW_POPUP_TITLES_AND_MESSAGES,r=(0,m.useSessionState)("sipServer"),s=(0,b.usePreviousValueRef)(r),a=(0,b.useEvent)((function(){r?t(y.Notifications.SipServerConnectionError):s.current&&n({type:"error",id:y.Notifications.SipServerConnectionError,message:o.window_messages_3pcc_server_connectionLost()})}));(0,i.useEffect)((function(){a()}),[r,a])}(),function(){var e=(0,y.useNotificationsState)("methods"),n=e.showNotification,t=e.hideNotificationById,o=(0,x.useLocalizationState)("t").GLOBAL,r=(0,i.useRef)(0),s=(0,b.useEvent)((function(){0!==r.current||(r.current=(new Date).getTime(),fetch("/",{method:"HEAD",cache:"no-store"}).catch((function(e){return console.error(e)})).finally((function(){var e=(new Date).getTime()-r.current;if(r.current=0,e>800){var i=o.slow_connection();n({type:"error",id:y.Notifications.SlowNetworkConnectionError,message:i}),z.bpLogger.warn("Slow connection detected")}else t(y.Notifications.SlowNetworkConnectionError)})))}));(0,i.useEffect)((function(){var e=setInterval(s,5e3);return function(){return clearInterval(e)}}),[s])}(),function(){var e=(0,y.useNotificationsState)("methods"),n=e.showNotification,t=e.hideNotificationById,r=(0,g.useBpClientState)("isDomainAuthorized"),s=(0,x.useLocalizationState)("t").ERROR_MESSAGES,a=(0,b.useEvent)((function(){r?t(y.Notifications.DomainNotAuthorizedForBPClientError):n({type:"error",id:y.Notifications.DomainNotAuthorizedForBPClientError,closable:!1,message:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:s.domain_authentication_error_part1()}),(0,o.jsx)("a",{href:L,rel:"noopener noreferrer",target:"_blank",children:s.domainAuthentificationErrorAnchor()}),(0,o.jsx)("span",{children:s.domain_authentication_error_part2()})]})})}));(0,i.useEffect)((function(){a()}),[r,a])}()}var F=function(e){var n=e.baseConnectors,t=e.authorizedConnectors,i=e.children;return G(),(0,o.jsx)(o.Fragment,{children:i(n,t)})},U=t(9572),H=t(5100),X=t(7282),V=t(6622),q=t(9464),J=t(4778),K=function(){var e=(0,m.useSessionState)("forceLogoutInfo"),n=(0,m.useSessionStateMethods)().closeForceLogout,t=(0,X.useFormatting)().formatFullName,i=(0,x.useLocalizationState)().t;(0,J.assertDefined)(e);var r=t(e.firstName,e.lastName),s=(0,V.formatDate)(e.timestamp);return(0,o.jsx)(v.SmSegment,{padded:!0,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2   overflow-hidden rounded-none border-none bg-transparent shadow-none",id:"login",children:(0,o.jsxs)(p.Modal,{isOpen:!0,size:"small",className:"max-w-[570px]","aria-describedby":"forceLogoutDialogDescription","data-testid":"forced-logout-modal",children:[(0,o.jsx)(p.Modal.Header,{children:i.WINDOW_POPUP_TITLES_AND_MESSAGES.window_title_information()}),(0,o.jsx)(p.Modal.Content,{children:(0,o.jsx)(p.Modal.Description,{id:"forceLogoutDialogDescription",children:(0,o.jsx)("p",{children:function(){switch(e.errorCode){case q.incomingErrorMessageCodes.forced_logout_by_another_session:return i.ERROR_MESSAGES.sessionWasOverwritten();case q.incomingErrorMessageCodes.forced_logout_by_supervisor:return i.ERROR_MESSAGES.forcedLogout(r,s);case q.incomingErrorMessageCodes.forced_logout_by_disabling_tenant:case q.incomingErrorMessageCodes.forced_logout_by_disabling_user:return i.ERROR_MESSAGES.account_has_been_disabled()}return e.forceLogoutReason}()})})}),(0,o.jsx)(p.Modal.Actions,{children:(0,o.jsx)(v.SmButton,{onClick:n,primary:!0,"data-testid":"ok-button",children:i.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})})]})})},Q=function(){var e=(0,U.useCurrentTabRole)(),n=(0,m.useSessionState)(["authChecked","isLoggedIn","showLoginDialog","offerForceLogin","forceLogoutInfo"]),t=n.authChecked,i=n.isLoggedIn,r=n.showLoginDialog,s=n.offerForceLogin,a=n.forceLogoutInfo,c=!(0,x.useLocalizationState)("language")||"undecided"===e&&!t,l=!c&&(r||!i),u=!!a&&l,d=s&&!a&&l;return(0,o.jsxs)("div",{className:"mx-auto h-full w-[496px]",children:[c&&(0,o.jsx)(p.Loader,{active:!0,size:"huge",color:"primary"}),l&&(0,o.jsx)(H.LoginPage,{}),u&&(0,o.jsx)(K,{}),d&&(0,o.jsx)(H.ForceLogin,{})]})},Y=r().memo((function(e){var n=e.baseConnectors,t=e.children;return(0,m.useSessionState)("isLoggedIn")?(0,o.jsx)(E.AuthorizedProviders,{baseConnectors:n,children:function(e){return(0,o.jsx)(F,{baseConnectors:n,authorizedConnectors:e,children:t})}}):(0,o.jsx)(Q,{})})),Z=t(1980),$=function(e){var n=e.baseConnectors,t=e.children,i=e.BaseConnectorsConsumer;return i?(0,o.jsx)(i,{baseConnectors:n,children:t}):t},ee=function(e){var n=e.app,t=e.platformSpecific,i=e.BaseConnectorsConsumer,r=e.children;return(0,o.jsx)(E.BaseProviders,{platformSpecific:t,app:n,children:function(e){return(0,o.jsx)($,{baseConnectors:e,BaseConnectorsConsumer:i,children:(0,o.jsx)(Z.Tooltip.Provider,{children:(0,o.jsx)(y.NotificationsStateProvider,{children:r(e)})})})}})},ne=function(e){var n=e.app,t=e.platformSpecific,i=e.children,r=e.BaseConnectorsConsumer,s=e.className,a=e.appRemoteName;return(0,o.jsx)(p.AppStyleSelector,{app:a,children:(0,o.jsx)("div",{className:(0,d.B)("h-full",s),children:(0,o.jsx)(ee,{app:n,platformSpecific:t,BaseConnectorsConsumer:r,children:function(e){return(0,o.jsx)(Y,{baseConnectors:e,children:i})}})})})},te=(0,b.createProviderWrapper)([c.UIContextProvider]),oe=function(){return(0,o.jsx)(ne,{platformSpecific:(0,h.createPlatformSpecific)("cal"),app:"cal",appRemoteName:"calendar",children:function(){return(0,o.jsx)(_.DndProvider,{backend:S.HTML5Backend,children:(0,o.jsx)(te,{children:(0,o.jsx)(f,{})})})}})};t(7445);(0,a.registerServiceWorker)(),(0,s.s)(document.getElementById("root")).render((0,o.jsx)(oe,{}))}}]);
//# sourceMappingURL=352.acd80f96.chunk.js.map