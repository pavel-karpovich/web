/*! For license information please see 179.7b059f45.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_bpinc_web_campaigns_ui=self.webpackChunk_bpinc_web_campaigns_ui||[]).push([[179],{7179:(e,t,n)=>{n.d(t,{E:()=>vt});var r=n(2322),i=n(6029),o=n.n(i),a=n(8091),s=n(5290),l=n(6441),u=n(9486),c=function(){var e=(0,u.useLocalizationState)().t,t=(0,a.useCampaignsState)(),n=t.tabs,o=t.selectedCampaignTabId,c=t.campaignItems,d=(0,a.useCampaignsStateMethods)(),f=d.selectTab,p=d.closeTab,m=(0,i.useMemo)((function(){return n.map((function(t){var n=function(){switch(t.type){case"voiceCampaigns":return e.CAMPAIGN_MONITOR.voice_campaigns();case"messagingCampaigns":return e.CAMPAIGN_MONITOR.messaging_campaigns();case"campaignResults":var n,r=c.find((function(e){return e.id===t.campaignId})),i=null!==(n=null==r?void 0:r.fields.name)&&void 0!==n?n:"";return i?"".concat(i,".").concat(e.CAMPAIGN_MONITOR.preview_detailed_results()):e.CAMPAIGN_MONITOR.preview_detailed_results();case"listRemainingRecords":var o=c.find((function(e){return e.id===t.campaignId})),a=null==o?void 0:o.lists.find((function(e){return e.id===t.listId}));return a?"".concat(a.metrics.name,". ").concat(e.CAMPAIGN_MONITOR.remaining_records()):e.CAMPAIGN_MONITOR.remaining_records();default:return"No title"}}(),r=s.CLOSEABLE_TABS_TYPES.includes(t.type);return{id:t.id,title:n,closeable:r}}))}),[n,e,c]);return(0,r.jsx)("header",{className:"flex h-[50px] items-center justify-between bg-[--campaigns-header-bg] py-1.5 pr-6",children:(0,r.jsx)(l.Tabs,{tabs:m,activeTabId:o,headerClassName:"bg-transparent border-b-transparent",tabsContentClassName:"hidden",onChange:f,onTabClose:p})})},d=n(9478),f=n.n(d),p=n(6622),m=n(7505),g=n(9717),b=n(1980),h=n(7960),v=function(e){var t=e.postponedTodayAM,n=e.postponedTodayPM,o=e.postponedTomorrowAM,a=e.postponedTomorrowPM,s=e.postponedLater,l=(0,u.useLocalizationState)().t,c=(0,i.useMemo)((function(){return{chart:{type:"bar",inverted:!0,animation:!1},title:{text:""},xAxis:{categories:[l.CAMPAIGN_MONITOR.today_am(),l.CAMPAIGN_MONITOR.today_pm(),l.CAMPAIGN_MONITOR.tomorrow_am(),l.CAMPAIGN_MONITOR.tomorrow_pm(),l.CAMPAIGN_MONITOR.later()],title:{text:null}},yAxis:{title:{text:""},labels:{format:"{value}"}},plotOptions:{series:{animation:!1,dataLabels:{enabled:!0}}},tooltip:{enabled:!1},legend:{enabled:!1},series:[{type:"bar",data:[{y:t},{y:n},{y:o},{y:a},{y:s}]}]}}),[t,n,o,a,s,l]);return(0,r.jsx)("div",{className:"h-[345px]",children:(0,r.jsx)(h.Chart,{options:c})})},y=function(){var e,t=(0,u.useLocalizationState)().t,n=(0,a.useSelectedTab)();if("listRemainingRecords"!==(null==n?void 0:n.type))throw new Error("Invalid tab type");var o=(0,a.useCampaignsStateMethods)().generateListReport,s=(0,a.useCampaignsState)().campaignItems.find((function(e){return e.id===n.campaignId})),c=null==s?void 0:s.lists.find((function(e){return e.id===n.listId})),d=(null==c?void 0:c.reportData)?Number(c.reportData.scheduled_today_am)+Number(c.reportData.scheduled_today_pm)+Number(c.reportData.scheduled_tomorrow_am)+Number(c.reportData.scheduled_tomorrow_pm)+Number(c.reportData.scheduled_later):0,h=(0,g.useEvent)((function(){o(n.campaignId,n.listId)}));return(0,i.useEffect)((function(){(null==c?void 0:c.isReportLoading)||(null==c?void 0:c.reportData)||h()}),[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-2.5 mt-4 flex items-center gap-3",children:[(0,r.jsx)("h1",{className:"text-xl font-bold",children:t.CAMPAIGN_MONITOR.remaining_records()}),(0,r.jsx)("div",{className:"h-4.5 w-0.5 bg-[--c-icon-default]"}),(0,r.jsx)("p",{className:"text-xl",children:(null==s?void 0:s.fields.name)||"\u2014"}),(0,r.jsx)("div",{className:"h-4.5 w-0.5 bg-[--c-icon-default]"}),(0,r.jsx)("p",{className:"text-xl",children:(null==c?void 0:c.metrics.name)||"\u2014"}),(0,r.jsx)("div",{className:"h-4.5 w-0.5 bg-[--c-icon-default]"}),(0,r.jsx)("p",{className:"text-xl",children:(null==c?void 0:c.reportAt)?(0,p.formatDate)(c.reportAt,{prefixed:!0,full:!0}):"\u2014"})]}),(null==c?void 0:c.isReportLoading)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.SmMessage,{className:"max-w-[720px] shrink-0",info:!0,children:t.CAMPAIGN_MONITOR.generating_report()}),(0,r.jsxs)("div",{className:"mt-2.5 flex gap-6",children:[(0,r.jsx)("div",{className:"h-8 pt-1 font-bold",children:"Progress"}),(0,r.jsx)("div",{className:"w-52 pt-1",children:(0,r.jsx)(m.SmProgress,{percent:100,indicating:!0,label:"0 of ".concat(null==c?void 0:c.metrics.records_total)})}),(0,r.jsx)("div",{children:(0,r.jsx)(l.SemanticButton,{className:"py-1.5",children:t.GLOBAL.cancel()})})]})]}),c&&!c.isReportLoading&&c.reportData&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mt-4 flex",children:[(0,r.jsxs)("div",{className:f()("w-60 p-6 text-center text-default shadow-[0px_2px_6px_#00000033]",{"bg-[--c-interaction-bar-bg] text-white":Number((null==c||null===(e=c.reportData)||void 0===e?void 0:e.available)||0)>0}),children:[(0,r.jsx)("div",{className:"mb-2 text-xl font-bold",children:c.reportData.available}),(0,r.jsx)("div",{children:t.CAMPAIGN_MONITOR.available_now()})]}),(0,r.jsxs)("div",{className:f()("w-60 p-6 text-center text-default shadow-[0px_2px_6px_#00000033]",{"bg-gray-200":d>0}),children:[(0,r.jsx)("div",{className:"mb-2 text-xl font-bold",children:d}),(0,r.jsx)("div",{children:t.CAMPAIGN_MONITOR.postponed()})]}),(0,r.jsxs)("div",{className:f()("w-60 p-6 text-center text-default shadow-[0px_2px_6px_#00000033]",{"bg-red-600 text-white":Number(c.reportData.out_of_calling_hours||0)>0}),children:[(0,r.jsx)("div",{className:"mb-2 text-xl font-bold",children:c.reportData.out_of_calling_hours}),(0,r.jsx)("div",{children:t.CAMPAIGN_MONITOR.misconfigured()})]}),(0,r.jsx)("button",{className:"ml-4 flex h-8 w-8 items-center justify-center rounded bg-gray-200 hover:bg-gray-300",onClick:h,children:(0,r.jsx)(b.IconRefresh24,{})})]}),(0,r.jsxs)("div",{className:"mt-4 max-w-[720px] px-4 py-2 shadow-[0px_2px_6px_#00000033]",children:[(0,r.jsx)("h2",{className:"mb-6 text-xl",children:t.CAMPAIGN_MONITOR.postponed_until()}),(0,r.jsx)(v,{postponedTodayAM:Number(c.reportData.scheduled_today_am)||0,postponedTodayPM:Number(c.reportData.scheduled_today_pm)||0,postponedTomorrowAM:Number(c.reportData.scheduled_tomorrow_am)||0,postponedTomorrowPM:Number(c.reportData.scheduled_tomorrow_pm)||0,postponedLater:Number(c.reportData.scheduled_later)||0})]})]})]})},O=n(4483),C=function(e){var t=e.className,n=e.children;return(0,r.jsx)("div",{className:(0,O.B)("flex flex-wrap justify-between",t),children:n})},S=function(e){var t=e.title;return(0,r.jsx)("div",{className:"mr-6 mt-2 text-xl font-bold leading-[24px] text-info",children:t})},j=n(8269),x=function(e){var t=e.getOptions,n=(0,u.useLocalizationState)().t,o=(0,g.useBoolean)(),a=o.value,s=o.toggle,c=(0,i.useMemo)((function(){return t({toggleShow:s})}),[t,s]);return(0,r.jsx)(l.PopupButton,{icon:!0,basic:!0,show:a,toggleShow:s,options:c,className:"flex size-6 items-center justify-center p-0 shadow-none",tooltip:n.SUPERVISION_PAGE.actions_menu_btn_tooltip(),children:(0,r.jsx)(j.IconTableActions,{})})},w=function(e){var t=e.column,n=(0,u.useLocalizeString)(),o=(0,a.useSelectedCampaign)(),l=n(s.campaignsColumnsLocalizationMap[t.id]),c=(0,i.useMemo)((function(){var e;if(!o||!t)return"\u2014";switch(t.id){case"out_calls_duration_average_per_day":case"out_calls_duration_total_per_day":case"in_max_wait_time":return"string"!=typeof(e=o.fields[t.id])&&"number"!=typeof e?"\u2014":(0,g.formatDurationShort)(e);case"running":return"running"===o.fields.state?"Running":"Stopped";default:return function(e){return"string"!=typeof e&&"number"!=typeof e?"\u2014":"".concat(e)}(o.fields[t.id])}}),[t,o]);return(0,r.jsxs)("div",{className:"border-l p-2 pr-4",children:[(0,r.jsx)("div",{className:"text-sm font-bold",children:t.customName||l}),(0,r.jsx)("div",{className:"mt-1 text-xl",children:c})]})},N=n(3346),I=n(4778);function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function M(){var e,t=(e=(0,u.useLocalizeString)(),(0,i.useCallback)((function(t){var n=function(t){return{id:t.id,defaultName:e(s.campaignsColumnsLocalizationMap[t.id]),customName:t.customName,isActive:t.isShown,meta:{beforeEditing:t}}};return t.map(n)}),[e]));return(0,i.useMemo)((function(){return{toEditing:t,fromEditing:P}}),[t])}function P(e){var t=null==e?void 0:e.reduce((function(e,t){return t.isGroup||e.push(function(e){var t,n=null===(t=e.meta)||void 0===t?void 0:t.beforeEditing;if(!n)throw new Error("Invalid column meta data");return A(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}({},n),{customName:e.customName,isShown:e.isActive})}(t)),e}),[]);return t}var T=n(9464);function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){E(e,t,n[t])}))}return e}function L(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function k(){var e,t=(e=(0,u.useLocalizeString)(),(0,i.useCallback)((function(t){return t.map((function(t){var n=function(t){return{id:t.id,defaultName:e(s.campaignsListsColumnsLocalizationMap[t.id]),customName:t.customName,isActive:t.isShown,meta:{beforeEditing:t}}};return(0,T.checkIsCampaignListsColumnGroup)(t)?{id:t.id,defaultName:e(s.campaignsListsColumnsLocalizationMap[t.id]),customName:t.customName,isGroup:!0,columns:t.columns.map(n),meta:{beforeEditing:t}}:n(t)}))}),[e]));return(0,i.useMemo)((function(){return{toEditing:t,fromEditing:D}}),[t])}function D(e){return(null==e?void 0:e.map((function(e){var t,n=function(e){var t,n=null===(t=e.meta)||void 0===t?void 0:t.beforeEditing;if(!n||(0,T.checkIsCampaignListsColumnGroup)(n))throw new Error("Invalid column meta data");return L(G({},n),{customName:e.customName,isShown:e.isActive})};return e.isGroup?L(G({},null===(t=e.meta)||void 0===t?void 0:t.beforeEditing),{id:e.id,customName:e.customName,columns:e.columns.map(n)}):n(e)})))||[]}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){R(e,t,n[t])}))}return e}function U(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function B(){var e,t=(e=(0,u.useLocalizeString)(),(0,i.useCallback)((function(t){return t.map((function(t){var n=function(t){return{id:t.id,defaultName:e(s.campaignsColumnsLocalizationMap[t.id]),customName:t.customName,isActive:t.isShown,meta:{beforeEditing:t}}};return(0,T.checkIsCampaignsTableColumnGroup)(t)?{id:t.id,defaultName:e(s.campaignsColumnsLocalizationMap[t.id]),customName:t.customName,isGroup:!0,columns:t.columns.map(n),meta:{beforeEditing:t}}:n(t)}))}),[e]));return(0,i.useMemo)((function(){return{toEditing:t,fromEditing:F}}),[t])}function F(e){return(null==e?void 0:e.map((function(e){var t,n=function(e){var t,n=null===(t=e.meta)||void 0===t?void 0:t.beforeEditing;if(!n||(0,T.checkIsCampaignsTableColumnGroup)(n))throw new Error("Invalid column meta data");return U(z({},n),{customName:e.customName,isShown:e.isActive})};return e.isGroup?U(z({},null===(t=e.meta)||void 0===t?void 0:t.beforeEditing),{id:e.id,customName:e.customName,columns:e.columns.map(n)}):n(e)})))||[]}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$(e,t,n[t])}))}return e}function H(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function K(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var q=function(e){var t=e.onClose,n=e.table,o=e.campaignId,c=K(e,["onClose","table","campaignId"]),d=(0,u.useLocalizationState)().t,f=B(),p=f.toEditing,m=f.fromEditing,g=M(),b=g.toEditing,h=g.fromEditing,v=k(),y=v.toEditing,O=v.fromEditing,C=(0,a.useCampaignsState)().pageConfig,S=(0,a.useCampaignsStateMethods)().updatePageConfig,j=(0,i.useMemo)((function(){return"campaignDetails"===n&&o?C.CAMPAIGN_DETAILS_TABLE_COLUMNS_CONFIG[o]||s.defaultCampaignDetailsTableColumnsConfig:[]}),[C,o,n]),x=(0,i.useMemo)((function(){return p(C.CAMPAIGNS_TABLE_COLUMNS_CONFIG)}),[C.CAMPAIGNS_TABLE_COLUMNS_CONFIG,p]),w=(0,i.useMemo)((function(){return b(j)}),[j,b]),N=(0,i.useMemo)((function(){return y(C.CAMPAIGN_LISTS_TABLE_COLUMNS_CONFIG)}),[C.CAMPAIGN_LISTS_TABLE_COLUMNS_CONFIG,y]),_=Y((0,i.useState)(x),2),A=_[0],P=_[1],T=Y((0,i.useState)(w),2),E=T[0],G=T[1],L=Y((0,i.useState)(N),2),D=L[0],R=L[1],z=(0,i.useMemo)((function(){return"campaignDetails"===n?E:"campaigns"===n?A:"lists"===n?D:[]}),[n,E,A,D]),U=(0,i.useCallback)((function(e){"campaignDetails"===n?G(e):"campaigns"===n?P(e):"lists"===n&&R(e)}),[n,G,P,R]),F=(0,i.useCallback)((function(){if("campaignDetails"===n){(0,I.assertDefined)(o);var e=h(E);S(H(V({},C),{CAMPAIGN_DETAILS_TABLE_COLUMNS_CONFIG:H(V({},C.CAMPAIGN_DETAILS_TABLE_COLUMNS_CONFIG),$({},o,e))}))}else if("campaigns"===n){var r=m(A);S(H(V({},C),{CAMPAIGNS_TABLE_COLUMNS_CONFIG:r}))}else if("lists"===n){var i=O(D);S(H(V({},C),{CAMPAIGN_LISTS_TABLE_COLUMNS_CONFIG:i}))}t()}),[n,o,E,A,h,m,S,t,C,D,O]);return(0,r.jsxs)(l.Modal,H(V({flex:!0,onClose:t,className:"relative max-h-[calc(100vh-4rem)] !w-auto max-w-[calc(100vw-2em)] flex-col overflow-hidden","aria-labelledby":"manage_metrics","data-testid":"manageMetricsModal"},c),{children:[(0,r.jsx)(l.Modal.Header,{id:"manage_metrics",role:"heading",children:d.SUPERVISION_PAGE.manage_metrics_modal_title()}),(0,r.jsx)(l.Modal.Content,{className:"flex flex-auto flex-col overflow-hidden",children:(0,r.jsx)(l.ColumnsEditor,{value:z,onChange:U})}),(0,r.jsxs)(l.Modal.Actions,{children:[(0,r.jsx)(l.SemanticButton,{enabledInOffline:!0,onClick:function(){return t()},"data-testid":"cancel-button",children:d.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(l.SemanticButton,{onClick:F,primary:!0,"data-testid":"ok-button",children:d.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})]})]}))};var J=function(){var e,t=(0,u.useLocalizationState)("t"),n=(0,a.useSelectedCampaign)(),o=(0,a.useCampaignsStateMethods)(),l=o.subscribe,c=o.unsubscribe,d=(0,a.useCampaignsState)(),f=d.pageConfig,p=d.selectedCampaignId,m=(0,i.useMemo)((function(){return f&&n?(f.CAMPAIGN_DETAILS_TABLE_COLUMNS_CONFIG[n.id]||s.defaultCampaignDetailsTableColumnsConfig).filter((function(e){return e.isShown})):[]}),[f,n]),g=function(){var e=(0,u.useLocalizationState)().t,t=(0,N.useModalComponentOpener)(q),n=(0,a.useSelectedCampaign)(),r=(0,a.useCampaignsStateMethods)().startStopCampaign,o="RUNNING"===(null==n?void 0:n.fields.state);return(0,i.useCallback)((function(i){var a=i.toggleShow;return[{children:e.SUPERVISION_PAGE.actions_menu_option_manage_metrics(),onClick:function(){t({campaignId:null==n?void 0:n.id,table:"campaignDetails"}),a()}},{children:o?e.CAMPAIGN_MONITOR.campaign_button_stopCampaign():e.CAMPAIGN_MONITOR.campaign_button_startCampaign(),onClick:function(){n&&(r(n.id,!o),a())}}]}),[t,e,n,r,o])}();return(0,i.useEffect)((function(){return l("details"),function(){return c("details")}}),[l,c,p]),(0,r.jsxs)("div",{children:[(0,r.jsxs)(C,{className:"mb-2",children:[(0,r.jsx)(S,{title:t.CAMPAIGN_MONITOR.campaign_details_title((null==n||null===(e=n.fields)||void 0===e?void 0:e.name)||"-")}),(0,r.jsx)(x,{getOptions:g})]}),(0,r.jsxs)("div",{className:"mt-2 flex flex-wrap gap-y-2",children:[!n&&(0,r.jsx)("div",{className:"text-sm text-gray-500",children:t.CAMPAIGN_MONITOR.no_campaign_selected()}),m.map((function(e){return(0,r.jsx)(w,{column:e},e.id)}))]})]})},Q=n(3830),X=n.n(Q),Z=n(2443);function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ne={};function re(e){var t=te((0,i.useState)(ne),2),n=t[0],r=t[1],o=function(e){return ie[e]}(e);return(0,Z.useLocalStorageForState)(n,o,r,ne),{collapsedGroupIds:n,toggleCollapsedGroup:(0,i.useCallback)((function(e){r(X()((function(t){t[e]=!t[e]})))}),[])}}var ie={campaigns:"adCampaignsListTableCollapsedGroupIds",details:"adCampaignDetailsTableCollapsedGroupIds",lists:"adListsTableCollapsedGroupIds"};var oe=function(e){var t=e.data,n=e.sortingSettings;return(0,i.useMemo)((function(){if(!n)return t;var e=n.column,r=n.sorting;return t.toSorted((function(t,n){var i=[t[e],n[e]],o=i[0],a=i[1];return"number"==typeof o&&"number"==typeof a?"ASC"===r?o-a:a-o:"string"==typeof o&&"string"==typeof a?"ASC"===r?o.localeCompare(a):a.localeCompare(o):0}))}),[t,n])};function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){se(e,t,n[t])}))}return e}function ue(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function ce(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var de=function(e){var t=e.columnsConfig,n=e.collapsedGroupIds,r=e.localize,o=(0,i.useMemo)((function(){return t?t.reduce((function(e,t,r){if((0,T.checkIsGroupedTableColumnGroup)(t)){var i=!!(null==n?void 0:n[t.id]),o=t.columns.filter((function(e){return e.isShown}));return ce(e).concat([ue(le({},t),{columns:i?o.slice(0,1):o})])}return t.isShown?ce(e).concat([t]):e}),[]):[]}),[t,n]);return{columns:(0,i.useMemo)((function(){return o.flatMap((function(e){return(0,T.checkIsGroupedTableColumnGroup)(e)?e.columns:e})).map((function(e){return{name:e.id,title:e.customName||r(e.id),width:e.width,align:"start",sticky:"name"===e.id}}))}),[o,r]),groups:(0,i.useMemo)((function(){return o.reduce((function(e,t,i,o){if((0,T.checkIsGroupedTableColumnGroup)(t)){if(!t.columns.length)return e;var a=!!(null==n?void 0:n[t.id]);return e.push({id:t.id,content:t.customName||r(t.id),colspan:a?1:t.columns.length,collapsed:a}),e}var s=o[i-1];if(!(0,T.checkIsGroupedTableColumnGroup)(s)){var l=e[e.length-1];return l||(l={colspan:0,sticky:!1,collapsed:!1},e.push(l)),l.colspan++,e}return e.push({colspan:1,sticky:!1,collapsed:!1}),e}),[])}),[o,n,r])}},fe=n(4173);function pe(){var e=(0,a.useCampaignsState)().tabs,t=(0,a.useCampaignsStateMethods)(),n=t.openTab,r=t.selectTab;return(0,g.useEvent)((function(t){var i=t.listId,o=t.campaignId,a=e.find((function(e){return"listRemainingRecords"===e.type&&e.campaignId===o&&e.listId===i}));if(a)r(a.id);else{var s=(0,fe.uuid)();n({id:s,type:"listRemainingRecords",campaignId:o,listId:i}),r(s)}}))}var me=function(e){var t=e.listId,n=e.children,i=(0,a.useSelectedCampaign)(),o=pe();return(0,r.jsx)("button",{className:"w-full overflow-hidden text-link hover:underline",onClick:function(){(0,I.assertDefined)(i),o({campaignId:i.id,listId:t})},children:n})};function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function be(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var ye=function(e){var t,n,o=e.listId,s=(0,a.useCampaignsStateMethods)().enableDisableList,u=(0,a.useSelectedCampaign)(),c=null==u?void 0:u.lists.find((function(e){return e.id===o})),d="1"===(null==c?void 0:c.metrics.is_enabled),f=he((0,i.useState)(!1),2),p=f[0],m=f[1],g=(0,i.useCallback)((t=function(e){return ve(this,(function(t){switch(t.label){case 0:return p||!(null==u?void 0:u.id)?[2]:(m(!0),[4,s(u.id,o,e)]);case 1:return t.sent(),[2]}}))},n=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){be(o,r,i,a,s,"next",e)}function s(e){be(o,r,i,a,s,"throw",e)}a(void 0)}))},function(e){return n.apply(this,arguments)}),[s,p,o,null==u?void 0:u.id]);return(0,i.useEffect)((function(){m(!1)}),[d]),(0,r.jsx)(l.Checkbox,{toggle:!0,checked:d,disabled:p,labelClassName:(0,O.B)("min-w-[50px]"),onChange:g})};function Oe(){var e=(0,u.useLocalizationState)().t,t=(0,a.useCampaignsStateMethods)().enableDisableList,n=(0,N.useModalComponentOpener)(q),r=(0,a.useCampaignsState)().selectedListId,o=(0,a.useSelectedCampaign)(),s=pe(),l=null==o?void 0:o.lists.find((function(e){return e.id===r})),c=null==l?void 0:l.metrics.is_enabled;return(0,i.useCallback)((function(r){var i=r.toggleShow;return[{children:e.SUPERVISION_PAGE.actions_menu_option_manage_metrics(),onClick:function(){n({table:"lists"}),i()}},{children:c?e.CAMPAIGN_MONITOR.campaignTeam_button_disable():e.CAMPAIGN_MONITOR.campaignTeam_button_enable(),disabled:!l,onClick:function(){o&&l&&(t(o.id,l.id,!c),i())}},{children:e.CAMPAIGN_MONITOR.get_remaining_records(),disabled:!o||!l,onClick:function(){(0,I.assertDefined)(o),(0,I.assertDefined)(l),s({campaignId:o.id,listId:l.id}),i()}}]}),[n,e,o,l,t,c,s])}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ce(e,t,n[t])}))}return e}function je(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var xe=function(){var e=(0,u.useLocalizationState)().t,t=(0,u.useLocalizeString)(),n=(0,a.useCampaignsState)(),o=n.pageConfig,c=n.selectedListId,d=n.selectedCampaignId,f=(0,a.useCampaignsStateMethods)(),p=f.updatePageConfig,b=f.subscribe,h=f.unsubscribe,v=f.selectList,y=(0,a.useSelectedCampaign)(),O=(0,l.useSorting)(),j=O.sortingSettings,w=O.handleSortingChange,N=re("lists"),I=N.collapsedGroupIds,_=N.toggleCollapsedGroup,A=de({columnsConfig:o.CAMPAIGN_LISTS_TABLE_COLUMNS_CONFIG,collapsedGroupIds:I,localize:function(e){return t(s.campaignsListsColumnsLocalizationMap[e])||e}}),M=A.columns,P=A.groups,E=(0,i.useMemo)((function(){return((null==y?void 0:y.lists)||[]).map((function(e){return Se({id:e.id},e.metrics)}))}),[null==y?void 0:y.lists]),G=oe({data:E,sortingSettings:j}),L=(0,i.useCallback)((function(e){v(e.id)}),[v]),k=(0,i.useMemo)((function(){var e;return[null!==(e=null==y?void 0:y.lists.findIndex((function(e){return e.id===c})))&&void 0!==e?e:-1]}),[null==y?void 0:y.lists,c]);(0,i.useEffect)((function(){return b("lists"),function(){return h("lists")}}),[b,h,d]);var D,R,z=(0,i.useCallback)((function(e){var t=o.CAMPAIGN_LISTS_TABLE_COLUMNS_CONFIG.map((function(t){var n=function(t){if(!(t.id in e))return t;var n=e[t.id];return je(Se({},t),{width:n})};return(0,T.checkIsCampaignListsColumnGroup)(t)?je(Se({},t),{columns:t.columns.map(n)}):n(t)}));p(je(Se({},o),{CAMPAIGN_LISTS_TABLE_COLUMNS_CONFIG:t}))}),[o,p]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(C,{className:"mb-2",children:[(0,r.jsx)(S,{title:e.CAMPAIGN_MONITOR.campaignMonitor_lists_heading()}),(0,r.jsx)(x,{getOptions:Oe()})]}),(0,r.jsx)(l.ResizeTable,{columns:M,groups:P,data:G,sortingSettings:j,onSortingChange:w,toggleCollapsedGroup:_,onColumnsResize:z,isColumnResizable:!0,isResizable:!0,hasGrid:!0,onRowClick:L,selectedRows:k,renderItem:(D=(0,i.useCallback)((function(e){return"string"!=typeof e&&"number"!=typeof e?null:(0,g.formatDurationShort)(e)}),[]),R=(0,i.useCallback)((function(e){return"string"!=typeof e&&"number"!=typeof e?null:"".concat(e)}),[]),(0,i.useCallback)((function(e,t){var n=e[t.name];switch(t.name){case"records_completed_ratio":return{value:(0,r.jsx)(m.SmProgress,{percent:e.records_completed_ratio,className:"mb-0",progress:"percent",success:!0}),meta:void 0};case"list_last_updated":return{value:D(n),meta:void 0};case"is_enabled":return{value:(0,r.jsx)(ye,{listId:e.list_id}),meta:void 0};case"records_remaining":return{value:(0,r.jsx)(me,{listId:e.list_id,children:R(n)}),meta:void 0};default:return{value:R(n),meta:void 0}}}),[R,D])),scrollEnabled:!0,defaultHeight:220})]})};function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ne(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ae=function(e){var t=e.campaignId,n=(0,u.useLocalizationState)("t"),o=(0,a.useCampaignsState)().campaignItems,s=(0,i.useMemo)((function(){var e=o.find((function(e){return e.id===t}));return e?((null==e?void 0:e.teams)||[]).map((function(e){return e.name||""})):[]}),[o,t]),l=_e((0,i.useState)(null),2),c=l[0],d=l[1],f=(0,g.useResizeObserver)(c),p=(null==f?void 0:f.contentRect.width)||0,m=(0,i.useDeferredValue)(p),b=_e((0,i.useState)(null),2),h=b[0],v=b[1],y=(0,i.useMemo)((function(){if(h)return(0,g.getElementFontString)(h)}),[h]),O=(0,i.useCallback)((function(e){var t=e.restCount;return 0===t?"":n.KNOWLEDGE_BASE.plus_more(t)}),[n]),C=(0,i.useMemo)((function(){if(!y)return{fittedList:[],restCount:0};var e=function(e){var t=e.strings,n=e.font,r=e.containerWidth,i=e.after;return t.reduce((function(e,o){if(e.isEnough)return e;var a=Ne(e.fittedStrings).concat([o]),s=t.length-a.length,l=(null==i?void 0:i({restCount:s}))||"",u=a.join(", ")+l;return(0,g.calculateTextWidth)(u,n)>r?e.isEnough=!0:e.fittedStrings=a,e}),{isEnough:!1,fittedStrings:[]}).fittedStrings}({strings:s,containerWidth:m,font:y,after:O});return{fittedList:e,restCount:s.length-e.length}}),[m,s,y,O]),S=C.fittedList,j=C.restCount,x=S.join(", ")+((null==O?void 0:O({restCount:j}))||""),w=(0,i.useCallback)((function(e){e.stopPropagation(),console.log("TODO: show teams modal")}),[]);return(0,r.jsx)("button",{ref:d,className:"w-full overflow-hidden text-link hover:underline",onClick:w,children:(0,r.jsx)("span",{ref:v,className:"whitespace-nowrap",children:x})})};function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pe(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Ge=function(e){var t,n,o=e.campaignId,s=e.campaignState,u=(0,a.useCampaignsStateMethods)().startStopCampaign,c="RUNNING"===s,d=Te((0,i.useState)(!1),2),f=d[0],p=d[1],m=(0,i.useCallback)((t=function(e){return Ee(this,(function(t){switch(t.label){case 0:return f?[2]:(p(!0),[4,u(o,e)]);case 1:return t.sent(),[2]}}))},n=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){Pe(o,r,i,a,s,"next",e)}function s(e){Pe(o,r,i,a,s,"throw",e)}a(void 0)}))},function(e){return n.apply(this,arguments)}),[u,o,f]);return(0,i.useEffect)((function(){p(!1)}),[s]),(0,r.jsx)(l.Checkbox,{toggle:!0,checked:c,disabled:f,labelClassName:(0,O.B)("min-w-[50px]"),onChange:m})};function Le(){var e=(0,u.useLocalizationState)().t,t=(0,N.useModalComponentOpener)(q),n=(0,a.useSelectedCampaign)(),r=(0,a.useCampaignsStateMethods)(),o=r.startStopCampaign,s=r.restoreDefaultConfig,l="RUNNING"===(null==n?void 0:n.fields.state);return(0,i.useCallback)((function(r){var i=r.toggleShow;return[{children:e.SUPERVISION_PAGE.actions_menu_option_manage_metrics(),onClick:function(){t({campaignId:void 0,table:"campaigns"}),i()}},{children:e.SUPERVISION_PAGE.actions_menu_option_restore_default_view(),onClick:function(){s("CAMPAIGNS_TABLE_COLUMNS_CONFIG"),i()}},{children:l?e.CAMPAIGN_MONITOR.campaign_button_stopCampaign():e.CAMPAIGN_MONITOR.campaign_button_startCampaign(),onClick:function(){n&&(o(n.id,!l),i())}},{children:e.CAMPAIGN_MONITOR.assign_and_delete_teams(),disabled:!0,onClick:function(){}},{children:e.CAMPAIGN_MONITOR.open_settings(),disabled:!0,onClick:function(){}}]}),[t,e,n,o,l])}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ke(e,t,n[t])}))}return e}function Re(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var ze=function(){var e=(0,u.useLocalizationState)().t,t=(0,u.useLocalizeString)(),n=(0,a.useCampaignsState)(),o=n.campaignItems,c=n.selectedCampaignId,d=n.pageConfig,f=(0,a.useCampaignsStateMethods)(),p=f.selectCampaign,m=f.updatePageConfig,b=f.subscribe,h=f.unsubscribe;(0,i.useEffect)((function(){return b("campaigns"),function(){return h("campaigns")}}),[b,h]);var v,y,O=re("campaigns"),j=O.collapsedGroupIds,w=O.toggleCollapsedGroup,N=de({columnsConfig:d.CAMPAIGNS_TABLE_COLUMNS_CONFIG,collapsedGroupIds:j,localize:function(e){return t(s.campaignsColumnsLocalizationMap[e])}}),I=N.columns,_=N.groups,A=(0,i.useCallback)((function(e){p(e.id)}),[p]),M=(0,i.useCallback)((function(e){var t=d.CAMPAIGNS_TABLE_COLUMNS_CONFIG.map((function(t){var n=function(t){if(!(t.id in e))return t;var n=e[t.id];return Re(De({},t),{width:n})};return(0,T.checkIsCampaignsTableColumnGroup)(t)?Re(De({},t),{columns:t.columns.map(n)}):n(t)}));m(Re(De({},d),{CAMPAIGNS_TABLE_COLUMNS_CONFIG:t}))}),[d,m]),P=(0,l.useSorting)(),E=P.sortingSettings,G=P.handleSortingChange,L=(0,i.useMemo)((function(){return[o.findIndex((function(e){return e.id===c}))]}),[o,c]),k=(0,i.useMemo)((function(){return o.map((function(e){return De({id:e.id},e.fields)}))}),[o]),D=oe({data:k,sortingSettings:E});return(0,r.jsxs)("div",{children:[(0,r.jsxs)(C,{className:"mb-2",children:[(0,r.jsx)(S,{title:e.CAMPAIGN_MONITOR.campaignMonitor_heading()}),(0,r.jsx)(x,{getOptions:Le()})]}),(0,r.jsx)(l.ResizeTable,{columns:I,groups:_,data:D,sortingSettings:E,onSortingChange:G,onRowClick:A,toggleCollapsedGroup:w,onColumnsResize:M,isColumnResizable:!0,isResizable:!0,hasGrid:!0,selectedRows:L,renderItem:(v=(0,i.useCallback)((function(e){return"string"!=typeof e&&"number"!=typeof e?null:(0,g.formatDurationShort)(e)}),[]),y=(0,i.useCallback)((function(e){return"string"!=typeof e&&"number"!=typeof e?null:"".concat(e)}),[]),(0,i.useCallback)((function(e,t){var n=e[t.name],i=e.id;switch(t.name){case"out_calls_duration_average_per_day":case"out_calls_duration_total_per_day":case"in_max_wait_time":return{value:v(e[t.name]),meta:void 0};case"running":return{value:(0,r.jsx)(Ge,{campaignId:i,campaignState:e.state}),meta:void 0};case"teams":return{value:(0,r.jsx)(Ae,{campaignId:i}),meta:void 0};default:return{value:y(n),meta:void 0}}}),[y,v])),scrollEnabled:!0,defaultHeight:220})]})},Ue=n(7005);function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e){var t=e.pieConfig,n=(0,a.useSelectedCampaign)(),o=(0,i.useMemo)((function(){return n?(0,I.typedEntries)(n.dispositionsMetrics).reduce((function(e,t){var n=Fe(t,2),r=(n[0],n[1]);return e+Number(r)}),0):0}),[n]),s=(0,i.useMemo)((function(){return t&&n?n.dispositions.filter((function(e){var n=null==t?void 0:t.dispositions.find((function(t){return t.dispositionId===e.id}));return null==n?void 0:n.isShownOnPie})).map((function(e){var r=null==t?void 0:t.dispositions.find((function(t){return t.dispositionId===e.id}));(0,I.assertDefined)(r,"Desposition config not found");var i="".concat(T.dispositionMetricPrefix).concat(e.id),a=Number(n.dispositionsMetrics[i]||0)/o*100;return{name:e.name,y:a,color:r.color}})):[]}),[t,n,o]),l=(0,i.useMemo)((function(){return t&&n?Array.from(new Set(n.dispositions.map((function(e){return e.group})))).map((function(e){var r=t.groups.find((function(t){return t.name===e}));(0,I.assertDefined)(r,"Group config not found");var i=n.dispositions.filter((function(t){return t.group===e})).reduce((function(e,t){var r="".concat(T.dispositionMetricPrefix).concat(t.id);return e+Number(n.dispositionsMetrics[r]||0)}),0);return{name:e,y:i/o*100,color:r.color}})):[]}),[t,n,o]),u=(0,i.useMemo)((function(){return 0===o?[{name:"No data",y:100,color:"#cccccc"}]:"dispositions"===(null==t?void 0:t.displayMode)?s:l}),[o,t,s,l]),c=(0,i.useMemo)((function(){return{chart:{plotBorderWidth:0,plotShadow:!1,type:"pie",height:200},title:{text:""},tooltip:{pointFormat:"<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{cursor:"pointer",dataLabels:{enabled:!0,format:"{point.percentage:.1f}%",distance:-30,filter:{property:"percentage",operator:">",value:4}}},series:{animation:{duration:0}}},series:[{type:"pie",data:u}]}}),[u]);return(0,r.jsx)("div",{children:(0,r.jsx)(h.Chart,{options:c})})}var $e=n(2122);function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function He(e){return function(e){if(Array.isArray(e))return Ve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e){var t=e.pieConfig,n=e.onChangeColor,o=(0,u.useLocalizationState)().t,s=(0,a.useSelectedCampaign)(),l=function(e){var t=(0,a.useSelectedCampaign)(),n=(0,i.useMemo)((function(){return t&&e&&0!==e.dispositions.length&&(null==t?void 0:t.dispositions.reduce((function(n,r){var i,o=null==e?void 0:e.dispositions.find((function(e){return e.dispositionId===r.id})),a=null===(i=null==o?void 0:o.isShownOnLegend)||void 0===i||i;if(!o||!a)return n;var s="".concat(T.dispositionMetricPrefix).concat(r.id),l=t.dispositionsMetrics[s],u=Number(l),c=Number.isNaN(u)?0:u;return He(n).concat([{id:r.id,color:null==o?void 0:o.color,name:r.name,count:c}])}),[]))||[]}),[t,e]),r=(0,i.useMemo)((function(){return t?Array.from(new Set(t.dispositions.map((function(e){return e.group})))).map((function(n){var r=null==e?void 0:e.groups.find((function(e){return e.name===n}));(0,I.assertDefined)(r,"Group config for ".concat(n," not found"));var i=t.dispositions.filter((function(e){return e.group===n})).reduce((function(e,n){var r="".concat(T.dispositionMetricPrefix).concat(n.id),i=t.dispositionsMetrics[r],o=Number(i);return e+(Number.isNaN(o)?0:o)}),0);return{id:n,color:null==r?void 0:r.color,name:n,count:i}}),[]):[]}),[t,null==e?void 0:e.groups]);return(0,i.useMemo)((function(){return"dispositions"===(null==e?void 0:e.displayMode)?n:r}),[null==e?void 0:e.displayMode,n,r])}(t),c=(0,i.useMemo)((function(){return(0,$e.throttle)((function(e){null==n||n(e.target.dataset.dispositionId,e.target.value)}),200)}),[n]);return s?l.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"shrink-0 text-right font-bold",children:o.CAMPAIGN_MONITOR.count()}),(0,r.jsx)("div",{className:(0,O.B)("grow overflow-auto pb-2 pr-1"),children:l.map((function(e){return(0,r.jsxs)("div",{className:"mb-1 flex w-full justify-between gap-2",children:[(0,r.jsxs)("div",{className:"relative flex gap-2",children:[(0,r.jsxs)("label",{children:[n&&(0,r.jsx)("input",{type:"color","data-disposition-id":e.id,className:"absolute z-[-1] opacity-0",onChange:c,value:e.color}),(0,r.jsx)("div",{className:"pointer relative top-1 size-3",style:{backgroundColor:e.color}})]}),(0,r.jsx)("p",{className:"min-w-1/2 max-w-40 shrink-0",children:e.name})]}),(0,r.jsx)("p",{className:"text-wrap",children:e.count})]},e.id)}))})]}):(0,r.jsx)("div",{className:"flex justify-center py-2",children:o.CAMPAIGN_MONITOR.no_dispositions()}):(0,r.jsx)("div",{className:"flex justify-center py-2",children:o.CAMPAIGN_MONITOR.no_campaign_selected()})}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e){var t=e.pieConfig,n=e.onChangeTitle,o=(0,u.useLocalizationState)().t,a=qe((0,i.useState)(""),2),s=a[0],l=a[1],c=o.CAMPAIGN_MONITOR.default_pie_title(),d=function(){l((null==t?void 0:t.title)||c)};(0,i.useEffect)((function(){d()}),[null==t?void 0:t.title]);return(0,r.jsxs)("div",{className:"px-6",children:[n&&(0,r.jsx)("input",{className:"w-full rounded-md border border-gray-300 bg-white px-4 py-2 text-xl",value:s,onChange:function(e){return null==l?void 0:l(e.target.value)},onFocus:function(){d()},onBlur:function(){null==n||n(s),d()}}),!n&&(0,r.jsx)("p",{className:"text-xl",children:s})]})}function Qe(e){var t=e.pieConfig,n=e.onChangeColor,i=e.onChangeTitle,o=e.className;return(0,r.jsxs)("div",{className:(0,O.B)("flex h-full flex-col items-stretch overflow-hidden",o),children:[(0,r.jsx)(Je,{pieConfig:t,onChangeTitle:i}),(0,r.jsxs)("div",{className:"mt-2 flex grow overflow-hidden pr-6",children:[(0,r.jsx)("div",{className:"w-52 shrink-0",children:(0,r.jsx)(We,{pieConfig:t})}),(0,r.jsx)("div",{className:"flex min-w-44 grow flex-col items-stretch",children:(0,r.jsx)(Ke,{pieConfig:t,onChangeColor:n})})]})]})}var Xe=(0,Ue.atom)(void 0),Ze=n(4915);function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return it(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(){var e=(0,u.useLocalizationState)().t,t=function(){var e=rt((0,Ue.useAtom)(Xe),2),t=e[0],n=e[1],r=(0,a.useSelectedCampaign)(),o=(0,i.useMemo)((function(){var e;return null==r||null===(e=r.dispositions)||void 0===e?void 0:e.every((function(e){var n=null==t?void 0:t.dispositions.find((function(t){return t.dispositionId===e.id}));return null==n?void 0:n.isShownOnLegend}))}),[null==r?void 0:r.dispositions,t]),s=(0,i.useMemo)((function(){var e;return(null==r||null===(e=r.dispositions)||void 0===e?void 0:e.some((function(e){var n=null==t?void 0:t.dispositions.find((function(t){return t.dispositionId===e.id}));return null==n?void 0:n.isShownOnLegend})))&&!o}),[null==r?void 0:r.dispositions,t,o]),l=(0,i.useMemo)((function(){var e;return null==r||null===(e=r.dispositions)||void 0===e?void 0:e.every((function(e){var n=null==t?void 0:t.dispositions.find((function(t){return t.dispositionId===e.id}));return null==n?void 0:n.isShownOnPie}))}),[null==r?void 0:r.dispositions,t]),u=(0,i.useMemo)((function(){var e;return(null==r||null===(e=r.dispositions)||void 0===e?void 0:e.some((function(e){var n=null==t?void 0:t.dispositions.find((function(t){return t.dispositionId===e.id}));return null==n?void 0:n.isShownOnPie})))&&!l}),[null==r?void 0:r.dispositions,t,l]),c=(0,i.useCallback)((function(){n(X()((function(e){e&&e.dispositions.forEach((function(e){e.isShownOnLegend=!o}))})))}),[o,n]),d=(0,i.useCallback)((function(){n(X()((function(e){e&&e.dispositions.forEach((function(e){e.isShownOnPie=!l}))})))}),[l,n]);return{isAllOnLegend:o,isIndeterminateAllOnLegend:s,isAllOnPie:l,isIndeterminateAllOnPie:u,toggleIsAllOnLegend:c,toggleIsAllOnPie:d,changeIsShownOnLegend:function(e,t){n(X()((function(n){if(n){var r=n.dispositions.find((function(t){return t.dispositionId===e}));r&&(r.isShownOnLegend=t)}})))},changeIsShownOnPie:function(e,t){n(X()((function(n){if(n){var r=n.dispositions.find((function(t){return t.dispositionId===e}));r&&(r.isShownOnPie=t)}})))}}}(),n=t.isAllOnLegend,s=t.isAllOnPie,c=t.isIndeterminateAllOnLegend,d=t.isIndeterminateAllOnPie,f=t.toggleIsAllOnLegend,p=t.toggleIsAllOnPie,m=t.changeIsShownOnLegend,g=t.changeIsShownOnPie,b=ot((0,Ue.useAtom)(Xe),2),h=b[0],v=b[1],y=(0,i.useCallback)((function(e){var t=e.target;if((0,Ze.isHTMLInputElement)(t)){var n=t.value;v(X()((function(e){e&&(e.displayMode=n)})))}}),[v]),O=function(){var e=(0,a.useSelectedCampaign)(),t=tt((0,Ue.useAtom)(Xe),1)[0];return(0,i.useMemo)((function(){var n=(0,$e.groupBy)((null==e?void 0:e.dispositions)||[],(function(e){return e.group}));return Object.entries(n).reduce((function(e,n){var r=tt(n,2),i=r[0],o=r[1];return e.push({isGroup:!0,name:i}),null==o||o.forEach((function(n){var r=null==t?void 0:t.dispositions.find((function(e){return e.dispositionId===n.id}));r&&e.push({id:n.id,name:n.name,isGroup:!1,isShownOnLegend:r.isShownOnLegend,isShownOnPie:r.isShownOnPie})})),e}),[])}),[null==e?void 0:e.dispositions,t])}();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-2 flex gap-2",children:[(0,r.jsx)("h3",{className:"mr-6 text-xl",children:e.CAMPAIGN_MONITOR.displaying_mode()}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"mr-4 flex shrink-0 items-center",children:(0,r.jsx)(l.Radio,{checked:"dispositions"===(null==h?void 0:h.displayMode),value:"dispositions",label:"Dispositions",name:"displayMode",onChange:y})}),(0,r.jsx)("div",{className:"flex shrink-0 items-center",children:(0,r.jsx)(l.Radio,{checked:"groups"===(null==h?void 0:h.displayMode),value:"groups",label:"Groups",name:"displayMode",onChange:y})})]})]}),(0,r.jsx)("p",{className:"mb-4",children:e.CAMPAIGN_MONITOR.config_per_campaign_note()}),"dispositions"===(null==h?void 0:h.displayMode)&&(0,r.jsx)("div",{className:"mt-4 pb-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-[minmax(min-content,15rem),6rem,6rem] gap-1",children:[(0,r.jsx)("div",{className:"mb-1"}),(0,r.jsx)("div",{className:"mb-1 font-bold",children:e.CAMPAIGN_MONITOR.display_on_pie()}),(0,r.jsx)("div",{className:"mb-1 font-bold",children:e.CAMPAIGN_MONITOR.display_in_list()}),(0,r.jsx)("div",{className:"mb-1",children:e.CAMPAIGN_MONITOR.select_all()}),(0,r.jsx)("div",{className:"mb-1",children:(0,r.jsx)(l.Checkbox,{checked:s,indeterminate:d,onChange:p})}),(0,r.jsx)("div",{className:"mb-1",children:(0,r.jsx)(l.Checkbox,{checked:n,indeterminate:c,onChange:f})}),O.map((function(e){return(0,r.jsx)(o().Fragment,{children:e.isGroup?(0,r.jsx)("div",{className:"col-span-3 overflow-hidden text-ellipsis font-bold",title:e.name,children:e.name}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"overflow-hidden text-ellipsis pl-4",title:e.name,children:e.name}),(0,r.jsx)("div",{children:(0,r.jsx)(l.Checkbox,{checked:e.isShownOnPie,onChange:function(){g(e.id,!e.isShownOnPie)}})}),(0,r.jsx)("div",{children:(0,r.jsx)(l.Checkbox,{checked:e.isShownOnLegend,onChange:function(){m(e.id,!e.isShownOnLegend)}})})]})},e.isGroup?e.name:e.id)}))]})})]})}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){lt(e,t,n[t])}))}return e}function ct(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function dt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return st(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return st(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pt=function(e){var t=(0,a.useCampaignsState)().pageConfig,n=(0,a.useSelectedCampaign)(),o=(null==n?void 0:n.id)?t.DISPOSITIONS_PIE_CONFIG[n.id]:void 0,s=ft((0,i.useState)((function(){var e=(0,Ue.createStore)();return e.set(Xe,o),e})),1)[0];return(0,r.jsx)(Ue.Provider,{store:s,children:(0,r.jsx)(mt,ut({},e))})};function mt(e){var t=e.onClose,n=e.mountNode,o=dt(e,["onClose","mountNode"]),s=(0,u.useLocalizationState)().t,c=(0,a.useCampaignsState)().pageConfig,d=(0,a.useSelectedCampaign)(),f=(0,a.useCampaignsStateMethods)().updatePageConfig,p=ft((0,Ue.useAtom)(Xe),2),m=p[0],g=p[1],b=(0,i.useCallback)((function(e,t){g(X()((function(n){if(n){var r=n.dispositions.find((function(t){return t.dispositionId===e}));r&&(r.color=t)}})))}),[g]),h=(0,i.useCallback)((function(e){g(X()((function(t){t&&(t.title=e)})))}),[g]);return m?(0,r.jsxs)(l.Modal,ct(ut({flex:!0,onClose:t,mountNode:n,className:"relative max-h-[calc(100vh-4rem)] !w-auto max-w-[calc(100vw-2em)] flex-col overflow-hidden"},o),{children:[(0,r.jsx)(l.Modal.Header,{id:"manage_metrics",role:"heading",children:s.CAMPAIGN_MONITOR.chart_settings()}),(0,r.jsx)(l.Modal.Content,{className:"flex w-full flex-auto flex-col overflow-hidden p-0",children:(0,r.jsxs)("div",{className:"flex min-h-[387px] items-stretch overflow-x-auto overflow-y-hidden",children:[(0,r.jsx)("div",{className:"shrink-0 border-r pt-2",children:(0,r.jsx)(Qe,{pieConfig:m,onChangeColor:b,onChangeTitle:h})}),(0,r.jsx)("div",{className:"overflow-y-auto pl-6 pr-2 pt-2",children:(0,r.jsx)(at,{})})]})}),(0,r.jsxs)(l.Modal.Actions,{children:[(0,r.jsx)(l.SemanticButton,{enabledInOffline:!0,onClick:function(){return t()},"data-testid":"cancel-button",children:s.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonCancel()}),(0,r.jsx)(l.SemanticButton,{onClick:function(){(null==d?void 0:d.id)&&(f(ct(ut({},c),{DISPOSITIONS_PIE_CONFIG:ct(ut({},c.DISPOSITIONS_PIE_CONFIG),lt({},d.id,m))})),t())},primary:!0,"data-testid":"ok-button",children:s.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})]})]})):null}var gt=function(){var e=(0,a.useSelectedCampaign)(),t=(0,N.useModalComponentOpener)(pt),n=(0,a.useCampaignsState)(),o=n.pageConfig,s=n.selectedCampaignId,u=(0,a.useCampaignsStateMethods)(),c=u.subscribe,d=u.unsubscribe,f=(null==e?void 0:e.id)?o.DISPOSITIONS_PIE_CONFIG[e.id]:void 0;return(0,i.useEffect)((function(){return c("pie"),function(){return d("pie")}}),[c,d,s]),(0,r.jsxs)("div",{className:"w-[500px] shrink-0",children:[(0,r.jsx)("div",{className:"mb-2 flex h-6 justify-end",children:(0,r.jsx)(l.Button,{clickThrottle:500,onClick:function(){return t()},children:(0,r.jsx)(j.SystemIcon,{className:"size-5"})})}),(0,r.jsx)(Qe,{pieConfig:f,className:"max-h-60"})]})},bt=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ze,{}),(0,r.jsx)(J,{}),(0,r.jsxs)("div",{className:"mt-4 flex flex-nowrap gap-4",children:[(0,r.jsx)("div",{className:"flex-1 shrink overflow-hidden",children:(0,r.jsx)(xe,{})}),(0,r.jsx)(gt,{})]})]})},ht=function(){var e=(0,a.useSelectedTab)();switch(null==e?void 0:e.type){case"voiceCampaigns":return(0,r.jsx)(bt,{});case"messagingCampaigns":case"campaignResults":return(0,r.jsx)(r.Fragment,{children:"Work in progress"});case"listRemainingRecords":return(0,r.jsx)(y,{});default:return(0,r.jsx)(r.Fragment,{children:"Unknown tab type"})}},vt=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c,{}),(0,r.jsx)("div",{className:"flex grow flex-col overflow-y-auto px-6 py-2","data-testid":"campaigns-page",children:(0,r.jsx)(ht,{})})]})}},4483:(e,t,n)=>{n.d(t,{B:()=>a});var r=n(9478),i=n.n(r),o=n(324);function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.m6)(i()(t))}}}]);
//# sourceMappingURL=179.7b059f45.chunk.js.map