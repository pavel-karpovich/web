/*! For license information please see 152.c56d0f4f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_bpinc_web_chat_center_ui=self.webpackChunk_bpinc_web_chat_center_ui||[]).push([[152],{7152:(e,t,n)=>{n.d(t,{Nf:()=>xn,bF:()=>vr,yj:()=>yr,y6:()=>Vr});var r=n(2322),a=n(6029),o=n.n(a),s=n(1839),i=n(9008),l=n(7005),c=n(6441),u=n(2122),d=n(7505),f=n(9717),m=n(9486);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){i=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(){var e,t=(0,m.useLocalizationState)().t,n=h((0,a.useState)(!1),2),o=n[0],i=n[1],p=(0,l.useAtomValue)(s.scrollerApiAtom),b=Boolean(null===(e=(0,s.useGroupChatItem)())||void 0===e?void 0:e.unreadMessages.length),g=(0,f.useAsRef)(b),v=(0,a.useMemo)((function(){return(0,u.debounce)((function(){i(g.current)}),500)}),[g,i]);return(0,a.useEffect)((function(){b?v():i(!1)}),[b,v]),o?(0,r.jsxs)(c.SemanticButton,{enabledInOffline:!0,basic:!0,primary:!0,onClick:p.scrollToBottom,className:"absolute bottom-4 left-4 z-[1] flex h-8 shrink-0 items-center self-end !bg-white px-6 hover:!bg-white",children:[t.CHAT_CENTER.unread_messages_button_text(),(0,r.jsx)(d.SmIcon,{name:"caret down"})]}):null}var g=n(9552),v=n(6622);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function C(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(){var e=(0,m.useLocalizationState)().t.CHAT_CENTER.unread_messages(),t=(0,s.useGroupChatItem)(),n=(0,a.useRef)(null==t?void 0:t.firstUnreadTimestamp);return(0,a.useMemo)((function(){var r=t&&function(e){var t=C(e),n=e.length;for(;n--;){var r,a=(null===(r=e[n-1])||void 0===r?void 0:r.sendTime)||0,o=e[n].sendTime;(0,f.areSameDays)(a,o)||t.splice(n,0,(0,v.formatChatDate)(o))}return t}(t.messages)||[],a=n.current;return a?function(e,t,n){for(var r=0;r<e.length;r+=1){var a=e[r];if(x(a,Object)&&a.sendTime===t)return e.slice(0,r).concat(n).concat(e.slice(r))}return e}(r,a,e):r}),[t,e])}var S=n(4554);var E,j=n(8770),I=n(7282),N=n(3385),w=n(9327),O=n(3711),A=n(4778),T=["title","titleId"];function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}function k(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var P=function(e,t){var n=e.title,r=e.titleId,o=k(e,T);return a.createElement("svg",M({xmlns:"http://www.w3.org/2000/svg",width:30,height:26.667,viewBox:"0 0 30 26.667",ref:t,"aria-labelledby":r},o),n?a.createElement("title",{id:r},n):null,E||(E=a.createElement("path",{d:"M30 12.5a3.318 3.318 0 0 0-1.667-2.871V1.667A1.684 1.684 0 0 0 26.667 0a1.663 1.663 0 0 0-1.041.366L21.2 3.909a12.641 12.641 0 0 1-7.864 2.758h-10A3.333 3.333 0 0 0 0 10v5a3.333 3.333 0 0 0 3.333 3.333h1.756A12.657 12.657 0 0 0 4.975 20a13.194 13.194 0 0 0 1.331 5.778 1.634 1.634 0 0 0 1.479.889h3.869A1.656 1.656 0 0 0 13 24.033 6.633 6.633 0 0 1 11.641 20a6.3 6.3 0 0 1 .23-1.667h1.463a12.639 12.639 0 0 1 7.866 2.758l4.429 3.543a1.666 1.666 0 0 0 2.707-1.3v-7.963A3.319 3.319 0 0 0 30 12.5Zm-5 7.366-1.721-1.377A15.979 15.979 0 0 0 13.333 15v-5a15.979 15.979 0 0 0 9.945-3.489L25 5.134Z"})))},R=(0,a.forwardRef)(P);n.p;var L,D=["title","titleId"];function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}function G(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var B=function(e,t){var n=e.title,r=e.titleId,o=G(e,D);return a.createElement("svg",H({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",ref:t,"aria-labelledby":r},o),n?a.createElement("title",{id:r},n):null,L||(L=a.createElement("path",{d:"M10 0a10 10 0 1 0 10 10A10.007 10.007 0 0 0 10 0Zm0 .87A9.13 9.13 0 1 1 .87 10 9.124 9.124 0 0 1 10 .87Zm3.474 5.211a.435.435 0 0 0-.3.133L10 9.385 6.829 6.214a.435.435 0 1 0-.615.615L9.385 10l-3.171 3.171a.435.435 0 1 0 .615.615L10 10.615l3.171 3.171a.435.435 0 1 0 .615-.615L10.615 10l3.171-3.171a.435.435 0 0 0-.312-.748Z",fill:"#767676"})))},U=(0,a.forwardRef)(B);n.p;var F,z=["title","titleId"];function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}function W(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var q=function(e,t){var n=e.title,r=e.titleId,o=W(e,z);return a.createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},o),n?a.createElement("title",{id:r},n):null,F||(F=a.createElement("path",{d:"M12 3C6.477 3 2 6.694 2 11.25a7.408 7.408 0 0 0 2.315 5.275c.029.071.77 1.93-1.424 3.826a.371.371 0 0 0-.122.274.38.38 0 0 0 .385.375.394.394 0 0 0 .083-.009A10.377 10.377 0 0 0 8.5 18.968a11.847 11.847 0 0 0 3.5.532c5.523 0 10-3.694 10-8.25S17.523 3 12 3Z",fill:"none",stroke:"#4b85a0",strokeWidth:2})))},V=(0,a.forwardRef)(q);n.p;n.p;var K,$=["title","titleId"];function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(this,arguments)}function X(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var J=function(e,t){var n=e.title,r=e.titleId,o=X(e,$);return a.createElement("svg",Y({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",ref:t,"aria-labelledby":r},o),n?a.createElement("title",{id:r},n):null,K||(K=a.createElement("path",{d:"M9.761 1 8.7 2.058l.82.82L4.884 6.6l-1.11-1.11-1.058 1.059L5.56 9.393 1 13.952V15h1.048l4.559-4.56 2.844 2.844 1.058-1.058-1.045-1.045 3.67-4.691.807.807L15 6.239Z",fill:"none",stroke:"#767676"})))},Q=(0,a.forwardRef)(J);n.p;var ee,te=["title","titleId"];function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ne.apply(this,arguments)}function re(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ae=function(e,t){var n=e.title,r=e.titleId,o=re(e,te);return a.createElement("svg",ne({xmlns:"http://www.w3.org/2000/svg",width:14,height:14,viewBox:"0 0 14 14",ref:t,"aria-labelledby":r},o),n?a.createElement("title",{id:r},n):null,ee||(ee=a.createElement("path",{d:"M13.763 2.865 9.63 7l4.133 4.135a.8.8 0 0 1 0 1.131l-1.5 1.5a.8.8 0 0 1-1.131 0L6.999 9.631l-4.133 4.135a.8.8 0 0 1-1.131 0l-1.5-1.5a.8.8 0 0 1 0-1.131L4.368 7 .235 2.865a.8.8 0 0 1 0-1.131l1.5-1.5a.8.8 0 0 1 1.131 0l4.133 4.135L11.132.234a.8.8 0 0 1 1.131 0l1.5 1.5a.792.792 0 0 1 0 1.131Z"})))},oe=(0,a.forwardRef)(ae);n.p;var se,ie=["title","titleId"];function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}function ce(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ue=function(e,t){var n=e.title,r=e.titleId,o=ce(e,ie);return a.createElement("svg",le({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",ref:t,"aria-labelledby":r},o),n?a.createElement("title",{id:r},n):null,se||(se=a.createElement("path",{d:"M4.579 1 1 4.523l3.579 3.522 1.075-1.058-1.74-1.716h6.528a3.007 3.007 0 0 1 3.041 2.994V15h1.521V8.265a4.538 4.538 0 0 0-4.562-4.49H3.914l1.74-1.717Z",fill:"#767676"})))},de=(0,a.forwardRef)(ue);n.p;var fe,me=["title","titleId"];function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}function he(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var be=function(e,t){var n=e.title,r=e.titleId,o=he(e,me);return a.createElement("svg",pe({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",ref:t,"aria-labelledby":r},o),n?a.createElement("title",{id:r},n):null,fe||(fe=a.createElement("path",{d:"M10 0a10 10 0 1 0 10 10A10.007 10.007 0 0 0 10 0Zm0 .87A9.13 9.13 0 1 1 .87 10 9.124 9.124 0 0 1 10 .87Zm4.343 4.778a.435.435 0 0 0-.355.2l-4.435 6.538L6.382 9.44a.435.435 0 1 0-.591.638L9.7 13.707l5.005-7.376a.435.435 0 0 0-.365-.684Z",fill:"#538ec0"})))},ge=(0,a.forwardRef)(be);n.p;var ve,ye,xe=["title","titleId"];function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ce.apply(this,arguments)}function _e(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Se=function(e,t){var n=e.title,r=e.titleId,o=_e(e,xe);return a.createElement("svg",Ce({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,viewBox:"0 0 16 16",ref:t,"aria-labelledby":r},o),n?a.createElement("title",{id:r},n):null,ve||(ve=a.createElement("defs",null,a.createElement("linearGradient",{id:"c",x1:.846,y1:.455,x2:.093,y2:.564},a.createElement("stop",{offset:0,stopColor:"#f4ba22",stopOpacity:.408}),a.createElement("stop",{offset:1,stopColor:"#fbce32"})),a.createElement("linearGradient",{id:"d",x1:.931,y1:.372,x2:.034,y2:.655},a.createElement("stop",{offset:0,stopColor:"#f2b721",stopOpacity:.467}),a.createElement("stop",{offset:1,stopColor:"#f9c930"})),a.createElement("linearGradient",{id:"e",x1:.916,y1:.269,x2:.064,y2:.754},a.createElement("stop",{offset:0,stopColor:"#f0b320",stopOpacity:.525}),a.createElement("stop",{offset:1,stopColor:"#f6c32d"})),a.createElement("linearGradient",{id:"f",x1:.789,y1:.182,x2:.182,y2:.839},a.createElement("stop",{offset:0,stopColor:"#eeb01f",stopOpacity:.584}),a.createElement("stop",{offset:1,stopColor:"#f3be2a"})),a.createElement("linearGradient",{id:"g",x1:.6,y1:.143,x2:.383,y2:.887},a.createElement("stop",{offset:0,stopColor:"#ecac1e",stopOpacity:.643}),a.createElement("stop",{offset:1,stopColor:"#f0b827"})),a.createElement("linearGradient",{id:"h",x1:.405,y1:.151,x2:.622,y2:.895},a.createElement("stop",{offset:0,stopColor:"#eaa91c",stopOpacity:.706}),a.createElement("stop",{offset:1,stopColor:"#eeb325"})),a.createElement("linearGradient",{id:"i",x1:.218,y1:.171,x2:.852,y2:.857},a.createElement("stop",{offset:0,stopColor:"#e8a51b",stopOpacity:.765}),a.createElement("stop",{offset:1,stopColor:"#ebad22"})),a.createElement("linearGradient",{id:"j",x1:.066,y1:.232,x2:1.008,y2:.769},a.createElement("stop",{offset:0,stopColor:"#e6a21a",stopOpacity:.824}),a.createElement("stop",{offset:1,stopColor:"#e8a81f"})),a.createElement("linearGradient",{id:"k",x1:-.003,y1:.325,x2:1.042,y2:.657},a.createElement("stop",{offset:0,stopColor:"#e49e19",stopOpacity:.882}),a.createElement("stop",{offset:1,stopColor:"#e5a21c"})),a.createElement("linearGradient",{id:"l",x1:.039,y1:.425,x2:.947,y2:.557},a.createElement("stop",{offset:0,stopColor:"#e29b18",stopOpacity:.941}),a.createElement("stop",{offset:1,stopColor:"#e39d1a"})),a.createElement("linearGradient",{id:"m",y1:.5,x2:1,y2:.5},a.createElement("stop",{offset:0,stopColor:"#e09717"}),a.createElement("stop",{offset:1,stopColor:"#e09717"})),a.createElement("linearGradient",{id:"n",y1:.5,x2:1,y2:.5},a.createElement("stop",{offset:0,stopColor:"#efae13"}),a.createElement("stop",{offset:.519,stopColor:"#fccc24",stopOpacity:.537}),a.createElement("stop",{offset:.999,stopColor:"#fccb23"})),a.createElement("linearGradient",{id:"o",y1:.5,x2:1,y2:.5},a.createElement("stop",{offset:0,stopColor:"#eeac13"}),a.createElement("stop",{offset:.519,stopColor:"#f9c723",stopOpacity:.584}),a.createElement("stop",{offset:.999,stopColor:"#f9c621"})),a.createElement("linearGradient",{id:"p",y1:.5,x2:1,y2:.5},a.createElement("stop",{offset:0,stopColor:"#edab14"}),a.createElement("stop",{offset:.519,stopColor:"#f7c321",stopOpacity:.627}),a.createElement("stop",{offset:.999,stopColor:"#f7c220"})),a.createElement("linearGradient",{id:"q",y1:.5,x2:1,y2:.5},a.createElement("stop",{offset:0,stopColor:"#ecaa14"}),a.createElement("stop",{offset:.519,stopColor:"#f5bf20",stopOpacity:.675}),a.createElement("stop",{offset:.999,stopColor:"#f5be1f"})),a.createElement("linearGradient",{id:"r",y1:.5,x2:1,y2:.5},a.createElement("stop",{offset:0,stopColor:"#eba814"}),a.createElement("stop",{offset:.519,stopColor:"#f3ba1e",stopOpacity:.722}),a.createElement("stop",{offset:.999,stopColor:"#f3ba1d"})),a.createElement("linearGradient",{id:"s",y1:.5,x2:1,y2:.5},a.createElement("stop",{offset:0,stopColor:"#eaa714"}),a.createElement("stop",{offset:.519,stopColor:"#f0b61d",stopOpacity:.769}),a.createElement("stop",{offset:.999,stopColor:"#f0b51c"})),a.createElement("linearGradient",{id:"t",y1:.5,x2:1,y2:.5},a.createElement("stop",{offset:0,stopColor:"#e9a514"}),a.createElement("stop",{offset:.519,stopColor:"#eeb11b",stopOpacity:.816}),a.createElement("stop",{offset:.999,stopColor:"#eeb11a"})),a.createElement("linearGradient",{id:"u",y1:.5,x2:1,y2:.5},a.createElement("stop",{offset:0,stopColor:"#e8a414"}),a.createElement("stop",{offset:.519,stopColor:"#ecad1a",stopOpacity:.863}),a.createElement("stop",{offset:.999,stopColor:"#ecad19"})),a.createElement("linearGradient",{id:"v",y1:.5,x2:1,y2:.5},a.createElement("stop",{offset:0,stopColor:"#e7a315"}),a.createElement("stop",{offset:.519,stopColor:"#eaa918",stopOpacity:.906}),a.createElement("stop",{offset:.999,stopColor:"#eaa918"})),a.createElement("linearGradient",{id:"w",y1:.5,x2:1,y2:.5},a.createElement("stop",{offset:0,stopColor:"#e6a115"}),a.createElement("stop",{offset:.519,stopColor:"#e7a417",stopOpacity:.953}),a.createElement("stop",{offset:.999,stopColor:"#e7a416"})),a.createElement("linearGradient",{id:"B",x1:1.846,y1:.684,x2:1.165,y2:1.522},a.createElement("stop",{offset:0,stopColor:"#ffdb53",stopOpacity:0}),a.createElement("stop",{offset:.605,stopColor:"#f6c02d"}),a.createElement("stop",{offset:.999,stopColor:"#f2b416",stopOpacity:.635})),a.createElement("radialGradient",{id:"a",cx:.368,cy:.442,r:.578},a.createElement("stop",{offset:0,stopColor:"#ffe16e"}),a.createElement("stop",{offset:.629,stopColor:"#ffd226"}),a.createElement("stop",{offset:.75,stopColor:"#fdcd23"}),a.createElement("stop",{offset:.899,stopColor:"#f6bd1b"}),a.createElement("stop",{offset:.999,stopColor:"#f0af13"})),a.createElement("radialGradient",{id:"x",cx:.422,cy:.741,r:.939,xlinkHref:"#a"}),a.createElement("radialGradient",{id:"y",cx:.464,cy:.721,r:.93,xlinkHref:"#a"}),a.createElement("radialGradient",{id:"z",cx:.453,cy:.787,r:1.008,xlinkHref:"#a"}),a.createElement("radialGradient",{id:"A",cx:.479,cy:.523,r:.988,xlinkHref:"#a"}),a.createElement("radialGradient",{id:"b",cx:.499,cy:.501,r:.437},a.createElement("stop",{offset:.425,stopColor:"#ffe16e"}),a.createElement("stop",{offset:1,stopColor:"#ffe16e",stopOpacity:0})),a.createElement("radialGradient",{id:"C",cx:.5,cy:.499,r:.336,xlinkHref:"#b"}),a.createElement("radialGradient",{id:"D",cx:.5,cy:.499,r:.449,xlinkHref:"#b"}),a.createElement("radialGradient",{id:"E",cx:.5,cy:.495,r:.449,xlinkHref:"#b"}),a.createElement("radialGradient",{id:"F",cx:.501,cy:.493,r:.449,xlinkHref:"#b"}))),ye||(ye=a.createElement("g",{transform:"translate(-5.004 -4.746)"},a.createElement("path",{d:"M5.538 11.456h1.324a2.833 2.833 0 0 0 2.043-.878 5.071 5.071 0 0 1 .833-.7c.062-.042.127-.074.19-.112l1.155-.8 1.447-1 .112-.117a3.5 3.5 0 0 0 .843-1.492l.333-1.221a.536.536 0 0 1 .53-.4c1.579.115 1.844 2.847.619 5.616a.207.207 0 0 0-.019.149c.025.075.144.113.364.133.2.017 3.15.276 3.788.276.364 0-1.016 7.683-1.016 8.3a1.4 1.4 0 0 1-1.31 1.366s-5.937.134-7.072-.31a2.7 2.7 0 0 1-1.041-.763 2.838 2.838 0 0 0-2.141-.987h-.982c-.3 0-.534-1.582-.534-3.533s.239-3.527.534-3.527Z",fill:"url(#a)"}),a.createElement("g",{opacity:.87},a.createElement("path",{d:"M23.019 20.9a1.37 1.37 0 0 0 .109.825.861.861 0 0 1-.113.97 1.358 1.358 0 0 0-.376.937v.039a1.369 1.369 0 0 0 .127.544.867.867 0 0 1-.121.932 1.322 1.322 0 0 0-.105.139 1.368 1.368 0 0 0-.222.755 1.317 1.317 0 0 0 .045.337 1.344 1.344 0 0 0 .083.227.808.808 0 0 1 .082.365.573.573 0 0 1-.072.272 1.439 1.439 0 0 1-.092.144.9.9 0 0 0-.171.648 1.032 1.032 0 0 0 .993.831h1.368A1.034 1.034 0 0 0 25.705 28a.939.939 0 0 0-.276-.739 1.37 1.37 0 0 0 .749-1.218 1.37 1.37 0 0 0-.556-1.1.016.016 0 0 1 .006-.028 1.368 1.368 0 0 0 .228-2.422.016.016 0 0 1 .007-.028 1.371 1.371 0 0 0 .968-1.519c-.1-.684.3-1.536-.394-1.536l-1.637-.08a.81.81 0 0 0-.174.005 2.019 2.019 0 0 0-1.607 1.565Z",transform:"translate(-9.605 -8.264)",opacity:.091,fill:"url(#c)"}),a.createElement("path",{d:"M23.594 20.973a1.37 1.37 0 0 0 .109.825.861.861 0 0 1-.113.97 1.358 1.358 0 0 0-.376.934v.038a1.38 1.38 0 0 0 .125.543.869.869 0 0 1-.128.934 1.233 1.233 0 0 0-.107.14 1.369 1.369 0 0 0-.221.762 1.308 1.308 0 0 0 .047.338 1.339 1.339 0 0 0 .088.229.928.928 0 0 1 .1.358.423.423 0 0 1-.069.268c-.032.046-.064.094-.1.139a.862.862 0 0 0-.183.645 1.029 1.029 0 0 0 .99.839h1.372a1.034 1.034 0 0 0 1.151-.871.939.939 0 0 0-.279-.738 1.37 1.37 0 0 0 .749-1.218 1.371 1.371 0 0 0-.558-1.1.017.017 0 0 1 .009-.026 1.368 1.368 0 0 0 .224-2.424c-.008-.007 0-.022.011-.026a1.37 1.37 0 0 0 .967-1.519c-.1-.684.3-1.533-.4-1.533l-1.7-.029a.842.842 0 0 0-.169.006 1.9 1.9 0 0 0-1.539 1.516Z",transform:"translate(-9.948 -8.335)",opacity:.182,fill:"url(#d)"}),a.createElement("path",{d:"M24.167 21.023a1.37 1.37 0 0 0 .109.825.861.861 0 0 1-.113.97 1.359 1.359 0 0 0-.376.931v.038a1.391 1.391 0 0 0 .122.542.869.869 0 0 1-.134.937 1.219 1.219 0 0 0-.108.141 1.381 1.381 0 0 0-.221.769 1.277 1.277 0 0 0 .05.34 1.358 1.358 0 0 0 .092.231 1.14 1.14 0 0 1 .122.351.33.33 0 0 1-.066.265c-.036.044-.07.09-.108.134a.832.832 0 0 0-.2.642 1.026 1.026 0 0 0 .986.847H25.7a1.034 1.034 0 0 0 1.151-.871.939.939 0 0 0-.276-.739 1.37 1.37 0 0 0 .749-1.218 1.37 1.37 0 0 0-.56-1.1.018.018 0 0 1 .012-.025A1.368 1.368 0 0 0 27 22.6c-.006-.007 0-.02.013-.025a1.371 1.371 0 0 0 .967-1.519c-.1-.684.294-1.531-.4-1.531l-1.767.017a.885.885 0 0 0-.164.007 1.781 1.781 0 0 0-1.482 1.474Z",transform:"translate(-10.289 -8.385)",opacity:.273,fill:"url(#e)"}),a.createElement("path",{d:"M24.74 21.027a1.37 1.37 0 0 0 .109.825.861.861 0 0 1-.113.97 1.36 1.36 0 0 0-.376.928v.038a1.412 1.412 0 0 0 .119.542.871.871 0 0 1-.141.939 1.138 1.138 0 0 0-.11.142 1.386 1.386 0 0 0-.22.777 1.269 1.269 0 0 0 .053.342 1.35 1.35 0 0 0 .1.233 1.532 1.532 0 0 1 .142.344.271.271 0 0 1-.063.261c-.04.041-.076.086-.116.129a.8.8 0 0 0-.209.639 1.022 1.022 0 0 0 .983.855h1.38a1.034 1.034 0 0 0 1.151-.871.939.939 0 0 0-.276-.739 1.37 1.37 0 0 0 .749-1.218 1.371 1.371 0 0 0-.562-1.106.021.021 0 0 1 .015-.023 1.368 1.368 0 0 0 .218-2.427c0-.006 0-.019.017-.023a1.371 1.371 0 0 0 .967-1.519c-.1-.684.293-1.528-.4-1.528l-1.832.063a.9.9 0 0 0-.159.008 1.665 1.665 0 0 0-1.426 1.419Z",transform:"translate(-10.63 -8.389)",opacity:.364,fill:"url(#f)"}),a.createElement("path",{d:"M25.314 21.03a1.37 1.37 0 0 0 .109.825.861.861 0 0 1-.113.97 1.358 1.358 0 0 0-.376.924v.038a1.416 1.416 0 0 0 .116.541.871.871 0 0 1-.147.941 1.085 1.085 0 0 0-.112.144 1.392 1.392 0 0 0-.219.784 1.236 1.236 0 0 0 .056.344 1.342 1.342 0 0 0 .1.235 2.417 2.417 0 0 1 .161.337.228.228 0 0 1-.06.258c-.043.039-.082.083-.123.124a.778.778 0 0 0-.222.637 1.019 1.019 0 0 0 .979.862h1.384A1.034 1.034 0 0 0 28 28.123a.939.939 0 0 0-.276-.739 1.37 1.37 0 0 0 .749-1.218 1.37 1.37 0 0 0-.565-1.107.025.025 0 0 1 .017-.022 1.368 1.368 0 0 0 .214-2.429c0-.006.006-.017.019-.021a1.371 1.371 0 0 0 .967-1.519c-.1-.684.291-1.525-.4-1.525l-1.9.108a.961.961 0 0 0-.153.008 1.557 1.557 0 0 0-1.358 1.371Z",transform:"translate(-10.972 -8.392)",opacity:.455,fill:"url(#g)"}),a.createElement("path",{d:"M25.889 21.033a1.37 1.37 0 0 0 .109.825.861.861 0 0 1-.113.97 1.356 1.356 0 0 0-.376.921v.038a1.428 1.428 0 0 0 .113.54.872.872 0 0 1-.154.943 1.045 1.045 0 0 0-.113.144 1.4 1.4 0 0 0-.218.791 1.232 1.232 0 0 0 .059.346 1.381 1.381 0 0 0 .106.237c.072.127.142.246.182.33a.2.2 0 0 1-.057.255c-.046.037-.088.079-.131.119a.751.751 0 0 0-.234.634 1.016 1.016 0 0 0 .976.871h1.388a1.034 1.034 0 0 0 1.151-.871.939.939 0 0 0-.276-.739 1.37 1.37 0 0 0 .749-1.218 1.371 1.371 0 0 0-.567-1.109.033.033 0 0 1 .02-.021 1.368 1.368 0 0 0 .211-2.431.032.032 0 0 1 .022-.019 1.371 1.371 0 0 0 .964-1.519c-.1-.684.29-1.523-.4-1.523l-1.961.155a1.051 1.051 0 0 0-.148.009 1.451 1.451 0 0 0-1.302 1.322Z",transform:"translate(-11.314 -8.395)",opacity:.545,fill:"url(#h)"}),a.createElement("path",{d:"M26.462 21.036a1.37 1.37 0 0 0 .109.825.861.861 0 0 1-.113.97 1.356 1.356 0 0 0-.376.917v.037a1.444 1.444 0 0 0 .11.539.875.875 0 0 1-.16.945 1.019 1.019 0 0 0-.115.146 1.408 1.408 0 0 0-.218.8 1.2 1.2 0 0 0 .062.347 1.363 1.363 0 0 0 .11.239c.074.129.152.246.2.323a.175.175 0 0 1-.054.251 1.666 1.666 0 0 0-.139.114.729.729 0 0 0-.247.631 1.012 1.012 0 0 0 .973.878H28a1.034 1.034 0 0 0 1.151-.871.939.939 0 0 0-.276-.739 1.37 1.37 0 0 0 .749-1.218 1.371 1.371 0 0 0-.569-1.111.047.047 0 0 1 .023-.019 1.368 1.368 0 0 0 .208-2.432.047.047 0 0 1 .025-.018 1.37 1.37 0 0 0 .966-1.519c-.1-.684.288-1.52-.4-1.52l-2.026.2a1.1 1.1 0 0 0-.143.011 1.348 1.348 0 0 0-1.246 1.274Z",transform:"translate(-11.655 -8.399)",opacity:.636,fill:"url(#i)"}),a.createElement("path",{d:"M27.035 21.043a1.37 1.37 0 0 0 .109.825.861.861 0 0 1-.113.97 1.357 1.357 0 0 0-.376.914v.037a1.457 1.457 0 0 0 .108.538.876.876 0 0 1-.167.947.975.975 0 0 0-.117.147 1.413 1.413 0 0 0-.217.805 1.186 1.186 0 0 0 .064.349 1.408 1.408 0 0 0 .115.242 2.489 2.489 0 0 0 .221.316.158.158 0 0 1-.051.248 1.451 1.451 0 0 0-.147.109.707.707 0 0 0-.26.629 1.01 1.01 0 0 0 .969.886h1.4a1.034 1.034 0 0 0 1.151-.871.939.939 0 0 0-.276-.739 1.37 1.37 0 0 0 .749-1.218 1.371 1.371 0 0 0-.571-1.112.079.079 0 0 1 .025-.018 1.368 1.368 0 0 0 .2-2.434.076.076 0 0 1 .028-.016 1.371 1.371 0 0 0 .966-1.519c-.1-.684.287-1.517-.4-1.517l-2.09.246a1.262 1.262 0 0 0-.138.011 1.248 1.248 0 0 0-1.182 1.225Z",transform:"translate(-11.996 -8.406)",opacity:.727,fill:"url(#j)"}),a.createElement("path",{d:"M27.609 21.045a1.37 1.37 0 0 0 .109.825.861.861 0 0 1-.113.97 1.359 1.359 0 0 0-.376.911v.037a1.471 1.471 0 0 0 .1.537.877.877 0 0 1-.173.949.946.946 0 0 0-.118.148 1.421 1.421 0 0 0-.216.813 1.171 1.171 0 0 0 .067.351 1.382 1.382 0 0 0 .119.244 1.47 1.47 0 0 0 .242.31.145.145 0 0 1-.049.244 1.367 1.367 0 0 0-.154.1.69.69 0 0 0-.273.626 1.007 1.007 0 0 0 .966.894h1.4a1.034 1.034 0 0 0 1.151-.871.938.938 0 0 0-.276-.739 1.37 1.37 0 0 0 .749-1.218 1.37 1.37 0 0 0-.573-1.114.176.176 0 0 1 .028-.016 1.368 1.368 0 0 0 .2-2.435.168.168 0 0 1 .032-.014 1.371 1.371 0 0 0 .966-1.519c-.1-.684.285-1.515-.406-1.515l-2.155.292a.938.938 0 0 0-.132.012c-.824.117-1.005.541-1.115 1.178Z",transform:"translate(-12.338 -8.407)",opacity:.818,fill:"url(#k)"}),a.createElement("path",{d:"M28.183 21.048a1.37 1.37 0 0 0 .109.825.861.861 0 0 1-.113.97 1.358 1.358 0 0 0-.376.908v.036a1.486 1.486 0 0 0 .1.537.878.878 0 0 1-.18.951.908.908 0 0 0-.119.149 1.429 1.429 0 0 0-.216.82 1.154 1.154 0 0 0 .07.353 1.385 1.385 0 0 0 .124.246 1.079 1.079 0 0 0 .261.3c.045.03.12.156-.046.241a1.231 1.231 0 0 0-.162.1.672.672 0 0 0-.285.623 1 1 0 0 0 .962.9h1.4a1.034 1.034 0 0 0 1.151-.871.939.939 0 0 0-.276-.739 1.37 1.37 0 0 0 .749-1.218 1.371 1.371 0 0 0-.576-1.115l.031-.015a1.368 1.368 0 0 0 .2-2.437l.034-.013A1.371 1.371 0 0 0 32 21.085c-.1-.684.284-1.512-.407-1.512l-2.22.338c-.044 0-.086.007-.127.013-.829.111-.953.488-1.063 1.124Z",transform:"translate(-12.68 -8.411)",opacity:.909,fill:"url(#l)"}),a.createElement("path",{d:"M32.226 23.79a1.371 1.371 0 0 0-.66-1.17 1.371 1.371 0 0 0 1-1.529c-.1-.684.282-1.51-.408-1.51l-2.284.384c-.934.09-1.005.423-1.12 1.088a1.37 1.37 0 0 0 .109.825.861.861 0 0 1-.113.97 1.358 1.358 0 0 0-.376.941 1.5 1.5 0 0 0 .1.536.879.879 0 0 1-.186.953.872.872 0 0 0-.121.15 1.384 1.384 0 0 0-.142 1.182 1.156 1.156 0 0 0 .41.544c.049.024.136.155-.043.238a.691.691 0 0 0-.468.714 1 1 0 0 0 1 .911h1.366a1.034 1.034 0 0 0 1.151-.871.939.939 0 0 0-.276-.739 1.37 1.37 0 0 0 .749-1.218 1.371 1.371 0 0 0-.578-1.117 1.373 1.373 0 0 0 .89-1.282Z",transform:"translate(-13.021 -8.415)",fill:"url(#m)"})),a.createElement("g",{opacity:.24},a.createElement("path",{d:"M7.333 27.035h.939a2.69 2.69 0 0 1 2.047.965 2.585 2.585 0 0 0 .995.743 14.783 14.783 0 0 0 3.408.307l.423.007c.907.012 1.756.005 2.265 0a4.5 4.5 0 0 0 .734-.038 1.061 1.061 0 0 0 .346-.09 1.15 1.15 0 0 0 .025-.393c-.006-.081 0-.3.006-.619-.526.006-1.3.011-2.119 0-.395 0-.8-.013-1.2-.025a17.162 17.162 0 0 1-2.39-.2 2.123 2.123 0 0 1-.393-.112 2.417 2.417 0 0 1-.645-.409 3.858 3.858 0 0 1-.35-.35A2.711 2.711 0 0 0 10 25.969a2.9 2.9 0 0 0-.648-.073H9.1a3.931 3.931 0 0 1-.657-.058c-.225-.057-.412-1.118-.467-2.543-.011-.3-.016-.61-.015-.93 0-.522.024-1.008.057-1.443-.087 0-.175 0-.263-.014 0-.006-.149-.011-.147-.016h-.156a2.841 2.841 0 0 0-.438.035 15.9 15.9 0 0 0-.19 2.646v.236c.016 1.8.238 3.226.509 3.226Z",transform:"translate(-1.083 -9.196)",opacity:.091,fill:"url(#n)"}),a.createElement("path",{d:"M7.15 27.111h.94a2.69 2.69 0 0 1 2.047.962 2.585 2.585 0 0 0 .995.743 15 15 0 0 0 3.446.308l.422.006c.952.012 1.831 0 2.289 0a2.572 2.572 0 0 0 .736-.063 1.074 1.074 0 0 0 .339-.112 1.337 1.337 0 0 0-.04-.334c-.011-.072-.026-.272-.067-.556-.53.006-1.306.011-2.132 0-.4 0-.807-.013-1.206-.026a16.157 16.157 0 0 1-2.4-.2 2.079 2.079 0 0 1-.392-.12 2.459 2.459 0 0 1-.641-.423 5.326 5.326 0 0 1-.353-.352 2.7 2.7 0 0 0-1.451-.828 3.256 3.256 0 0 0-.652-.066h-.246c-.02 0-.606-.043-.621-.116a5.276 5.276 0 0 1-.442-2.569c-.01-.3-.014-.618-.011-.937 0-.529.029-1.019.066-1.452a4.098 4.098 0 0 1-.231-.046c0-.011-.131-.021-.128-.031h-.16c-.015 0-.405.025-.418.07a15.457 15.457 0 0 0-.2 2.662v.238c.016 1.804.239 3.242.511 3.242Z",transform:"translate(-.974 -9.198)",opacity:.182,fill:"url(#o)"}),a.createElement("path",{d:"M6.968 27.183h.939a2.69 2.69 0 0 1 2.047.962 2.585 2.585 0 0 0 .995.743 15.156 15.156 0 0 0 3.484.308l.433.006c1 .011 1.9 0 2.312 0a1.9 1.9 0 0 0 .738-.089 1.084 1.084 0 0 0 .331-.134.849.849 0 0 0-.1-.274 2.531 2.531 0 0 0-.14-.493c-.533.006-1.315.011-2.145 0-.4 0-.813-.013-1.214-.026a15.1 15.1 0 0 1-2.414-.213 1.991 1.991 0 0 1-.391-.129 2.5 2.5 0 0 1-.643-.444 7.919 7.919 0 0 1-.356-.354 2.687 2.687 0 0 0-1.475-.8 3.7 3.7 0 0 0-.655-.059h-.249c-.03 0-.562-.065-.585-.174a5.925 5.925 0 0 1-.416-2.595 24.531 24.531 0 0 1-.008-.943c.007-.537.034-1.031.074-1.461l-.2-.077c0-.017-.113-.032-.11-.047h-.157c-.023 0-.378.038-.4.105a15.079 15.079 0 0 0-.207 2.678v.239c.016 1.822.239 3.271.512 3.271Z",transform:"translate(-.865 -9.197)",opacity:.273,fill:"url(#p)"}),a.createElement("path",{d:"M6.786 27.257h.939a2.69 2.69 0 0 1 2.047.962 2.585 2.585 0 0 0 .995.743 15.372 15.372 0 0 0 3.521.309l.437.006c1.042.011 1.979 0 2.336-.005a1.586 1.586 0 0 0 .74-.115 1.107 1.107 0 0 0 .325-.157 2.856 2.856 0 0 0-.169-.215 1.543 1.543 0 0 0-.212-.43c-.536.006-1.323.011-2.159 0-.4 0-.819-.013-1.222-.027a14.334 14.334 0 0 1-2.426-.222 1.962 1.962 0 0 1-.39-.138 2.555 2.555 0 0 1-.635-.45 17.205 17.205 0 0 1-.359-.356 2.676 2.676 0 0 0-1.5-.776 4.287 4.287 0 0 0-.659-.051h-.248c-.04 0-.518-.086-.549-.233a6.672 6.672 0 0 1-.391-2.621 17.736 17.736 0 0 1 0-.951c.01-.544.04-1.042.083-1.47l-.166-.109c0-.022-.1-.043-.091-.062h-.164c-.031 0-.352.051-.378.14a14.687 14.687 0 0 0-.215 2.694v.24c.012 1.837.236 3.294.51 3.294Z",transform:"translate(-.757 -9.197)",opacity:.364,fill:"url(#q)"}),a.createElement("path",{d:"M6.605 27.331h.939a2.69 2.69 0 0 1 2.047.962 2.585 2.585 0 0 0 .995.743 15.574 15.574 0 0 0 3.559.309l.443.006c1.087.011 2.054 0 2.359-.007a1.4 1.4 0 0 0 .741-.14 1.14 1.14 0 0 0 .317-.178 1.043 1.043 0 0 1-.234-.155c0-.049-.11-.179-.285-.367-.54.006-1.332.011-2.172 0a55.937 55.937 0 0 1-1.23-.028 13.611 13.611 0 0 1-2.438-.23 1.943 1.943 0 0 1-.389-.146 2.6 2.6 0 0 1-.632-.464l-.362-.358a2.669 2.669 0 0 0-1.523-.75 5.066 5.066 0 0 0-.663-.044h-.25c-.05 0-.475-.108-.513-.291a7.443 7.443 0 0 1-.365-2.646 23.535 23.535 0 0 1 0-.958c.012-.552.045-1.054.092-1.479-.045-.049-.089-.1-.133-.141.006-.028-.078-.054-.072-.078h-.16c-.038 0-.325.063-.357.175a14.336 14.336 0 0 0-.224 2.71v.242c.01 1.841.235 3.313.51 3.313Z",transform:"translate(-.65 -9.197)",opacity:.455,fill:"url(#r)"}),a.createElement("path",{d:"M6.423 27.4h.939a2.69 2.69 0 0 1 2.047.962 2.585 2.585 0 0 0 .995.743 15.743 15.743 0 0 0 3.6.31l.448.006c1.132.011 2.128-.006 2.383-.008a1.516 1.516 0 0 0 .743-.166 2.2 2.2 0 0 0 .31-.2.605.605 0 0 1-.3-.1c0-.04-.138-.149-.357-.3-.543.006-1.341.011-2.186 0-.41-.005-.83-.014-1.238-.028a12.94 12.94 0 0 1-2.45-.239 1.961 1.961 0 0 1-.387-.155 2.639 2.639 0 0 1-.629-.478 15.489 15.489 0 0 0-.365-.36 2.665 2.665 0 0 0-1.547-.724 6.166 6.166 0 0 0-.667-.036h-.25c-.06 0-.431-.129-.477-.349a8.383 8.383 0 0 1-.34-2.672c-.006-.323 0-.647 0-.965.015-.559.051-1.065.1-1.488q-.05-.091-.1-.172c.008-.034-.06-.065-.053-.093h-.159c-.046 0-.3.076-.337.21a14.007 14.007 0 0 0-.232 2.726v.243c.008 1.854.233 3.333.509 3.333Z",transform:"translate(-.541 -9.197)",opacity:.545,fill:"url(#s)"}),a.createElement("path",{d:"M6.242 27.477h.939a2.69 2.69 0 0 1 2.047.962 2.585 2.585 0 0 0 .995.743 15.96 15.96 0 0 0 3.636.311l.453.006c1.177.011 2.2-.008 2.406-.01a1.393 1.393 0 0 0 .745-.192 1.968 1.968 0 0 0 .3-.223.585.585 0 0 1-.363-.036c0-.032-.166-.117-.43-.24-.546.006-1.35.011-2.2 0a57.106 57.106 0 0 1-1.246-.029 12.339 12.339 0 0 1-2.462-.248 1.974 1.974 0 0 1-.386-.163 2.677 2.677 0 0 1-.626-.491 7.36 7.36 0 0 0-.368-.361 2.66 2.66 0 0 0-1.571-.7c-.076-.019-.59-.029-.671-.029h-.247a.616.616 0 0 1-.441-.407 9.524 9.524 0 0 1-.315-2.7c0-.328 0-.654.007-.972.017-.566.056-1.077.109-1.5q-.035-.109-.068-.2c.009-.039-.043-.076-.034-.109h-.162a.427.427 0 0 0-.316.245 13.636 13.636 0 0 0-.24 2.742v.244c.005 1.862.231 3.357.509 3.357Z",transform:"translate(-.433 -9.196)",opacity:.636,fill:"url(#t)"}),a.createElement("path",{d:"M6.059 27.552H7a2.69 2.69 0 0 1 2.047.962 2.585 2.585 0 0 0 .995.743 16.16 16.16 0 0 0 3.673.311l.458.006c1.222.011 2.277-.01 2.43-.011a1.31 1.31 0 0 0 .747-.217 1.762 1.762 0 0 0 .3-.245.665.665 0 0 1-.428.023 1.914 1.914 0 0 0-.5-.178 95.01 95.01 0 0 1-2.213 0 57.68 57.68 0 0 1-1.254-.03 11.805 11.805 0 0 1-2.474-.256 2.013 2.013 0 0 1-.384-.172 2.719 2.719 0 0 1-.623-.505 5.151 5.151 0 0 0-.371-.363 2.658 2.658 0 0 0-1.603-.672 10.048 10.048 0 0 0-.674-.022h-.252a.616.616 0 0 1-.4-.465 10.721 10.721 0 0 1-.29-2.723c0-.333 0-.662.011-.979.019-.573.061-1.088.117-1.506l-.035-.236c.01-.045-.025-.087-.015-.125h-.167a.414.414 0 0 0-.3.28 13.336 13.336 0 0 0-.249 2.757v.246c.008 1.871.235 3.377.513 3.377Z",transform:"translate(-.324 -9.197)",opacity:.727,fill:"url(#u)"}),a.createElement("path",{d:"M5.878 27.624h.939a2.69 2.69 0 0 1 2.047.962 2.585 2.585 0 0 0 .995.743 16.353 16.353 0 0 0 3.711.312l.463.005c1.268.011 2.351-.012 2.453-.013a1.253 1.253 0 0 0 .749-.243 1.638 1.638 0 0 0 .288-.267.79.79 0 0 1-.493.083 3.386 3.386 0 0 0-.576-.115c-.553.006-1.368.011-2.226 0a58.574 58.574 0 0 1-1.262-.03 11.318 11.318 0 0 1-2.485-.265 2.059 2.059 0 0 1-.383-.18 2.751 2.751 0 0 1-.62-.519 4.082 4.082 0 0 0-.374-.365 2.657 2.657 0 0 0-1.619-.645c-.038-.01-.638-.015-.678-.015h-.251c-.091 0-.3-.194-.369-.523a12.083 12.083 0 0 1-.264-2.749c0-.338 0-.669.015-.986a14.843 14.843 0 0 1 .125-1.514v-.268c.011-.051-.007-.1 0-.14H5.9a.416.416 0 0 0-.276.315 13.018 13.018 0 0 0-.257 2.773v.247c.004 1.88.233 3.397.511 3.397Z",transform:"translate(-.216 -9.196)",opacity:.818,fill:"url(#v)"}),a.createElement("path",{d:"M5.7 27.7h.939a2.69 2.69 0 0 1 2.047.962 2.585 2.585 0 0 0 .995.743 16.53 16.53 0 0 0 3.749.312l.468.005c1.312.01 2.425-.014 2.477-.015a1.207 1.207 0 0 0 .751-.269 1.547 1.547 0 0 0 .281-.289.946.946 0 0 1-.557.142c0-.008-.249-.025-.648-.051a97.26 97.26 0 0 1-2.239 0 53.036 53.036 0 0 1-1.27-.031 10.9 10.9 0 0 1-2.5-.273 2.1 2.1 0 0 1-.382-.189 2.782 2.782 0 0 1-.617-.532 3.3 3.3 0 0 0-.377-.367 2.66 2.66 0 0 0-1.643-.618l-.682-.007h-.255c-.1 0-.257-.215-.333-.582a13.557 13.557 0 0 1-.239-2.775c0-.343.005-.676.018-.993a14.314 14.314 0 0 1 .135-1.524c.009-.109.019-.209.03-.3.013-.056.01-.108.023-.156h-.164c-.077 0-.191.127-.255.35a12.769 12.769 0 0 0-.266 2.789v.248c.001 1.889.229 3.42.514 3.42Z",transform:"translate(-.108 -9.197)",opacity:.909,fill:"url(#w)"}),a.createElement("path",{d:"M16.661 20.178s-1.419.032-2.973.011a16.749 16.749 0 0 1-3.788-.314 2.585 2.585 0 0 1-.995-.743 2.692 2.692 0 0 0-2.047-.962h-.939c-.282 0-.51-1.54-.51-3.44a13.354 13.354 0 0 1 .27-3.035h-.165c-.282 0-.51 1.54-.51 3.44s.229 3.44.51 3.44h.939a2.69 2.69 0 0 1 2.047.962 2.585 2.585 0 0 0 .995.743 16.747 16.747 0 0 0 3.787.313c1.554.021 2.973-.011 2.973-.011a1.266 1.266 0 0 0 1.026-.606 1.129 1.129 0 0 1-.62.202Z",fill:"#e5a015"})),a.createElement("path",{d:"M32.534 37.441a1.425 1.425 0 0 0-2.4-.843l-1.2.538a.72.72 0 0 0-.147 0 .927.927 0 0 0-.7 1.078.9.9 0 0 0 .851.839h2.366a1.428 1.428 0 0 0 1.23-1.612Z",transform:"translate(-13.114 -18.312)",fill:"url(#x)"}),a.createElement("path",{d:"M33.533 31.974a1.66 1.66 0 0 0-2.8-1l-1.847.483a1.158 1.158 0 0 0-.831 1.3 1.109 1.109 0 0 0 1.055 1.048l2.823.026h.147a1.667 1.667 0 0 0 1.453-1.857Z",transform:"translate(-13.092 -14.92)",fill:"url(#y)"}),a.createElement("path",{d:"M34.622 26.051a1.667 1.667 0 0 0-1.871-1.435 295.1 295.1 0 0 0-2.822.954 1.153 1.153 0 0 0-.84 1.316 1.129 1.129 0 0 0 .99 1.04s3.038 0 3.108 0a1.667 1.667 0 0 0 1.435-1.875Z",transform:"translate(-13.707 -11.548)",fill:"url(#z)"}),a.createElement("path",{d:"M35.178 20.777a1.5 1.5 0 0 0-1.605-1.312s-.106.012-.128.015l-2.74.453a1.216 1.216 0 0 0-.815 1.367 1.154 1.154 0 0 0 1.043 1.111l2.774.04a1.534 1.534 0 0 0 .161 0 1.5 1.5 0 0 0 1.31-1.674Z",transform:"translate(-14.185 -8.563)",fill:"url(#A)"}),a.createElement("path",{d:"M14.5 30.459c-1.6-.325-3.076.253-3.285 1.29s.921 2.141 2.526 2.465 3.076-.253 3.285-1.29-.926-2.14-2.526-2.465Z",transform:"translate(-3.517 -14.838)",opacity:.59,fill:"url(#b)"}),a.createElement("path",{d:"M19.492 17.975a6.822 6.822 0 0 1-.7 2.215 7.023 7.023 0 0 1-.809 1.239A5.887 5.887 0 0 1 16.053 23a4.488 4.488 0 0 1-.79.3 2.253 2.253 0 0 1-.827.136.36.36 0 0 1-.207-.06.234.234 0 0 1-.1-.157v-.016a.286.286 0 0 1 .307-.265 5.074 5.074 0 0 0 3.918-2.966 6.27 6.27 0 0 0 .66-2.2Z",transform:"translate(-5.2 -7.527)",opacity:.59,fill:"url(#B)"}),a.createElement("path",{d:"M15.069 22.046c-1.228 1.044-2.723 1.3-3.34.578s-.12-2.159 1.109-3.2 2.723-1.3 3.34-.578.122 2.154-1.109 3.2Z",transform:"translate(-3.689 -7.938)",opacity:.72,fill:"url(#C)"}),a.createElement("ellipse",{cx:2.398,cy:1.044,rx:2.398,ry:1.044,transform:"translate(15.986 11.389)",opacity:.5,fill:"url(#D)"}),a.createElement("ellipse",{cx:2.398,cy:.915,rx:2.398,ry:.915,transform:"translate(15.599 14.393)",opacity:.5,fill:"url(#E)"}),a.createElement("ellipse",{cx:2.398,cy:.915,rx:2.398,ry:.915,transform:"translate(15.173 16.889)",opacity:.5,fill:"url(#E)"}),a.createElement("ellipse",{cx:1.718,cy:.656,rx:1.718,ry:.656,transform:"translate(15.315 19.136)",opacity:.5,fill:"url(#F)"}))))},Ee=(0,a.forwardRef)(Se);n.p;var je,Ie,Ne=["title","titleId"];function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}function Oe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ae=function(e,t){var n=e.title,r=e.titleId,o=Oe(e,Ne);return a.createElement("svg",we({xmlns:"http://www.w3.org/2000/svg",width:15.207,height:15.207,viewBox:"0 0 15.207 15.207",ref:t,"aria-labelledby":r},o),n?a.createElement("title",{id:r},n):null,je||(je=a.createElement("path",{d:"M9.261.707 8.2 1.765l.82.82-4.636 3.722-1.11-1.11-1.058 1.059L5.06 9.1.5 13.659v1.048h1.048l4.559-4.56 2.844 2.844 1.058-1.058-1.045-1.045 3.67-4.691.807.807L14.5 5.946Z",stroke:"#767676",fill:"none"})),Ie||(Ie=a.createElement("path",{stroke:"#707070",d:"m2.5.707 12 12"})))},Te=(0,a.forwardRef)(Ae);n.p;n.p;var Me=function(e){var t=e.children,n=e.chatId,o=e.messageId,s=e.scrollerNode,i=(0,a.useRef)(null),l=(0,f.useIntersectionObserver)(i,{root:s}).isIntersecting,c=(0,S.useGroupChatStateMethods)().markMessageAsRead;return(0,a.useEffect)((function(){l&&c({chatId:n,messageId:o})}),[n,l,c,o]),(0,r.jsx)("div",{className:"flex",ref:i,children:t})},ke=o().memo((function(e){var t=e.message,n=e.scrollerNode,a=t.direction,o=void 0===a?"in":a,i=t.content,l=t.sendTime,c=t.firstName,u=t.lastName,d=t.messageId,p=t.userId,h=(0,m.useLocalizationState)().t,b=(0,I.useFormatting)().formatFullName,g=(0,w.useUserDetailsById)(p),v=(0,j.useGetAvatarUrl)(),y=(0,s.useGroupChatUIParams)().groupChatId;(0,A.assertDefined)(y);var x=null==g?void 0:g.data,C=null!=c?c:null==x?void 0:x.firstName,_=null!=u?u:null==x?void 0:x.lastName,S=b(C,_),E="available"===(null==x?void 0:x.presenceState),T=(0,w.getUserStatusIcon)(x),M=v({userId:p}),k=(0,N.useChatMessageSanitizer)({message:i}),P=(0,s.useGroupChatItem)(),L=null==P?void 0:P.unreadMessages.some((function(e){return e.messageId===d})),D=(0,r.jsxs)(r.Fragment,{children:["in"===o&&(0,r.jsx)(O.AvatarLegacy,{className:"mx-3.5 mb-0 mt-2.5",type:"user",size:32,headPhones:!0,firstName:C,lastName:_,online:E,onlineStatus:T,url:M}),(0,r.jsxs)("div",{className:"mb-2 flex flex-1 flex-row flex-nowrap rounded border border-primary-legacy bg-white p-2",children:[(0,r.jsx)(R,{className:"mx-4 mb-2 mt-1.5 fill-primary-legacy"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between pb-1 text-sm/[16px]",children:["in"===o&&(0,r.jsx)("span",{className:"secondary mr-4 font-semibold","data-testid":"party-display-name",children:S}),(0,r.jsx)("span",{className:"text-chat-title [&:not(:last-child)]:mr-4","data-testid":"message-time",children:(0,f.formatDate)(l,"h:mm A")})]}),(0,r.jsx)("div",{className:"text-lg/[18px] text-chat-center-message-text-color","aria-live":"polite",role:"status","aria-label":h.ACCESSIBILITY.chat_center_message_status_announcement(),"data-testid":"message-content",children:(0,r.jsx)("div",{className:"[&>blockquote]:relative [&>blockquote]:mx-0 [&>blockquote]:my-[0.5em] [&>blockquote]:px-3 [&>blockquote]:py-[0.5em]   [&>blockquote]:before:absolute [&>blockquote]:before:inset-y-0 [&>blockquote]:before:left-0 [&>blockquote]:before:w-0.5   [&>blockquote]:before:bg-primary-legacy [&>table]:border-collapse [&>td]:border [&>td]:border-gray-400",dangerouslySetInnerHTML:{__html:k}})})]})]})]});return(0,r.jsx)("div",{className:"flex max-w-[70%]","aria-label":h.ACCESSIBILITY.internal_chat_message(),"data-testid":"message-item","data-message":"true","data-announcement-message":"true","data-incoming":"in"===o?"true":void 0,"data-outgoing":"out"===o?"true":void 0,children:L?(0,r.jsx)(Me,{chatId:y,messageId:d,scrollerNode:n,children:D}):D})})),Pe=o().memo((function(e){var t=e.children;return(0,r.jsx)("div",{className:"text-neutral-on-fade words-break flex w-full select-none items-center justify-center gap-1 px-8 py-4 caption-s","data-testid":"date-separator",children:t})})),Re=n(9478),Le=n.n(Re),De=n(324);function He(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,De.m6)(Le()(t))}var Ge=(0,a.memo)((function(e){var t=e.message,n=t.messageId,o=t.direction,i=(0,m.useLocalizationState)().t,l=(0,S.useGroupChatStateMethods)().restoreDeletedMessage,u=(0,s.useGroupChatUIParams)().groupChatId;(0,A.assertDefined)(u);var d=(0,a.useCallback)((function(){l({chatId:u,messageId:n})}),[u,n,l]);return(0,r.jsx)("div",{className:He("relative flex items-start px-0 py-2",{"items-end justify-end":"out"===o}),"aria-label":i.ACCESSIBILITY.chat_center_deleted_message(),"data-testid":"message-item","data-message":"true","data-deleted":"true","data-incoming":"in"===o?"true":void 0,"data-outgoing":"out"===o?"true":void 0,children:(0,r.jsxs)(c.SelectionItem,{focusOnSelection:!0,touchedOnly:!0,itemId:n,className:He("flex rounded p-2 text-base/[18px]",{"border border-chat-center-in-message-bg bg-chat-center-in-message-bg":"in"===o},{"border border-chat-center-out-message-border bg-white":"out"===o}),children:[(0,r.jsx)("div",{className:"text-chat-center-message-text-color",children:i.CHAT_CENTER.deleted_message_text()}),"out"===o&&(0,r.jsx)(c.Button,{className:"ml-6 cursor-pointer border-none bg-none p-0 text-primary-legacy",onClick:d,tooltip:i.CHAT_CENTER.deleted_message_undo_button_text(),children:i.CHAT_CENTER.deleted_message_undo_button_text()})]})})})),Be=n(3830),Ue=n.n(Be),Fe=n(3650),ze=(n(2346),n(5319),n(3194)),Ze=n(4593);n(638),n(5928),n(533),n(7773);var We={value:"sms",text:"SMS"};var qe="ChannelStateContext",Ve={getSelectedChannel:function(){return We},getSelectedPhone:function(){},isTouched:function(){return!1},channelOptions:[We],setIsTouched:(0,f.throwNoProviderError)(qe),setSelectedChannel:(0,f.throwNoProviderError)(qe)},Ke=o().createContext(Ve);Ke.displayName=qe;n(2107),n(1554);var $e=n(1980),Ye=(n(2506),n(4171),n(9572)),Xe=(n(7110),n(4915));n(5715),n(7856);var Je=n(5914);function Qe(e){var t=e.chatData,n=e.p2pUser,r=e.session;if(!t||t.members.length>2)return{avatarType:"conference",isAgent:!0};if("TEAM"===t.type)return function(e){return{avatarType:"team-chat",fullName:e.title,isAgent:!1}}(t);var a=function(e,t){var n=e.members.find((function(e){return e.id!==t.userId}));return{avatarType:"user",firstName:null==n?void 0:n.firstName,isAgent:!0,lastName:null==n?void 0:n.lastName,url:(null==n?void 0:n.id)&&(0,Je.constructUserPictureUrl)(t,n.id)}}(t,r);return n&&(a.isOnline="available"===n.presenceState,a.onlineStatusIcon=(0,w.getUserStatusIcon)(n)),a}var et=n(6702);var tt=(0,et.createContext)({hasSelection:!1,setHasSelection:u.noop,messages:[],selectedMessages:[],getClipboardBuffer:function(){return""},setClipboardBuffer:u.noop,scrollContainer:null});tt.displayName="ChatMessagesContextProvider";n(8202);var nt=n(6607),rt=n(1960),at=n(3764);n(9190),n(4173),n(6070);n(7914);n(5977);var ot=n(3346);n(7777),(0,l.atom)(""),(0,l.atom)(-1),(0,l.atom)(void 0),(0,l.atom)(null);var st=n(7176),it=(n(2234),{isAttachmentsListReady:function(){return!0},getAttachmentsList:function(){return[]},addAttachment:u.noop,removeAttachment:u.noop,clearAttachmentsList:u.noop,initializeAttachmentsList:u.noop,fileRejections:[],setFileRejections:u.noop});var lt=(0,et.createContext)(it);lt.displayName="ChatAttachmentsUIContext";(0,st.createUIStateSelectorHook)(lt,"chatAttachmentsUIState").useChatAttachmentsUIState;var ct=(0,et.createContext)(it);ct.displayName="EmailAttachmentsUIContext";(0,st.createUIStateSelectorHook)(ct,"emailAttachmentsUIState").useEmailAttachmentsUIState,n(2977);n(1510);n(4692);var ut=n(5770),dt=n(8269);n.p;n.p;n.p;n.p;n.p;n.p;n.p;n.p;n.p;n.p;n(5603);var ft=function(){},mt={search:"",setSearch:ft,searchResult:void 0,setSearchResult:ft,showBotSuggestions:!0,toggleBotSuggestions:ft,showSMS:!0,toggleSMS:ft,showTranscript:!0,toggleTranscript:ft},pt=(0,et.createContext)(mt);pt.displayName="VoiceTranscriptUIContext";n(1360),n(4031),n(3156);var ht=o().forwardRef((function(e,t){var n=e.onFileInputClick;return(0,r.jsx)("button",{onClick:n,ref:t,className:"invisible absolute z-[-1] w-0"})})),bt=((0,c.withFileInput)(ht),n(2952),n(3941),n(6508));function gt(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function vt(e,t){return(0,a.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return function(r){var a=document.querySelector(t);(0,u.flow)(n,(function(n){var r=0,o=null;return e((function(e){var s,i,l,c,u,d,m,p=function(e){return e.getFirstNode()!==e.getLastNode()},h=function(e){return e.getSelectionStartIndex()!==e.getSelectionEndIndex()},b=new f.Selection,g=null==b?void 0:b.getLastNode(),v=(null==g?void 0:g.nodeType)===Node.TEXT_NODE?null==g?void 0:g.parentElement:g,y=null==v?void 0:v.closest(t);return a?(e="<br><br>"===e.substring(e.length-8)?e.substring(0,e.length-4):e,y?b&&g?(function(e){var t;if(p(e))r=null!==(t=e.getSelectionStartIndex())&&void 0!==t?t:0,o=e.getFirstNode();else if(h(e)){var n;r=null!==(n=e.getSelectionStartIndex())&&void 0!==n?n:0,o=e.getFirstNode()}else{var a;r=null!==(a=e.getSelectionEndIndex())&&void 0!==a?a:0,o=e.getLastNode()}}(b),(p(m=b)||h(m))&&m.deleteSelected(),o&&(c=r,d=null!==(u=null==(l=o)?void 0:l.textContent)&&void 0!==u?u:"",l.textContent=(null==d?void 0:d.slice(0,c))+n+(null==d?void 0:d.slice(c))),null!==(i=null===(s=document.querySelector(t))||void 0===s?void 0:s.innerHTML)&&void 0!==i?i:e):e:e+n):e+n})),{nodeToFocus:o,offsetToFocus:r,dataToAdd:n}}),(function(e){var t=e.nodeToFocus,n=e.offsetToFocus,r=e.dataToAdd;gt(a,HTMLElement)&&(a.focus(),requestAnimationFrame((function(){var e=function(){a&&(t?o(t):a.lastChild&&s(a.lastChild))},o=function(e){var t,a,o=document.createRange();o.setStart(e,n+r.length),o.setEnd(e,n+r.length),null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),null===(a=window.getSelection())||void 0===a||a.addRange(o)},s=function(e){var t,n,r,a,o,s,i=document.createRange();i.setStart(e,null!==(o=null===(t=e.textContent)||void 0===t?void 0:t.length)&&void 0!==o?o:0),i.setEnd(e,null!==(s=null===(n=e.textContent)||void 0===n?void 0:n.length)&&void 0!==s?s:0),null===(r=window.getSelection())||void 0===r||r.removeAllRanges(),null===(a=window.getSelection())||void 0===a||a.addRange(i)};e(),requestAnimationFrame(e)})))}))(r)}}),[t,e])}var yt=n(8715);n(7087);var xt=n(4432);n(1539);(0,c.createComponentLoader)("chatCenter",(function(){return n.e(975).then(n.t.bind(n,9975,23))}),"ChatCenterInteraction").ChatCenterInteractionLoader;function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function St(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Et=function(e){var t=e.children,n=e.className,a=St(e,["children","className"]);return(0,r.jsxs)("div",_t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ct(e,t,n[t])}))}return e}({className:He("flex items-center px-3 py-2 text-sm/[18px] text-chat-title",n)},a),{children:[(0,r.jsx)(dt.IconCogwheel,{className:"mr-4.5 h-6 shrink-0"}),(0,r.jsx)("div",{"data-testid":"content",children:t})]}))},jt=n(1365),It=n(173);function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){i=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ot=function(e){var t=e.users,n=(0,m.useLocalizationState)().t,o=wt((0,a.useState)(!1),2),s=o[0],i=o[1],l=(0,a.useCallback)((function(){i((function(e){return!e}))}),[]),u=wt((0,a.useMemo)((function(){var e=t.length>8?5:t.length;return[t.slice(0,e),t.slice(e)]}),[t]),2),d=u[0],f=u[1],p=String(f.length),h=He("mt-2 text-sm/[18px] font-semibold text-main-secondary");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"m-0 text-base/[17px] font-semibold text-black",children:n.CHAT_CENTER.message_reactions_users_list_title()}),d.map((function(e){var t=e.userId,n=e.displayName;return(0,r.jsx)("div",{className:h,children:n},t)})),s&&f.map((function(e){var t=e.userId,n=e.displayName;return(0,r.jsx)("div",{className:h,children:n},t)})),!s&&!!f.length&&(0,r.jsx)(c.Button,{enabledInOffline:!0,onClick:l,className:"mt-2 cursor-pointer border-none bg-none p-0 text-sm/[18px] font-semibold text-main-secondary","data-testid":"expand-reaction-users-button",children:n.CHAT_CENTER.message_reactions_expand_users_button_text(p)})]})},At=function(e){var t=e.emoji,n=e.userIds,o=e.messageId,l=(0,w.useUserDetails)(),u=(0,I.useFormatting)().formatFullName,d=(0,i.useSessionState)(),f=d.userId,m=d.firstName,p=d.lastName,h=(0,S.useGroupChatStateMethods)().removeReactionOnMessage,b=(0,s.useGroupChatUIParams)().groupChatId;(0,A.assertDefined)(f),(0,A.assertDefined)(b);var g=n.includes(f),v="L"===t,y=(0,a.useMemo)((function(){return n.map((function(e){if(e===f)return{userId:e,displayName:u(m,p)};var t,n=null===(t=l[e])||void 0===t?void 0:t.data;return n?{userId:e,displayName:u(n.firstName,n.lastName)}:void 0})).filter(A.isDefined)}),[n,f,u,m,p,l]),x=(0,a.useCallback)((function(){g&&h({chatId:b,messageId:o})}),[g,h,b,o]);return y.length?(0,r.jsx)(c.Popup,{hoverable:!0,mode:"hover",contentClassName:"border-chat-center-emoji-popup-border p-3 !shadow-none","data-testid":"message-emoji-reaction-popup",content:(0,r.jsx)(Ot,{users:y}),delay:300,children:(0,r.jsxs)(c.Button,{enabledInOffline:!0,className:He("flex cursor-default select-none border-none p-0 leading-[16px]",{"cursor-pointer":g}),onClick:x,"data-testid":"certain-emoji-reaction-button",children:[v?(0,r.jsx)(Ee,{className:"h-4"}):(0,r.jsx)("span",{className:"text-base",children:t}),(0,r.jsx)("span",{className:"text-sm text-chat-center-message-text-color",children:y.length})]})}):null},Tt=function(e){var t=e.direction,n=e.isDelivered,o=e.isRead,s=e.messageId,i=e.userId,l=e.sendTime,u=e.content,d=e.firstName,p=e.lastName,h=e.attachments,b=e.reactions,g=void 0===b?[]:b,v=e.replyOnMessage,y=e.className,x=e.ariaStatusLabel,C=e.showName,_=void 0!==C&&C,S=e.closable,E=void 0!==S&&S,j=e.nestingLayer,O=void 0===j?0:j,A=e.onClose,T=(0,m.useLocalizationState)().t,M=(0,I.useFormatting)().formatFullName,k=(0,w.useUserDetailsSelector)(i,(function(e){return null==e?void 0:e.firstName})),P=(0,w.useUserDetailsSelector)(i,(function(e){return null==e?void 0:e.lastName})),R=M(null!=d?d:k,null!=p?p:P),L=(0,It.useMsTeamsAttachmentsParser)({message:u,attachments:h}),D=(0,N.useChatMessageSanitizer)({message:L}),H=(0,a.useMemo)((function(){var e={__html:D};return(0,r.jsx)("div",{className:He("text-base [&>blockquote]:relative [&>blockquote]:mx-0 [&>blockquote]:my-[0.5em] [&>blockquote]:px-3\n                        [&>blockquote]:py-[0.5em] [&>blockquote]:before:absolute [&>blockquote]:before:inset-y-0 \n                        [&>blockquote]:before:left-0 [&>blockquote]:before:w-0.5 [&>blockquote]:before:bg-primary-legacy\n                        [&>table]:border-collapse [&>td]:border [&>td]:border-gray-400"),dangerouslySetInnerHTML:e})}),[D]);return(0,r.jsxs)("div",{className:He("relative inline-block whitespace-normal break-all rounded border\n                border-chat-center-in-message-bg bg-chat-center-in-message-bg p-2",y),children:[(0,r.jsxs)("div",{className:"flex justify-between pb-1 text-sm leading-[16px]",children:[(0,r.jsxs)("div",{className:He("flex justify-start",{"w-full justify-end":"out"===t}),children:[_&&(0,r.jsx)("span",{className:"mr-2 text-neutral-fade","data-testid":"party-display-name",children:R}),(0,r.jsx)("span",{className:"text-neutral-fade [&:not(:last-child)]:mr-2","data-testid":"message-time",children:(0,f.formatDate)(l,"h:mm A")}),"out"===t&&n&&!o&&(0,r.jsx)($e.IconDelivered,{className:"[&:not(:last-child)]:mr-2"}),"out"===t&&o&&(0,r.jsx)($e.IconRead,{className:"[&:not(:last-child)]:mr-2 [&_path]:fill-primary-600"}),g.map((function(e){var t=e.emoji,n=e.userIds;return(0,r.jsx)("div",{className:"[&:not(:last-child)]:mr-2",children:(0,r.jsx)(At,{emoji:t,userIds:n,messageId:s},t)},t)}))]}),(0,r.jsx)("div",{className:"flex justify-end [&:not(:empty)]:ml-4",children:E&&(0,r.jsx)(c.Button,{enabledInOffline:!0,semanticIcon:"close",onClick:A,className:"cursor-pointer border-none bg-none p-0",iconClassName:"flex justify-end text-[--c-close-message-btn-text] text-lg/[14px]   m-0 opacity-100 transition-opacity duration-300 ease-in-out hover:opacity-70",tooltip:T.CHAT_CENTER.selected_reply_message_close_button_tooltip()})})]}),v&&!O&&(0,r.jsx)(Tt,{showName:!0,className:"mx-6 mb-1 mt-0 border !border-white !bg-white shadow",messageId:v.messageId,userId:v.userId,content:v.content,sendTime:v.sendTime,nestingLayer:O+1}),(0,r.jsx)("div",{className:"text-chat-center-message-text-color","aria-live":"polite",role:"status","aria-label":x,"data-testid":"message-content",children:H})]})},Mt=function(e){var t,n=e.messageId,a=e.onRemoveReply,o=((null===(t=(0,s.useGroupChatItem)())||void 0===t?void 0:t.messages)||[]).find((function(e){return"system"!==e.type&&e.messageId===n}));return o?((0,jt.assertGroupChatMessage)(o),(0,r.jsx)(Tt,{showName:!0,closable:!0,className:"my-2 ml-0 mr-[auto] shadow",onClose:a,messageId:o.messageId,userId:o.userId,sendTime:o.sendTime,content:o.content,firstName:o.firstName,lastName:o.lastName,reactions:o.reactions,attachments:o.attachments})):null},kt="edit-message-text-area",Pt=(0,a.memo)((function(e){var t,n=e.message,o=n.direction,i=n.content,l=n.replyOnMessage,u=(0,m.useLocalizationState)().t,d=(0,S.useGroupChatStateMethods)().updateMessage,f=(0,ot.useModalsStateMethods)().openModal,p=(0,s.useGroupChatUIParams)().groupChatId,h=(0,s.useMessageParams)().editMessage,b=(0,s.useSetMessageParams)(),g=(0,a.useRef)(null),v=(0,a.useRef)(!1),y=null==h?void 0:h.messageId,x=null==h?void 0:h.content,C=null!==(t=null==h?void 0:h.replyOnMessageId)&&void 0!==t?t:void 0;(0,A.assertDefined)(p),(0,A.assertDefined)(y),(0,A.assertDefined)(x);var _=(0,a.useCallback)((function(e){b((function(t){t.editMessage&&(t.editMessage.content="function"==typeof e?e(t.editMessage.content):e)}))}),[b]),E=vt(_,'[data-testid="'.concat(kt,'"]'))((function(e){return e})),j=(0,a.useCallback)((function(){b((function(e){e.editMessage&&delete e.replyOnMessageId}))}),[b]),I=(0,a.useCallback)((function(){b((function(e){delete e.editMessage}))}),[b]),N=(0,a.useCallback)((function(){f({dataKey:"chat-discard-message-edit-changes-confirmation-dialog",body:u.CHAT_CENTER.edit_message_discard_changes_confirmation_text(),actions:{ok:{title:u.CHAT_CENTER.edit_message_discard_changes_positive_button_text(),action:I},cancel:{title:u.CHAT_CENTER.edit_message_discard_changes_negative_button_text()}}})}),[u,f,I]),w=(0,a.useCallback)((function(){v.current?N():I()}),[N,I]),O=(0,a.useCallback)((function(){d({chatId:p,messageId:y,content:x,replyOnMessageId:C}),I()}),[p,y,x,C,d,I]),T=(0,a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,Xe.isHTMLDivElement)(e.target)&&(e.target.scrollTop=e.target.scrollHeight),b((function(e){e.editMessage&&(e.editMessage.content=t)}))}),[b]);(0,a.useEffect)((function(){v.current=i!==x||l!==C}),[i,l,x,C]);var M="transition-opacity duration-300 ease-in-out hover:opacity-70'";return(0,r.jsx)("div",{className:He("relative flex items-start px-0 py-2",{"items-end justify-end":"out"===o}),"aria-label":u.ACCESSIBILITY.internal_chat_message(),"data-testid":"message-item","data-message":"true","data-edit-message":"true","data-incoming":"in"===o?"true":void 0,"data-outgoing":"out"===o?"true":void 0,children:(0,r.jsxs)("div",{className:He("relative w-full max-w-[70%]\n                    whitespace-normal break-all rounded border border-chat-center-in-message-bg bg-chat-center-in-message-bg p-2",{"border-chat-center-out-message-border bg-white":"out"===o}),children:[C&&(0,r.jsx)(Mt,{messageId:C,onRemoveReply:j}),(0,r.jsx)(c.ContentEditable,{autoFocus:!0,ref:g,onChange:T,className:"pb-2 [&:not(:first-child)]:mt-2","data-testid":kt,value:x}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(c.EmojiButton,{textAreaRef:g,onSelectEmoji:E,tooltip:u.INTERNAL_CHAT.chat_addEmoji_button_tooltip()}),(0,r.jsx)(c.Button,{transparent:!0,enabledInOffline:!0,className:He(M,"ml-7"),onClick:w,tooltip:u.CHAT_CENTER.edit_message_cancel_button_tooltip(),iconClassName:"w-4.5 h-4.5",children:(0,r.jsx)(U,{})}),(0,r.jsx)(c.Button,{transparent:!0,className:M,onClick:O,iconClassName:"w-4.5 h-4.5",tooltip:u.CHAT_CENTER.edit_message_save_button_tooltip(),children:(0,r.jsx)(ge,{})})]})]})})})),Rt=o().forwardRef((function(e,t){var n=e.messageId,o=e.direction,i=e.messageContent,l=e.replyMessageId,u=e.className,d=e.style,p=e.setControlsFixation,h=(0,f.useBoolean)(),b=h.value,g=h.toggle,v=(0,m.useLocalizationState)().t,y=(0,S.useGroupChatStateMethods)(),x=y.reactOnMessage,C=y.pinMessage,_=y.deleteMessage,E=(0,s.useSetMessageParams)(),j=(0,s.useGroupChatUIParams)().groupChatId;(0,A.assertDefined)(j);var I=(0,a.useCallback)((function(){x({chatId:j,messageId:n,emoji:"L"})}),[j,n,x]),N=(0,a.useCallback)((function(e){x({chatId:j,messageId:n,emoji:e})}),[j,n,x]),w=(0,a.useCallback)((function(){E((function(e){e.replyOnMessageId=n}))}),[n,E]),O=(0,a.useCallback)((function(){C({chatId:j,messageId:n})}),[j,n,C]),T=(0,a.useCallback)((function(){E((function(e){e.editMessage={messageId:n,content:i,replyOnMessageId:l}}))}),[n,i,l,E]),M=(0,a.useCallback)((function(){_({chatId:j,messageId:n})}),[j,n,_]),k=(0,a.useMemo)((function(){return[{children:v.CHAT_CENTER.message_enter_edit_mode_button_text(),onClick:T},{children:v.CHAT_CENTER.message_delete_button_text(),onClick:M}]}),[v.CHAT_CENTER,T,M]),P="h-4 w-4 transition-opacity duration-300 hover:opacity-70";return(0,r.jsxs)("div",{ref:t,className:He("flex flex-row flex-nowrap gap-2 rounded border border-chat-center-emoji-popup-border bg-white px-2 py-1.5 shadow-none",u),style:d,children:[(0,r.jsx)(c.Button,{onClick:I,className:P,tooltip:v.CHAT_CENTER.message_like_button_tooltip(),clickThrottle:500,"data-testid":"like-message-button",children:(0,r.jsx)(Ee,{})}),(0,r.jsx)(c.EmojiButton,{closeOnSelect:!0,onSelectEmoji:N,onToggle:p,className:P,iconClassName:"w-4 h-4",tooltip:v.CHAT_CENTER.message_reactions_button_tooltip(),"data-testid":"show-message-reactions-button"}),(0,r.jsx)(c.Button,{enabledInOffline:!0,onClick:w,className:P,tooltip:v.CHAT_CENTER.message_reply_button_tooltip(),clickThrottle:500,"data-testid":"reply-message-button",children:(0,r.jsx)(de,{})}),(0,r.jsx)(c.Button,{onClick:O,className:P,tooltip:v.CHAT_CENTER.message_pin_button_tooltip(),clickThrottle:500,"data-testid":"pin-message-button",children:(0,r.jsx)(Q,{})}),"out"===o&&(0,r.jsx)(c.PopupButton,{custom:!0,enabledInOffline:!0,show:b,toggleShow:g,options:k,className:He(P,"relative flex justify-center text-xl/[6px]"),children:"..."})]})})),Lt=function(e){var t=e.userId,n=e.firstName,a=e.lastName,o=(0,w.useUserDetailsById)(t),s=(0,j.useGetAvatarUrl)(),i=null==o?void 0:o.data,l=s({userId:t});return(0,r.jsx)(O.Avatar,{className:"m-0 mr-1.5",type:"user",size:"28",firstName:n||(null==i?void 0:i.firstName),lastName:a||(null==i?void 0:i.lastName),url:l})};function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){i=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Bt=o().memo((function(e){var t,n=e.message,o=e.scrollerNode,i=n.messageId,l=n.direction,u=void 0===l?"in":l,d=n.content,f=n.sendTime,p=n.attachments,h=n.firstName,b=n.lastName,g=n.userId,v=n.reactions,y=n.replyOnMessage,x=(0,m.useLocalizationState)().t,C=(0,s.useGroupChatItem)(),_=C.chatId,S=C.disabled,E=(0,a.useRef)(null),j="in"===u?x.ACCESSIBILITY.chat_center_message_status_incoming_message():x.ACCESSIBILITY.chat_center_message_status_outgoing_message(),I=Gt((0,a.useState)(!1),2),N=I[0],w=I[1],O=S||N||void 0,A=Gt((0,a.useState)({}),2),T=A[0],M=A[1],k=(0,a.useRef)(0),P=(0,a.useCallback)((function(e){if(e&&E.current){var t=E.current.getBoundingClientRect(),n=t.x,r=t.width,a=e.getBoundingClientRect().width;if("in"===u){var o=k.current-n-a/2;o+a>r-6&&(o-=o+a-r+6),M({left:Math.max(o,6)})}else if("out"===u){var s=n+r-k.current-a/2;s+a>r-6&&(s-=s+a-r+6),M({right:Math.max(s,6)})}}}),[u]),R=(0,s.useGroupChatItem)(),L=null==R?void 0:R.unreadMessages.some((function(e){return e.messageId===i})),D=(0,r.jsxs)(r.Fragment,{children:["in"===u&&(0,r.jsx)(Lt,{firstName:h,lastName:b,userId:g}),(0,r.jsx)(c.SelectionItem,{focusOnSelection:!0,touchedOnly:!0,itemId:i,className:"relative z-0",ref:E,children:(0,r.jsx)(Tt,{className:He("relative inline-block\n                        whitespace-normal break-all rounded border p-2\n                        border-on-secondary text-primary-on-primary before:absolute\n                        before:-bottom-px before:z-[-1] before:h-0 before:w-0 before:rounded-b-[33%]\n                        before:border-b-4 before:border-t-0\n                        before:border-transparent before:border-b-secondary-100 before:content-[''] after:absolute\n                        after:bottom-0 after:z-0 after:h-0 after:w-0 after:rounded-b-[33%] after:border-b-[9px]\n                        after:border-t-0 after:border-transparent after:content-[''] hover:text-primary-on-primary",(t={},Ht(t,"rounded-bl-[8px] bg-secondary-50\n                            before:left-[-5px] before:border-l-[9px] before:border-r-0\n                            after:left-[-5px] after:border-l-[8px]\n                            after:border-r-0 after:border-b-secondary-50","in"===u),Ht(t,"rounded-br-[8px] bg-primary-background\n                            before:right-[-5px] before:border-l-0 before:border-r-[9px]\n                            after:right-[-5px] after:border-l-0\n                            after:border-r-[8px] after:border-b-neutral-0","out"===u),t)),direction:u,isRead:n.isRead,isDelivered:n.isDelivered,messageId:i,userId:g,sendTime:f,content:d,firstName:h,lastName:b,reactions:v,attachments:p,replyOnMessage:y,showName:"in"===u,ariaStatusLabel:j})})]}),H=(0,a.useCallback)((function(e){k.current=e.clientX}),[]);return(0,r.jsx)("div",{className:He("relative flex items-start py-2",{"items-end justify-end":"out"===u}),children:(0,r.jsx)(c.ShowOnHover,{show:O,elementContainerRef:E,elementToShow:(0,r.jsx)(Rt,{ref:P,style:T,className:"absolute top-0 -translate-y-1/2",messageId:i,direction:u,messageContent:d,replyMessageId:null==y?void 0:y.messageId,setControlsFixation:w}),onMouseEnter:H,className:He("flex max-w-[70%]",{"items-end":"in"===u}),"aria-label":x.ACCESSIBILITY.internal_chat_message(),"data-testid":"message-item","data-message":"true","data-text-message":"true",children:L?(0,r.jsx)(Me,{chatId:_,messageId:i,scrollerNode:o,children:D}):D})})})),Ut=function(e){var t=e.message,n=function(e){var t=(0,m.useLocalizationState)().t,n=(0,I.useFormatting)().formatFullName;return(0,a.useMemo)((function(){switch(e.event){case"chat_created":var r=e.addedUsers,a=e.creatorFirstName,o=e.creatorLastName,s=n(a,o),i=r.length?n(r[0].firstName,r[0].lastName):"",l=String(r.length-1);return 1===r.length?t.CHAT_CENTER.sys_message_personal_chat_created_text(s,i):t.CHAT_CENTER.sys_message_group_chat_created_text(s,i,l);case"member_left":var c=e.firstName,u=e.lastName,d=n(c,u);return t.CHAT_CENTER.sys_message_member_left_text(d);case"chat_renamed":var f=e.firstName,m=e.lastName,p=e.newTitle,h=n(f,m);return t.CHAT_CENTER.sys_message_chat_renamed(h,p);case"members_added":var b=e.firstName,g=e.lastName,v=e.addedUsers,y=n(b,g),x=v.length?n(v[0].firstName,v[0].lastName):"",C=String(v.length-1);return 1===v.length?t.CHAT_CENTER.sys_message_one_member_added_no_history(y,x):t.CHAT_CENTER.sys_message_multiple_members_added_no_history(y,x,C);default:return""}}),[e,t,n])}(t);return(0,r.jsx)(c.SelectionItem,{focusOnSelection:!0,touchedOnly:!0,itemId:t.messageId,"data-testid":"message-item","data-system":"true",className:"inline-block",children:(0,r.jsx)(Et,{children:n})})};var Ft=function(e){e.message;return(0,r.jsx)("div",{})},zt=(0,a.memo)((function(e){var t,n=e.message,a=e.scrollerNode,o=null===(t=(0,s.useMessageParams)().editMessage)||void 0===t?void 0:t.messageId;return(0,r.jsx)(c.ErrorBoundary,{fallback:(0,r.jsx)(Pe,{children:"Broken message"}),children:"string"==typeof n?(0,r.jsx)(Pe,{children:n}):"system"===n.type?(0,r.jsx)(Ut,{message:n}):"unread"===n.type?(0,r.jsx)(Ft,{message:n}):n.isDeleted?(0,r.jsx)(Ge,{message:n}):n.messageId===o?(0,r.jsx)(Pt,{message:n}):"announcement"===n.type?(0,r.jsx)(ke,{message:n,scrollerNode:a}):(0,r.jsx)(Bt,{message:n,scrollerNode:a})})}));function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qt(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Wt(e,t,n[t])}))}return e}function Kt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){i=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Yt={index:"LAST"};function Xt(e,t){return qt(t,Object)?t.messageId:"".concat(t,"_").concat(e)}var Jt=(0,a.memo)((function(){var e,t,n=$t((0,a.useState)(null),2),o=n[0],i=n[1],c=_(),u=(0,f.useAsRef)(c),d=(0,l.useSetAtom)(s.scrollerApiAtom),m=(e=(0,s.useGroupChatItem)(),t=(0,S.useGroupChatStateMethods)().markChatAsRead,(0,a.useCallback)((function(n){n&&(null==e?void 0:e.chatId)&&t(null==e?void 0:e.chatId)}),[e,t]));return c.length?(0,r.jsx)(g.Virtuoso,{atBottomStateChange:m,atBottomThreshold:10,alignToBottom:!0,className:"overflow-x-hidden px-4 pb-6 pt-0 [&>:first-child]:!w-[calc(100%-32px)]",computeItemKey:Xt,data:c,followOutput:!0,initialTopMostItemIndex:Yt,itemContent:function(e,t){return(0,r.jsx)(zt,{message:t,scrollerNode:qt(o,HTMLElement)?o:null})},ref:function(e){e&&d({scrollToMessage:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=u.current.findIndex((function(e){return qt(e,Object)&&e.messageId===t}));e.scrollToIndex(Kt(Vt({},n),{index:r}))},scrollToBottom:function(){e.scrollToIndex(Yt)}})},scrollerRef:i,tabIndex:void 0,increaseViewportBy:200}):null})),Qt=o().memo((function(){var e,t=(0,l.useAtomValue)(s.scrollerApiAtom),n=null===(e=(0,s.useGroupChatItem)())||void 0===e?void 0:e.messages,o=(0,a.useCallback)((function(){return n?n.filter((function(e){return e.messageId})).map((function(e){return e.messageId})):[]}),[n]);return(0,r.jsxs)(c.SelectionContainer,{startFrom:"bottom",getAriaSRAlert:function(){return""},className:"relative h-full overflow-x-hidden bg-secondary-container-variant1","data-testid":"chat-content",itemsListProvider:o,onItemSelect:function(e,n){"keys"===n&&t.scrollToMessage(e)},children:[!1,(0,r.jsx)(Jt,{}),(0,r.jsx)(b,{})]})}));function en(e){return!(null==e?void 0:e.replace(/(&nbsp;|<br>)/g,"").trim())}var tn="announcement",nn="message",rn=(0,a.memo)((function(){var e=(0,m.useLocalizationState)().t,t=(0,s.useMessageParams)().messageType,n=void 0===t?nn:t,o=(0,s.useSetMessageParams)(),i=(0,a.useMemo)((function(){return[{value:nn,text:e.CHAT_CENTER.message_type_selector_regular_message()},{value:tn,text:e.CHAT_CENTER.message_type_selector_announcement()}]}),[e]),l=(0,a.useCallback)((function(e,t){var n=t.value;n!==nn&&n!==tn||o((function(e){e.messageType=n}))}),[o]);return(0,r.jsx)(c.Dropdown,{className:"!min-w-[162px] text-base",options:i,value:n,onChange:l,"aria-label":e.ACCESSIBILITY.chat_center_message_type_selector_label(),"data-testid":"message-type-selector",upward:!0,selection:!0})})),an="chat-center-input",on=function(e){var t=(0,m.useLocalizationState)().t,n=e.currentMessage,a=e.disabled,o=e.inputRef,i=e.handleKeyDown,u=e.handleChange,d=(0,s.useGroupChatUIParams)().groupChatId,p=(0,l.useAtomValue)(s.autoFocusAtom);return(0,f.useFocusElement)(o,{condition:p,dependencies:[o,d]}),(0,r.jsx)(c.ContentEditable,{ref:o,autoFocus:p,onKeyDown:i,onChange:u,placeholder:a?t.INTERNAL_CHAT.message_input_placeholder_disabled():t.INTERNAL_CHAT.message_input_placeholder(),className:"!min-h-12 resize-none overflow-auto rounded-none border-none p-0 pt-1 text-lg before:!text-chat-title","data-id":an,"data-testid":"chat-center-text-area",value:n,disabled:a})},sn=function(e){var t=e.textAreaRef,n=e.sendCurrentMessage,o=e.setCurrentMessage,i=e.disableSendButton,l=(0,m.useLocalizationState)().t,u=(0,s.useGroupChatUIParams)().groupChatMembers,d=vt(o,'[data-id="'.concat(an,'"]'))((function(e){return e})),f=(0,a.useCallback)((function(){}),[]),p=(0,a.useCallback)((function(){}),[]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex w-full items-center justify-between px-0 py-2",children:[(0,r.jsx)("div",{className:"flex items-center",children:u.length>2&&(0,r.jsx)(rn,{})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(c.AttachButton,{onClick:f,handleUploadFiles:p}),(0,r.jsx)(c.EmojiButton,{textAreaRef:t,onSelectEmoji:d,tooltip:l.INTERNAL_CHAT.chat_addEmoji_button_tooltip()}),(0,r.jsx)(c.Button,{transparent:!0,onClick:n,className:"ml-4 transition-opacity duration-300 ease-in-out hover:opacity-70",tooltip:l.INTERNAL_CHAT.chat_sendMessage_tooltip(),clickThrottle:500,"data-testid":"send-button",disabled:i,children:(0,r.jsx)(dt.IconChatSendMessage,{})})]})]})})};function ln(e,t,n,r,a,o,s){try{var i=e[o](s),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(r,a)}function cn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){ln(o,r,a,s,i,"next",e)}function i(e){ln(o,r,a,s,i,"throw",e)}s(void 0)}))}}function un(e,t){var n,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=s.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(i){o=[6,i],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}var dn=o().memo((function(){var e,t=(0,S.useGroupChatStateMethods)().sendMessage,n=(0,bt.useOfflineStateMethods)().setShowOfflineAlert,o=(0,bt.useIsOffline)(),i=(0,s.useGroupChatUIParams)(),c=i.groupChatId,u=i.groupChatMembers,d=(0,s.useMessageParams)(),f=d.messageText,m=d.replyOnMessageId,p=(0,s.useSetMessageParams)(),h=null===(e=(0,s.useGroupChatItem)())||void 0===e?void 0:e.disabled,b=(0,a.useRef)(null),g=(0,l.useAtomValue)(s.scrollerApiAtom),v=(0,a.useCallback)((function(e,t){(0,Xe.isHTMLDivElement)(e.target)&&(e.target.scrollTop=e.target.scrollHeight),p((function(e){e.messageText=t}))}),[p]),y=(0,a.useCallback)((function(e){p((function(t){t.messageText=e(t.messageText||"")}))}),[p]),x=(0,a.useCallback)(cn((function(){return un(this,(function(e){return!f||en(f)?[2]:o?(n(!0),[2]):(t({groupChatId:c,groupChatMembers:u,message:(r=f,r.replace(/^(<br>)+|(<br>)+$/g,"")),replyOnMessageId:m}),g.scrollToBottom(),[2]);var r}))})),[o,f,m,g,c,u,t,n]),C=(0,a.useCallback)((function(e){if("Enter"===e.key){if(e.shiftKey||e.ctrlKey)return;e.preventDefault(),e.stopPropagation(),x()}}),[x]),_=(0,a.useCallback)((function(){p((function(e){e.replyOnMessageId=void 0}))}),[p]);return(0,r.jsxs)("div",{className:"z-[5] mx-4 my-0 flex max-h-[33%] flex-col border-t border-main-border",children:[m&&(0,r.jsx)(Mt,{messageId:m,onRemoveReply:_}),(0,r.jsx)(on,{inputRef:b,currentMessage:f||"",handleKeyDown:C,handleChange:v,disabled:h}),!h&&(0,r.jsx)(sn,{textAreaRef:b,sendCurrentMessage:x,setCurrentMessage:y,disableSendButton:en(f)})]})})),fn=function(e){var t=e.messageId,n=e.displayName,a=e.content,o=e.sendTime,i=(0,m.useLocalizationState)().t,u=(0,S.useGroupChatStateMethods)().unpinMessage,d=(0,ot.useModalsStateMethods)().openModal,p=(0,s.useGroupChatUIParams)().groupChatId,h=(0,l.useAtomValue)(s.scrollerApiAtom);return(0,r.jsxs)("div",{className:"z-[2] flex items-center bg-chat-center-in-message-bg py-[9px] pl-2 pr-6 leading-[18px] shadow",children:[(0,r.jsx)(c.Button,{onClick:function(){d({dataKey:"chat-unpin-message-confirmation-dialog",body:i.CHAT_CENTER.message_unpin_confirmation_text(),actions:{ok:{title:i.CHAT_CENTER.message_unpin_positive_button_text(),action:function(){p&&u({chatId:p,messageId:t})}},cancel:{title:i.CHAT_CENTER.message_unpin_negative_button_text()}}})},className:"ease m-0 h-4 w-4 cursor-pointer border-none bg-transparent p-0 opacity-100 transition-opacity duration-300 hover:opacity-70",tooltip:i.CHAT_CENTER.message_unpin_button_tooltip(),clickThrottle:500,"data-testid":"unpin-message-button",children:(0,r.jsx)(Te,{})}),(0,r.jsx)("div",{className:"ml-2 flex-[0_0_auto] text-sm font-semibold text-main","data-testid":"party-display-name",children:n}),(0,r.jsx)("div",{className:"mx-2 cursor-pointer truncate text-base text-chat-center-message-text-color",onClick:function(){h.scrollToMessage(t,{align:"start"})},"data-testid":"message-content",children:a}),(0,r.jsx)("span",{className:"ml-auto flex-[0_0_auto] text-sm text-chat-title","data-testid":"message-time",children:(0,f.formatDate)(o,"h:mm A")})]})},mn=o().memo((function(){var e=(0,i.useSessionState)(),t=e.userId,n=e.firstName,a=e.lastName,o=(0,w.useUserDetails)(),l=(0,I.useFormatting)().formatFullName,c=(0,s.useGroupChatItem)(),u=(null==c?void 0:c.messages)||[],d=(null==c?void 0:c.pinnedMessages)||[];return(0,r.jsx)(r.Fragment,{children:d.map((function(e){var s,i=u.find((function(t){return"system"!==t.type&&t.messageId===e.messageId}));i&&(0,jt.assertGroupChatMessage)(i);var c,d,f=null===(s=o[e.userId])||void 0===s?void 0:s.data,m=e.userId===t,p=m?n:null==f?void 0:f.firstName,h=m?a:null==f?void 0:f.lastName,b=l(p,h),g=(0,Xe.formatHTMLAsOneLineString)(null!==(c=null==i?void 0:i.content)&&void 0!==c?c:e.content),v=null!==(d=null==i?void 0:i.sendTime)&&void 0!==d?d:e.sendTime;return(0,r.jsx)(fn,{messageId:e.messageId,displayName:b,content:g,sendTime:v},e.messageId)}))})})),pn=function(){var e=(0,s.useGroupChatUIParams)().groupChatId,t=(0,i.useSessionState)("privileges");return(0,r.jsxs)("div",{className:"relative flex flex-auto flex-col justify-between overflow-hidden",children:[(0,r.jsx)(mn,{}),(0,r.jsx)(Qt,{},e),t.CAN_START_INTERNAL_CHAT&&(0,r.jsx)(dn,{})]})};function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){i=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gn=function(e){var t=e.children,n=e.scope,o=(0,s.useGroupChatUIStateMethods)().resetGroupChat;(0,a.useEffect)((function(){return function(){o(n)}}),[n,o]);var i=bn((0,a.useState)((function(){var e=(0,l.createStore)();return e.set(s.chatScopeAtom,n),e})),1)[0];return(0,r.jsx)(l.Provider,{store:i,children:t})};function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){i=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xn=function(e){var t=e.interactionId,n=e.scope,o=yn((0,a.useState)(!1),2),i=o[0],l=o[1],c=(0,s.useGroupChatUIStateMethods)().setupGroupChatByInteraction;return(0,a.useEffect)((function(){c(n,t).then((function(){return l(!0)}))}),[t,n,c]),i?(0,r.jsx)(gn,{scope:n,children:(0,r.jsx)(pn,{})}):null},Cn=n(161);function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){i=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var En=function(){var e=(0,m.useLocalizationState)().t,t=Sn((0,a.useState)(""),2),n=t[0],o=t[1],i=Sn((0,a.useState)([]),2),c=i[0],u=i[1],d=(0,s.useSetupGroupChatById)(),p=(0,s.useSetupGroupChatByMembers)(),h=(0,s.useResetGroupChat)(),b=(0,s.useGroupChatUIParams)().groupChatId;(0,a.useEffect)((function(){b&&(u([]),o(""))}),[b]);var g=Sn((0,l.useAtom)(s.autoFocusAtom),2)[1],v=(0,a.useCallback)((function(e){d(e)}),[d]),y=(0,a.useCallback)((function(e){var t="function"==typeof e?e(c):e;u(t),t.some((0,f.not)(Cn.isUserSearchResult))&&console.error("Teams and group chats are not supported yet");var n=t.filter(Cn.isUserSearchResult);t.length?(p({groupChatMembers:n}),g(!1)):(h(),g(!0))}),[h,c,g,p]);return(0,r.jsxs)("div",{className:"flex h-14 bg-white",children:[(0,r.jsx)("span",{className:"ml-5 w-60 text-[13px]/[56px] font-semibold",children:e.CHAT_CENTER.chat_center_header()}),(0,r.jsx)("div",{className:"flex flex-1 items-center border-b border-l border-chat-center-header-border bg-chat-center-in-message-bg px-2.5",children:(0,r.jsx)("div",{className:"flex w-full max-w-100 flex-col",children:(0,r.jsx)(Cn.MultipleUserSearch,{inputClassName:"max-h-10 overflow-y-auto",inputPlaceholder:e.CHAT_CENTER.main_search_input_placeholder(),loadingLabel:e.CHAT_CENTER.main_search_loader_text(),noSearchValueLabel:c.length?void 0:e.CHAT_CENTER.main_search_loader_text(),onGroupChatSelect:v,searchForGroupChats:!0,searchForTeamChats:!0,searchForTeams:!0,searchForUsers:!0,searchValue:n,selectedItems:c,setSearchValue:o,setSelectedItems:y,showSearchIcon:!0,uniqueSearchId:"chat-center",withSearchInChatsOption:!0})})})]})},jn=n(2443),In=n(2654),Nn=n(3295);function wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function On(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function An(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Tn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Mn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){i=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var kn,Pn=function(e){var t=e.onClose,n=Tn(e,["onClose"]),o=(0,m.useLocalizationState)().t,s=Mn((0,a.useState)(""),2),i=s[0],l=s[1],u=Mn((0,a.useState)(""),2),f=u[0],p=u[1],h=Mn((0,a.useState)([]),2),b=h[0],g=h[1],v=(0,Nn.useDirectoryState)("teams"),y=(0,a.useCallback)((function(e,t){l(t.value)}),[]),x=(0,a.useCallback)((function(e){p(""),g((function(t){return Ue()(t,(function(t){t.push(e)}))}))}),[]),C=(0,a.useMemo)((function(){return v.filter((function(e){return e.name.toLowerCase().includes(f.toLowerCase())&&!b.some((function(t){return t.id===e.id}))}))}),[f,v,b]),_=(0,a.useCallback)((function(e){g((function(t){return t.filter((function(t){return t.id!==e.id}))}))}),[]);return(0,r.jsxs)(c.Modal,An(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){On(e,t,n[t])}))}return e}({onClose:t,"aria-labelledby":"newTeamsChatDialogHeader",className:"flex max-w-[620px] flex-col justify-center bg-white"},n),{children:[(0,r.jsx)(c.Modal.Header,{id:"newTeamsChatDialogHeader",children:o.CHAT_CENTER.chat_add_new_team_chat_title()}),(0,r.jsxs)(c.Modal.Content,{className:"h-[60vh] !overflow-hidden",children:[(0,r.jsx)("div",{className:"mb-2 text-left font-bold text-info",children:o.CHAT_CENTER.chat_add_new_team_chat_text()}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(d.SmInput,{fluid:!0,placeholder:o.CHAT_CENTER.chat_add_new_team_chat_optional(),value:i,onChange:y,className:"rounded leading-[17px] [&_input]:h-[37px]"})}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(c.SelectionInput,{id:"chat-center-search-team",className:"border-main-border px-3.5   text-base text-main focus-within:!border-semantic-border-input   focus:!border-semantic-border-input active:!border-semantic-border-input",items:b,value:f,onChange:p,onItemRemoved:_,placeholder:o.CHAT_CENTER.chat_add_new_team_chat_placeholder()})}),(0,r.jsxs)("div",{className:"overflow-y-auto overflow-x-hidden",children:[C.map((function(e){return(0,r.jsx)(Cn.SearchResultTeam,{id:e.id,displayText:e.name,onClick:x},e.id)})),f&&!C.length&&(0,r.jsx)("div",{className:"h-[37px] truncate py-[3px] pl-3.5 pr-0.5 leading-[31px]",children:o.CHAT_CENTER.search_no_results(f)})]})]}),(0,r.jsxs)(c.Modal.Actions,{children:[(0,r.jsx)(c.SemanticButton,{enabledInOffline:!0,onClick:function(){return t()},children:o.CHAT_CENTER.chat_add_new_team_chat_btn_cancel()}),(0,r.jsx)(c.SemanticButton,{primary:!0,disabled:!b.length,onClick:function(){return t()},children:o.CHAT_CENTER.chat_add_new_team_chat_btn_start_chat()})]})]}))},Rn=(0,a.memo)((function(e){var t=e.actionDispatcher,n=e.item,a=e.show,o=e.toggleShow,s=(0,m.useLocalizationState)().t,i=Ln(t,n,o,s);return(0,r.jsx)(c.PopupButton,{custom:!0,show:a,toggleShow:o,enabledInOffline:!0,tabIndex:0,className:"cursor-pointer border-none bg-none pb-2 text-[22px]/[24px] hover:scale-110 hover:text-black",tooltip:s.CHAT_CENTER.show_actions_button_tooltip(),"data-testid":"show-group-chat-actions-button",options:i,children:"..."})})),Ln=function(e,t,n,r){var o="TEAM"===t.type,s=(0,a.useCallback)((function(){e(kn.pin),n()}),[e,n]),i=(0,a.useCallback)((function(){e(kn.mute),n()}),[e,n]),l=(0,a.useCallback)((function(){e(kn.enable_alerts),n()}),[e,n]),c=(0,a.useCallback)((function(){e(kn.delete),n()}),[e,n]),u=(0,a.useCallback)((function(){e(kn.leave),n()}),[e,n]);return(0,a.useMemo)((function(){var e=[{children:t.pinned?r.CHAT_CENTER.recent_chat_action_unpin_text():r.CHAT_CENTER.recent_chat_action_pin_text(),onClick:s}];return t.disabled||t.muted||e.push({children:r.CHAT_CENTER.recent_chat_action_mute_text(),onClick:i}),t.disabled||e.push({children:r.CHAT_CENTER.recent_chat_action_enable_alerts_text(),onClick:l}),!o&&!t.disabled&&t.members.length>2&&e.push({children:r.CHAT_CENTER.recent_chat_action_leave_text(),onClick:u}),o||e.push({children:r.CHAT_CENTER.recent_chat_action_delete_text(),onClick:c}),e}),[t.pinned,t.disabled,t.muted,t.members.length,r.CHAT_CENTER,s,i,l,o,u,c])},Dn=(0,a.memo)((function(e){var t=e.actionDispatcher,n=e.item,o=(0,m.useLocalizationState)().t,s=(0,a.useCallback)((function(){t(kn.mute)}),[t]);return n.muted?(0,r.jsx)(c.LinkLikeButton,{onClick:s,className:"text-sm/[18px]",as:"div",children:o.CHAT_CENTER.recent_chat_action_unmute_text()}):null}));!function(e){e.pin="pin",e.mute="mute",e.enable_alerts="enable_alerts",e.delete="delete",e.leave="leave"}(kn||(kn={}));var Hn=o().memo((function(e){var t,n=e.item,o=e.selected,l=e.scrollContainerRef,u=e.actionDispatcher,d=e.onClick,p=e.unreadCount,h=n.title,b=n.members,g=n.chatId,y=n.muted,x=(0,i.useSessionState)(),C=(0,f.useBoolean)(),_=C.value,E=C.toggle,j=(0,a.useRef)(null),I=(0,a.useCallback)((function(e){u(g,e)}),[u,g]),N=function(e){var t=e.elemRef,n=e.selected,r=e.members,o=e.scrollContainerRef,s=(0,w.useUserDetails)(),l=(0,i.useSessionState)().userId,c=(0,a.useMemo)((function(){return r.map((function(e){return e.id})).filter((function(e){return e!==l}))}),[r,l]),u=c.length>1,d=u?void 0:c[0],m=d?s[d]:void 0,p=(0,f.useIntersectionObserver)(t,{enabled:!n,root:o.current}).isIntersecting,h=n?c:d;return(0,w.useSubscribeForUserDetails)(h,n||p),(0,a.useMemo)((function(){return{isConference:u,p2pUserDetails:m,p2pUserId:d}}),[u,d,m])}({elemRef:j,members:b,scrollContainerRef:l,selected:o}),O=N.isConference,A=N.p2pUserDetails,T=N.p2pUserId,M=(0,S.useLastGroupChatMessage)(g),k=Qe({chatData:n,p2pUser:null==A?void 0:A.data,session:x}),P=function(e,t,n){var a,o,s,i=(0,m.useLocalizationState)().t,l=(0,w.useUserDetails)(),c=t.find((function(t){return t.id===(null==e?void 0:e.userId)})),u=e?l[e.userId]:void 0,d=null!==(s=null!==(o=null==u||null===(a=u.data)||void 0===a?void 0:a.firstName)&&void 0!==o?o:null==e?void 0:e.firstName)&&void 0!==s?s:null==c?void 0:c.firstName,f=e?e.userId===n?i.CHAT_CENTER.chat_last_message_your_author_name():d:"",p=e?(0,Xe.formatHTMLAsOneLineString)(e.content):"";return(0,r.jsx)("div",{className:"truncate text-sm text-chat-title",children:f&&p?"".concat(f,": ").concat(p):""})}(M,b,x.userId),R=(0,r.jsx)(Rn,{actionDispatcher:I,item:n,show:_,toggleShow:E}),L=(0,r.jsx)(Dn,{actionDispatcher:I,item:n}),D=(0,a.useCallback)((function(){d(g)}),[d,g]),H=null===(t=(0,s.useGroupChatUIState)("messageParams")[g])||void 0===t?void 0:t.showZeroUnreadBadge,G=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"inline-flex overflow-hidden",children:[(0,r.jsx)("span",{className:"truncate",children:h}),(0,r.jsx)(c.UnreadBadge,{className:"ml-2",inline:!0,muted:y,showZerro:H,unreadAmount:p})]}),(0,r.jsx)("div",{className:"ml-auto flex-none pl-2 text-sm font-normal text-main-secondary   group-focus-within:hidden group-hover:hidden",children:M&&(0,v.formatDate)(M.sendTime)})]}),B=He("px-4 pb-[13px] pt-[11px]",{"bg-contact-list-bg-hover":o});return(0,r.jsx)(In.ContactListItem,{as:"div",containerRef:j,showControls:_,userId:T,isConference:O,avatarProps:k,title:G,body:P,onClick:D,className:"group",contentClassName:B,controls:R,subControls:L,isSelected:o})})),Gn=function(){var e=(0,m.useLocalizationState)().t,t=(0,ot.useModalsStateMethods)().openModal,n=(0,s.useRemoveMemberFromGroupChat)(),r=(0,i.useSessionState)().userId;return(0,a.useCallback)((function(){t({dataKey:"leave-group-chat-confirmation-dialog",body:e.CHAT_CENTER.leave_chat_confirmation_warning(),actions:{ok:{title:e.CHAT_CENTER.leave_chat_positive_button_text(),action:function(){n(r)}},cancel:{title:e.CHAT_CENTER.leave_chat_negative_button_text()}}})}),[e,t,n,r])};function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Un(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Fn(){var e=(0,S.useGroupChatState)(["items","chatListReceived"]),t=e.items,n=e.chatListReceived;return(0,a.useMemo)((function(){var e=!n;if((0,u.isEmpty)(t))return{recentChats:[],pinnedChats:[],teamChats:[],isLoading:e};var r=(0,u.pickBy)(t,(function(e){return!e.hidden}));return Un(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Bn(e,t,n[t])}))}return e}({},(0,u.values)(r).filter((function(e){return!e.hidden})).sort((function(e,n){var r,a,o,s,i,l,c=null!==(o=null===(r=t[e.chatId])||void 0===r?void 0:r.messages)&&void 0!==o?o:[],u=null!==(s=null===(a=t[n.chatId])||void 0===a?void 0:a.messages)&&void 0!==s?s:[],d=c.length?c[c.length-1].sendTime:null!==(i=e.creationTimestamp)&&void 0!==i?i:0;return(u.length?u[u.length-1].sendTime:null!==(l=n.creationTimestamp)&&void 0!==l?l:0)-d})).reduce((function(e,t){return"TEAM"===t.type?e.teamChats.push(t):t.pinned?e.pinnedChats.push(t):e.recentChats.push(t),e}),{recentChats:[],pinnedChats:[],teamChats:[]})),{isLoading:e})}),[n,t])}var zn=o().memo((function(){var e,t,n,o=(0,m.useLocalizationState)().t,l=(0,jn.useLocalSettings)(),u=(0,a.useRef)(null),d=(0,s.useSetupGroupChatById)(),p=(0,s.useGroupChatUIParams)().groupChatId,h=(0,S.useGroupChatStateRef)(),b=Fn(),g=b.recentChats,v=b.pinnedChats,y=b.teamChats,x=b.isLoading,C=function(){var e=(0,i.useSessionState)().userId,t=(0,m.useLocalizationState)().t,n=(0,S.useGroupChatStateMethods)(),r=n.togglePinChat,o=n.toggleMuteChat,s=n.removeGroupChat,l=n.hideGroupChat,c=(0,S.useGroupChatState)("items"),u=(0,ot.useModalsStateMethods)().openModal,d=Gn(),f=(0,a.useCallback)((function(n){var r=c[n];if(r&&e){var a=e===(null==r?void 0:r.createdByUserId);u({dataKey:"delete-group-chat-confirmation-dialog",title:t.CHAT_CENTER.delete_chat_confirmation_title(),body:a?t.CHAT_CENTER.delete_chat_confirmation_owner_body():t.CHAT_CENTER.delete_chat_confirmation_non_owner_body(),actions:{ok:{title:t.CHAT_CENTER.delete_chat_confirmation_positive_button_text(),action:function(){return a?s(n):l(n)}},cancel:{title:t.CHAT_CENTER.delete_chat_confirmation_negative_button_text()}}})}}),[c,e,u,t.CHAT_CENTER,l,s]);return(0,a.useCallback)((function(e,t){switch(t){case kn.pin:r(e);break;case kn.mute:o(e);break;case kn.enable_alerts:break;case kn.delete:f(e);break;case kn.leave:d()}}),[r,o,f,d])}(),_=(e=(0,ot.useModalComponentOpener)(Pn),t=(0,Nn.useDirectoryState)("teams"),n=(0,Nn.useDirectoryStateMethods)().getAgentTeams,(0,a.useCallback)((function(){0===t.length&&n(),e()}),[n,e,t.length])),E=(0,a.useMemo)((function(){return g.filter((function(e){return e.chatId})).map((function(e){return e.chatId}))}),[g]),j=(0,f.useAsRef)(E);(0,a.useEffect)((function(){x||l.get("chatCenterSelectedChatId").then((function(e){var t=h.current.items,n=j.current[j.current.length-1];e&&e in t?d(e):n&&d(n)}))}),[h,x,j,l,d]);var I=He("relative m-[3px] h-6.5 w-6.5 cursor-pointer rounded-[50%] border border-chat-title\n     before:absolute before:left-[calc(50%-7px)] before:top-1/2 before:h-px before:w-3.5 before:bg-chat-title after:absolute\n     after:left-1/2 after:top-[calc(50%-7px)] after:h-3.5 after:w-px after:bg-chat-title hover:border-primary-legacy hover:before:bg-primary-legacy\n     hover:after:bg-primary-legacy"),N=He("mx-1.5 my-2.5 flex h-8"),w=He("ml-2.5 mr-auto leading-[32px]");return(0,r.jsxs)("div",{className:He("w-[310px] overflow-y-auto border-r border-main-border bg-white",{"overflow-hidden":x}),"data-testid":"chat-center-left-panel",ref:u,children:[!!v.length&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:N,children:(0,r.jsx)("div",{className:w,children:o.CHAT_CENTER.pinned_chats_title()})}),(0,r.jsx)(c.SelectionContainer,{children:v.map((function(e){return(0,r.jsx)(c.SelectionItem,{focusOnSelection:!0,touchedOnly:!0,itemId:e.chatId,tabIndex:0,children:(0,r.jsx)(Hn,{item:e,unreadCount:e.unreadCount,selected:p===e.chatId,scrollContainerRef:u,actionDispatcher:C,onClick:d},e.chatId)},e.chatId)}))})]}),(0,r.jsxs)("div",{className:N,children:[(0,r.jsx)("div",{className:w,children:o.CHAT_CENTER.team_chats_title()}),(0,r.jsx)(c.Button,{enabledInOffline:!0,className:He(I,{"before:bg-white after:bg-white hover:border-primary-legacy hover:!bg-primary-legacy":!1}),tooltip:o.CHAT_CENTER.new_team_chat_button_tooltip(),"data-testid":"add-team-chat-button",onClick:_})]}),x?(0,r.jsx)("div",{className:"px-2",children:(0,r.jsx)(In.ContactListPlaceholder,{amount:30})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.SelectionContainer,{children:y.map((function(e){return(0,r.jsx)(c.SelectionItem,{focusOnSelection:!0,touchedOnly:!0,itemId:e.chatId,tabIndex:0,children:(0,r.jsx)(Hn,{item:e,unreadCount:e.unreadCount,selected:p===e.chatId,scrollContainerRef:u,actionDispatcher:C,onClick:d},e.chatId)},e.chatId)}))}),(0,r.jsx)("div",{className:N,children:(0,r.jsx)("div",{className:w,children:o.CHAT_CENTER.recent_chats_title()})}),(0,r.jsx)(c.SelectionContainer,{children:g.length?g.map((function(e){return(0,r.jsx)(c.SelectionItem,{focusOnSelection:!0,touchedOnly:!0,itemId:e.chatId,tabIndex:0,children:(0,r.jsx)(Hn,{item:e,unreadCount:e.unreadCount,selected:p===e.chatId,scrollContainerRef:u,actionDispatcher:C,onClick:d})},e.chatId)})):(0,r.jsxs)("div",{className:"flex flex-col flex-nowrap items-center",children:[(0,r.jsx)(V,{className:"m-2 h-10 w-10 stroke-1"}),(0,r.jsx)("span",{children:o.CHAT_CENTER.no_recent_chats_message()})]})})]})]})}));function Zn(e,t,n,r,a,o,s){try{var i=e[o](s),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(r,a)}function Wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){qn(e,t,n[t])}))}return e}function Kn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function $n(e,t){var n,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=s.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(i){o=[6,i],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}var Yn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"findGroupChatByInteraction",value:function(e){if(e.groupChatId)return this.groupChatConnector.getStateData().items[e.groupChatId];var t=this.getMembersFromInteraction(e);return t?this.findGroupChatItemByMembers(t):void 0}},{key:"findGroupChatItemByMembers",value:function(t){var n=this.groupChatConnector.getStateData().items;return Object.values(n).find((function(n){return e.isMembersMatch(t,n.members)}))}},{key:"findInteraction",value:function(e){var t=this.interactionStateConnector.getStateData().items.find((function(t){return t.id===e}));return(0,A.assertDefined)(t),t}},{key:"findInteractionByGroupChatParams",value:function(t){var n=this;return this.interactionStateConnector.getStateData().items.find((function(r){if(t.groupChatId)return r.groupChatId===t.groupChatId;var a=n.utilsNS.getMembersFromInteraction(r);return t.groupChatMembers&&a?e.isMembersMatch(t.groupChatMembers,a):void 0}))}},{key:"getMembersFromInteraction",value:function(e){if(e.groupChatMembers)return e.groupChatMembers;if(e.userId){var t=this.sessionConnector.getStateData();return[{id:t.userId,firstName:t.firstName,lastName:t.lastName},{id:e.userId,firstName:e.displayData.firstName,lastName:e.displayData.lastName}]}}},{key:"replacePotentialInteraction",value:function(e){var t,n=this;return(t=function(){var t,r,a,o,s;return $n(this,(function(i){switch(i.label){case 0:return t=n.groupChatConnector.getStateData().items[e],r=t.members,a=n.utilsNS.findInteractionByGroupChatParams({groupChatId:e,groupChatMembers:r}),(0,Ze.isPotentialInteraction)(a)?[4,n.interactionStateConnector.dispatch.openInternalChat({direction:a.direction||"outbound",displayName:t.title,groupChatId:t.chatId})]:[2];case 1:return o=i.sent(),s=a.id,n.interactionStateConnector.dispatch.completeItem(s),[2,{newInteractionId:o,oldInteractionId:s}]}}))},function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(e){Zn(o,r,a,s,i,"next",e)}function i(e){Zn(o,r,a,s,i,"throw",e)}s(void 0)}))})()}},{key:"setGroupChatParamsToInteraction",value:function(e,t){this.interactionStateConnector.dispatch.setGroupChat(e,t)}},{key:"updateGroupChatId",value:function(t,n){var r=this.groupChatConnector.getStateData().items[n];this.produceState((function(a){a.scopeMap[t]=Kn(Vn({},a.scopeMap[t]),{groupChatId:n,groupChatMembers:r?e.clearExtraKeysInMembes(r.members):[]})}))}},{key:"updateInteractionId",value:function(t,n){var r=this.utilsNS.findInteraction(n),a=this.utilsNS.getMembersFromInteraction(r)||[];this.produceState((function(r){r.scopeMap[t]=Kn(Vn({},r.scopeMap[t]),{interactionId:n,groupChatMembers:a});var o=!0,s=!1,i=void 0;try{for(var l,c=(0,A.typedKeys)(r.scopeMap)[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value,d=r.scopeMap[u];if(u===t||!d||!d.groupChatMembers)return;e.isMembersMatch(d.groupChatMembers,a)&&(d.interactionId=n)}}catch(f){s=!0,i=f}finally{try{o||null==c.return||c.return()}finally{if(s)throw i}}}))}},{key:"updateMembers",value:function(t,n){this.produceState((function(r){r.scopeMap[t]=Kn(Vn({},r.scopeMap[t]),{groupChatMembers:e.clearExtraKeysInMembes(n)})}))}}],r=[{key:"getMessageParamsId",value:function(e,t){return t.groupChatId?t.groupChatId:t.interactionId?"potential_".concat(t.interactionId):"potential_".concat(e)}},{key:"isMembersMatch",value:function(e,t){return(e.length===t.length?(0,u.intersection)(e.map((function(e){return e.id})),t.map((function(e){return e.id}))):[]).length===e.length}},{key:"clearExtraKeysInMembes",value:function(e){return e.map((function(e){return(0,u.pick)(e,["firstName","id","lastName"])}))}}],n&&Wn(t.prototype,n),r&&Wn(t,r),e}();function Xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){i=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||er(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qn(e){return function(e){if(Array.isArray(e))return Xn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||er(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){if(e){if("string"==typeof e)return Xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xn(e,t):void 0}}var tr=function(e){var t=e.showMembersListUI,n=e.closePopup,o=(0,m.useLocalizationState)().t,i=Jn((0,a.useState)(""),2),l=i[0],u=i[1],f=Jn((0,a.useState)([]),2),p=f[0],h=f[1],b=Jn((0,a.useState)(!1),2),g=b[0],v=b[1],y=""===l&&!p.length,x=(0,s.useSetupGroupChatByMembers)(),C=(0,s.useGroupChatUIParams)().groupChatMembers,_=function(e){v("include"===e.currentTarget.value)},S="!my-2 !mx-4 last:!mb-0",E="h-8 !px-6 !m-0 [&:not(:last-child)]:!mr-2 py-0 justify-center";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Cn.MultipleUserSearch,{inline:!0,searchForUsers:!0,searchForTeams:!0,autoFocus:!0,uniqueSearchId:"chat-center",searchValue:l,setSearchValue:u,selectedItems:p,setSelectedItems:h,inputPlaceholder:o.CHAT_CENTER.chat_add_members_search_input_placeholder(),loadingLabel:o.GLOBAL.loading()}),y&&2===C.length&&(0,r.jsx)("div",{className:"mt-2 mx-2 rounded-[3px] border border-chat-center-personal-note-border bg-chat-center-personal-note-bg \n    px-6 py-3.5 leading-[20px] text-chat-center-personal-note-text",children:o.CHAT_CENTER.chat_add_members_to_personal_chat_note()}),y&&C.length>2&&(0,r.jsxs)(d.SmForm,{autoComplete:"off",noValidate:!0,role:"radiogroup",children:[(0,r.jsx)(d.SmForm.Field,{className:S,children:(0,r.jsx)(c.Radio,{label:o.CHAT_CENTER.chat_add_members_dont_include_history_option(),name:"group-chat-include-history-options",value:"not_include",checked:!g,onChange:_})}),(0,r.jsx)(d.SmForm.Field,{className:S,children:(0,r.jsx)(c.Radio,{label:o.CHAT_CENTER.chat_add_members_include_history_option(),name:"group-chat-include-history-options",value:"include",checked:g,onChange:_})})]}),(0,r.jsxs)("div",{className:"flex justify-end px-4 pb-4 pt-2",children:[(0,r.jsx)(c.SemanticButton,{enabledInOffline:!0,onClick:function(){C.length>2?t():n()},className:E,children:o.CHAT_CENTER.chat_add_members_negative_button_text()}),(0,r.jsx)(c.SemanticButton,{primary:!0,onClick:function(){var e=p.filter(Cn.isUserSearchResult);e.length&&x({groupChatMembers:Qn(C).concat(Qn(Yn.clearExtraKeysInMembes(e))),includeHistory:g}),C.length+e.length>2?t():n()},disabled:!p.length,className:E,children:o.CHAT_CENTER.chat_add_members_positive_button_text()})]})]})};function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rr(e){return function(e){if(Array.isArray(e))return nr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return nr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(){var e=(0,I.useFormatting)().formatFullName,t=(0,w.useUserDetails)(),n=(0,s.useGroupChatUIParams)().groupChatMembers;return(0,a.useMemo)((function(){return rr(n).sort((function(e,t){return e.firstName.toLowerCase().localeCompare(t.firstName.toLowerCase())})).map((function(n){var r=t[n.id],a=null==r?void 0:r.data.presenceState,o=null==r?void 0:r.data.extension;return{userId:n.id,displayName:e(n.firstName,n.lastName),avatarData:{avatarType:"user",firstName:n.firstName,lastName:n.lastName,isAgent:!0,isOnline:"available"===a,onlineStatusIcon:(0,w.getUserStatusIcon)(null==r?void 0:r.data)},extension:o}}))}),[n,e,t])}var or=function(e){var t=e.member,n=e.autoFocus,o=e.onInteraction,l=void 0===o?u.noop:o,d=t.displayName,p=t.avatarData,h=t.userId,b=t.extension,g=(0,ut.useNavigationState)("setActivePage"),v=(0,nt.useCommunicatorFloatingStateSetter)(),y=(0,ze.useInteractionStateMethods)().agentChatOpen,x=(0,i.useSessionState)(),C=x.userId,_=x.phoneDeviceCapabilities.canDial,S=(0,m.useLocalizationState)().t,E=(0,N.useCallHandler)(),j=function(e,t){var n=(0,m.useLocalizationState)().t,r=(0,ot.useModalsStateMethods)().openModal,o=(0,s.useRemoveMemberFromGroupChat)();return(0,a.useCallback)((function(){r({dataKey:"remove-chat-member-confirmation-dialog",body:n.CHAT_CENTER.remove_member_confirmation_text(t),actions:{ok:{title:n.CHAT_CENTER.remove_member_positive_button_text(),action:function(){o(e)}},cancel:{title:n.CHAT_CENTER.remove_member_negative_button_text()}}})}),[t,n,r,o,e])}(h,d),I=h===C,w=(0,a.useRef)(null);(0,f.useFocusElement)(w,{condition:n});var O=(0,a.useCallback)((function(){E({phone:b,firstName:p.firstName,lastName:p.lastName,userId:h,origination:"chat-center",navigateToInteractionsPage:!0}),l(),v((function(e){return"closed"===e?"floating":e}))}),[b,p.firstName,p.lastName,h,E,v,l]),A=(0,a.useCallback)((function(){var e,t;y({userId:h,firstName:null!==(e=p.firstName)&&void 0!==e?e:"",lastName:null!==(t=p.lastName)&&void 0!==t?t:"",origination:"chat-center",number:b}),l(),g({name:ut.AppRoutes.Interactions}),v((function(e){return"closed"===e?"floating":e}))}),[b,p.firstName,p.lastName,h,y,g,v,l]),T=(0,a.useMemo)((function(){return(0,r.jsxs)(r.Fragment,{children:[_&&b&&!I&&(0,r.jsx)(c.CircleButton,{onClick:O,tooltip:S.CONTACT.button_start_call_text(),noActiveState:!0,transparent:!0,clickThrottle:500,"data-testid":"call-button",children:(0,r.jsx)(dt.IconPhone,{})}),(0,r.jsx)(c.CircleButton,{onClick:A,tooltip:S.CONTACT.button_initiate_chat_text(),noActiveState:!0,transparent:!0,clickThrottle:500,"data-testid":"chat-button",children:(0,r.jsx)(dt.IconChat,{})}),!I&&(0,r.jsx)(c.CircleButton,{className:"!ml-3",onClick:j,tooltip:S.INTERNAL_CHAT.group_chat_remove_member_icon_tooltip(d),noActiveState:!0,transparent:!0,clickThrottle:500,"data-testid":"remove-member-button",children:(0,r.jsx)(oe,{})})]})}),[_,I,d,b,O,A,j,S]);return(0,r.jsx)(In.ContactListItem,{containerProps:{itemId:h,focusOnSelection:!0,touchedOnly:!0},as:c.SelectionItem,userId:h,avatarProps:p,title:d,onClick:u.noop,containerRef:w,contentClassName:"!pt-1 !px-5",controls:T})};function sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){i=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var lr=function(e){var t=e.closeModal,n=void 0===t?u.noop:t,o=(0,m.useLocalizationState)().t,i=(0,s.useGroupChatUIParams)().groupChatMembers,l=ir((0,a.useState)(""),2),d=l[0],f=l[1],p=ar(),h=(0,a.useCallback)((function(e){f(e.target.value)}),[]),b=(0,a.useCallback)((function(){return f("")}),[]),g=ir((0,a.useState)(""),2),v=g[0],y=g[1],x=(0,S.useGroupChatStateMethods)().getChatDisplayName;(0,a.useEffect)((function(){x(i).then(y)}),[i,x]);var C=(0,a.useMemo)((function(){return p.filter((function(e){return e.displayName.includes(d)})).map((function(e){return(0,r.jsx)(or,{onInteraction:n,member:e},e.userId)}))}),[p,d,n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Modal.Header,{role:"heading",id:"activeDialogHeader",children:v}),(0,r.jsxs)(c.Modal.Content,{children:[(0,r.jsx)(c.SearchInput,{onChange:h,onClear:b,value:d,className:"mb-2 w-full","aria-label":o.CHAT_CENTER.full_members_list_search_input_placeholder(),placeholder:o.CHAT_CENTER.full_members_list_search_input_placeholder(),"data-testid":"search-input",clearable:!0,fluid:!0}),(0,r.jsx)("div",{className:"max-h-[calc(min(672px,70vh))] min-h-[280px] overflow-y-auto overflow-x-hidden",children:C})]}),(0,r.jsx)(c.Modal.Actions,{children:(0,r.jsx)(c.SemanticButton,{onClick:n,className:"mx-1",children:o.CHAT_CENTER.full_members_list_close_button_text()})})]})},cr=function(e){var t,n=(0,m.useLocalizationState)().t,o=e.showAddMembersUI,i=(0,s.useGroupChatItem)(),l=(t=(0,ot.useModalsStateMethods)().openModal,(0,a.useCallback)((function(){t({dataKey:"full-chat-members-list-dialog",content:(0,r.jsx)(lr,{})})}),[t])),u=ar(),d=u.length,f=Gn(),p=(0,a.useMemo)((function(){return u.slice(0,d>7?5:d)}),[d,u]),h="border-none bg-transparent m-0 cursor-pointer w-full text-base/[16px]\n    text-chat-center-message-text-color hover:bg-contact-list-bg-hover";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.SelectionContainer,{className:"w-full",children:p.map((function(e,t){return(0,r.jsx)(or,{autoFocus:0===t,member:e},e.userId)}))}),d>7&&(0,r.jsx)(c.Button,{enabledInOffline:!0,className:He(h,"px-4 py-3"),onClick:l,children:n.CHAT_CENTER.show_all_participants_button_text(String(d))}),!(null==i?void 0:i.disabled)&&"TEAM"!==(null==i?void 0:i.type)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Button,{className:He(h,"border-t !border-solid !border-chat-center-add-people-btn px-4 py-3"),onClick:o,children:n.CHAT_CENTER.add_people_button_text()}),(0,r.jsx)(c.Button,{className:He(h,"px-4 py-3"),onClick:f,children:n.CHAT_CENTER.leave_chat_button_text()})]})]})};function ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){i=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ur(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ur(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var fr=[".ui.modals"],mr=function(e){var t=e.openerRef,n=e.className,o=e.closePopup,i=(0,s.useGroupChatUIParams)().groupChatMembers.length>2?"members-list":"add-member",l=dr((0,a.useState)(i),2),u=l[0],d=l[1],m=(0,a.useCallback)((function(){return d("add-member")}),[]),p=(0,a.useCallback)((function(){return d("members-list")}),[]),h=(0,a.useCallback)((function(){o(),p()}),[o,p]);return(0,f.useEscapeManager)(o),(0,r.jsxs)(c.ClickOutsideWrapper,{onClickOutside:h,openerRef:t,className:He("z-[6] flex w-[420px] flex-col overflow-hidden rounded border border-primary-legacy bg-white shadow",n),selectorExceptions:fr,children:["members-list"===u&&(0,r.jsx)(cr,{showAddMembersUI:m}),"add-member"===u&&(0,r.jsx)(tr,{showMembersListUI:p,closePopup:o})]})};Object.freeze([]);var pr=function(e){var t=e.size,n=void 0===t?"24":t,o=(0,m.useLocalizationState)().t,s=(0,a.useRef)(null),i=(0,f.useBoolean)(),l=i.value,c=i.toggle,u=i.setFalse;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($e.ButtonIcon,{active:l,tooltip:o.CHAT_CENTER.chat_header_members_icon_tooltip(),className:"flex cursor-pointer items-center justify-center border-none bg-none p-0",ref:s,onClick:c,children:"24"===n?(0,r.jsx)($e.IconProfile24,{}):(0,r.jsx)($e.IconProfile16,{})}),l&&(0,r.jsx)(mr,{closePopup:u,openerRef:s,className:"absolute right-0 top-10"})]})},hr=function(){var e,t,n=(0,i.useSessionState)(),o=(0,w.useUserDetails)(),l=(0,s.useGroupChatItem)(),u=l||{},d=u.title,f=u.members,m=u.chatId,p=null!==(t=null==f?void 0:f.filter((function(e){return e.id!==n.userId})))&&void 0!==t?t:[],h=1===p.length?p[0].id:void 0,b=Qe({chatData:l,p2pUser:h?null===(e=o[h])||void 0===e?void 0:e.data:void 0,session:n}),g=(0,S.useGroupChatStateMethods)().renameGroupChat,v=(0,a.useCallback)((function(e){m&&g(m,e)}),[m,g]);return f?(0,r.jsxs)("div",{className:"p flex h-15 border-b border-main-border pl-6 pr-8",children:[(0,r.jsxs)("div",{className:"flex items-center overflow-hidden pl-2",children:[(0,r.jsx)(O.AvatarLegacy,{className:"mr-5 inline-block",firstName:b.firstName,lastName:b.lastName,url:b.url,size:32,icon:b.icon,online:b.isOnline,onlineStatus:b.onlineStatusIcon,headPhones:b.isAgent,type:b.avatarType}),(0,r.jsx)(c.InputOnClick,{text:d,className:"truncate text-xl font-semibold text-main",onBlur:v})]}),(0,r.jsx)("div",{className:"relative ml-auto flex items-center",children:(0,r.jsx)(pr,{})})]}):null},br=function(){var e=(0,m.useLocalizationState)().t;return(0,r.jsxs)("div",{className:"relative flex h-full w-[calc(100%-310px)] flex-auto flex-col justify-between overflow-hidden",children:[(0,r.jsx)("div",{className:"ml-4 flex flex-[1_0_auto] items-center justify-center",children:(0,r.jsxs)("div",{className:"leading-[23px] text-main",children:[(0,r.jsx)("span",{className:"block text-xl",children:e.CHAT_CENTER.potential_chat_message_main_text()}),(0,r.jsx)("span",{className:"block text-base",children:e.CHAT_CENTER.potential_chat_message_secondary_text()})]})}),(0,r.jsx)(dn,{})]})},gr=function(){var e=(0,s.useGroupChatUIParams)(),t=e.groupChatId,n=e.groupChatMembers;return Boolean(!t&&n.length)?(0,r.jsx)(br,{}):t?(0,r.jsxs)("div",{className:"flex w-[calc(100%-310px)] flex-auto flex-col",children:[(0,r.jsx)(hr,{}),(0,r.jsx)(pn,{})]}):null},vr=o().memo((function(){return(0,r.jsx)(gn,{scope:"chatCenter",children:(0,r.jsxs)("div",{"data-testid":"chat-center-page",className:"flex h-full w-full flex-col flex-nowrap",children:[(0,r.jsx)(En,{}),(0,r.jsxs)("div",{className:"flex h-[calc(100%-56px)] w-full flex-row flex-nowrap",children:[(0,r.jsx)(zn,{}),(0,r.jsx)(gr,{})]})]})})})),yr=(0,a.memo)((function(e){var t=e.scope,n=e.size;return(0,r.jsx)(gn,{scope:t,children:(0,r.jsx)(pr,{size:n})})})),xr=n(9022),Cr=n(5886),_r=n(7421),Sr=new URL("http://localhost:9897");Sr.searchParams.append("domain",location.hostname);var Er=Sr.toString(),jr="bpClient/onShowDomainAuthorizationDialog",Ir="cursor-pointer text-primary-legacy",Nr="ext-link",wr="ext-link-firefox",Or="plugin-link",Ar=function(e){var t=e.isExtAvailable,n=e.install,o=(0,m.useLocalizationState)().t.INSTALLATION_PROCESS,s=(0,Fe.useInstallationMethods)(),i=s.installChromeExtension,l=s.installFirefoxExtension,c=s.installBPClientPlugin;(0,a.useEffect)((function(){var e=document.getElementById(Nr),t=document.getElementById(wr),n=document.getElementById(Or);return null==e||e.addEventListener("click",i),null==t||t.addEventListener("click",l),null==n||n.addEventListener("click",c),function(){null==e||e.removeEventListener("click",i),null==t||t.removeEventListener("click",l),null==n||n.removeEventListener("click",c)}}),[i,l,c]);var u=o.install_updateHeader(Or,Ir);return n&&(u="chrome"===yt.platformInfo.browser?t?o.install_installHeader(Or,Ir):o.install_installHeaderChrome(Nr,Or,Ir):"firefox"===yt.platformInfo.browser?t?o.install_installHeader(Or,Ir):o.install_installHeaderFirefox(wr,Or,Ir):o.install_installHeader(Or,Ir)),(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:u}})};var Tr=function(e){var t=e.browserName,n=(0,m.useLocalizationState)("t").INSTALLATION_PROCESS,a=(0,i.useSessionState)("serverOrigin"),o="chrome"===yt.platformInfo.browser,s="firefox"===yt.platformInfo.browser,l="safari"===yt.platformInfo.browser,c="";return o?c=Fe.URL_EXTENSION_INSTALLER_CHROME:s?c=a+Fe.URL_EXTENSION_INSTALLER_FIREFOX:l&&(c=a+Fe.URL_MAC_PLUGIN),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:n.bp_client_old_extension_version(t)}),(o||s||l)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{children:n.bp_client_update_extension_part1()}),(0,r.jsx)("a",{href:c,rel:"noopener noreferrer",target:"_blank",children:n.bp_client_update_extension_text()}),(0,r.jsx)("span",{children:n.bp_client_update_extension_part2()})]})]})},Mr=function(){return location.reload()};var kr=5e3;function Pr(){var e,t,n,o,s,l,c,u,p,h,b,g;e=(0,_r.useBpClientStateConnector)(),t=(0,ot.useModalsStateMethods)(),n=t.openModal,o=t.closeModal,s=(0,m.useLocalizationState)("t"),l=(0,f.useEvent)((function(){n({id:jr,title:s.INSTALLATION_PROCESS.bp_client_not_authorized_header(),body:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:s.INSTALLATION_PROCESS.bp_client_not_authorized_message_part1()}),(0,r.jsx)("a",{href:Er,rel:"noopener noreferrer",target:"_blank",children:s.ERROR_MESSAGES.domainAuthentificationErrorAnchor()}),(0,r.jsx)("span",{children:s.INSTALLATION_PROCESS.bp_client_not_authorized_message_part2()})]}),actions:function(e){var t=e.closeModal;return(0,r.jsx)(d.SmButton,{onClick:t,children:s.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})}})})),c=(0,f.useEvent)((function(){o(jr)})),(0,a.useEffect)((function(){return e.dispenser.subscribe({onShowDomainAuthorizationDialog:l,onHideDomainAuthorizationDialog:c}).unsubscribe}),[e,l,c]),function(){var e=(0,m.useLocalizationState)("t").WINDOW_POPUP_TITLES_AND_MESSAGES,t=(0,_r.useBpClientState)("isExtensionAvailable"),n=(0,_r.useBpClientStateConnector)(),o=(0,ot.useModalsStateMethods)().openModal,s=(0,f.useEvent)((function(n){o({title:e.window_title_warning(),body:(0,r.jsx)(Ar,{install:n,isExtAvailable:t}),actions:{ok:{title:e.window_buttonOk()}}})}));(0,a.useEffect)((function(){return n.dispenser.subscribe({onInstallationRequired:s}).unsubscribe}),[n,s])}(),u=(0,at.useNotificationsState)("methods").showNotification,p=(0,bt.useOfflineStateMethods)().setShowOfflineAlert,h=(0,bt.useOfflineStateDataShowOfflineAlert)(),b=(0,bt.useOfflineErrorMessages)(),g=(0,bt.useIsOffline)(),(0,a.useEffect)((function(){h&&u({type:"error",id:at.Notifications.OfflineStateError,content:b.isOffline,closable:!0,duration:5e3,onHide:function(){return p(!1)}})}),[b.isOffline,p,u,h]),(0,a.useEffect)((function(){g||p(!1)}),[g,p]),function(){var e=(0,_r.useBpClientStateConnector)(),t=(0,m.useLocalizationState)("t").WINDOW_POPUP_TITLES_AND_MESSAGES,n=(0,ot.useModalsStateMethods)().openModal,o=(0,f.useEvent)((function(e){n({title:t.window_title_warning(),body:(0,r.jsx)(Tr,{browserName:e}),actions:function(e){var n=e.closeModal;return(0,r.jsx)(d.SmButton,{onClick:n,children:t.window_buttonOk()})}})}));(0,a.useEffect)((function(){return e.dispenser.subscribe({onShowExtensionIsOldDialog:o}).unsubscribe}),[e,o])}(),function(){var e=(0,at.useNotificationsState)("methods"),t=e.showNotification,n=e.hideNotificationById,o=(0,xt.useAppConfigState)("isClientOutdated"),s=(0,i.useSessionState)("isLoggedIn"),l=(0,m.useLocalizationState)("t").GLOBAL,c=(0,f.useEvent)((function(){s&&(o?t({type:"error",id:at.Notifications.OutdatedClientAppError,message:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:l.reload_confirm_new_msg_part1()}),(0,r.jsx)("a",{href:"#",onClick:Mr,children:l.reload_confirm_action_button_text()}),(0,r.jsx)("span",{children:l.reload_confirm_new_msg_part2()})]})}):n(at.Notifications.OutdatedClientAppError))}));(0,a.useEffect)((function(){c()}),[o,c])}(),function(){var e=(0,i.useSessionStateConnector)(),t=(0,_r.useBpClientState)("isHelperAppInstanceCreated"),n=(0,at.useNotificationsState)("methods"),r=n.showNotification,o=n.hideNotificationById,s=(0,i.useSessionState)("phoneType"),l=(0,m.useLocalizationState)("t"),c=(0,f.useEvent)((function(e){if(e.canDial||"phone_type_none"===s)rt.bpLogger.info("SIP phone or external line is in service"),o(at.Notifications.PhoneOutOfServiceError);else{var n;switch(rt.bpLogger.warn("SIP phone or external line is out of service"),s){case"phone_type_nailed":n=l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_virtual_phone_not_available();break;case"phone_type_soft_secure":case"phone_type_soft_unsecure":n=t?l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_phone_not_available():l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_helper_app_not_available();break;default:n=l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_phone_not_available()}r({type:"error",id:at.Notifications.PhoneOutOfServiceError,message:n,closable:!1,showDelay:kr})}})),u=(0,f.useEvent)((function(e,t){"agentServer"===e&&4===t&&r({type:"warning",id:at.Notifications.PhoneOutOfServiceError,message:l.ERROR_MESSAGES.phoneIsNotRegistered(),closable:!1,showDelay:kr})})),d=(0,f.useEvent)((function(){r({type:"warning",id:at.Notifications.PhoneOutOfServiceError,message:l.WINDOW_POPUP_TITLES_AND_MESSAGES.window_messages_3pcc_server_connectionLost(),closable:!1,showDelay:kr})})),p=(0,f.useEvent)((function(){o(at.Notifications.PhoneOutOfServiceError)}));(0,a.useEffect)((function(){return e.dispenser.subscribe({onUpdateCapabilities:c,onServerError:u,onThreePCCServerGone:d,onThreePCCServerReady:p}).unsubscribe}),[c,u,d,p,e])}(),function(){var e=(0,at.useNotificationsState)("methods"),t=e.showNotification,n=e.hideNotificationById,r=(0,m.useLocalizationState)("t").WINDOW_POPUP_TITLES_AND_MESSAGES,o=(0,i.useSessionState)("sipServer"),s=(0,f.usePreviousValueRef)(o),l=(0,f.useEvent)((function(){o?n(at.Notifications.SipServerConnectionError):s.current&&t({type:"error",id:at.Notifications.SipServerConnectionError,message:r.window_messages_3pcc_server_connectionLost()})}));(0,a.useEffect)((function(){l()}),[o,l])}(),function(){var e=(0,at.useNotificationsState)("methods"),t=e.showNotification,n=e.hideNotificationById,r=(0,m.useLocalizationState)("t").GLOBAL,o=(0,a.useRef)(0),s=(0,f.useEvent)((function(){0!==o.current||(o.current=(new Date).getTime(),fetch("/",{method:"HEAD",cache:"no-store"}).catch((function(e){return console.error(e)})).finally((function(){var e=(new Date).getTime()-o.current;if(o.current=0,e>800){var a=r.slow_connection();t({type:"error",id:at.Notifications.SlowNetworkConnectionError,message:a}),rt.bpLogger.warn("Slow connection detected")}else n(at.Notifications.SlowNetworkConnectionError)})))}));(0,a.useEffect)((function(){var e=setInterval(s,5e3);return function(){return clearInterval(e)}}),[s])}(),function(){var e=(0,at.useNotificationsState)("methods"),t=e.showNotification,n=e.hideNotificationById,o=(0,_r.useBpClientState)("isDomainAuthorized"),s=(0,m.useLocalizationState)("t").ERROR_MESSAGES,i=(0,f.useEvent)((function(){o?n(at.Notifications.DomainNotAuthorizedForBPClientError):t({type:"error",id:at.Notifications.DomainNotAuthorizedForBPClientError,closable:!1,message:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:s.domain_authentication_error_part1()}),(0,r.jsx)("a",{href:Er,rel:"noopener noreferrer",target:"_blank",children:s.domainAuthentificationErrorAnchor()}),(0,r.jsx)("span",{children:s.domain_authentication_error_part2()})]})})}));(0,a.useEffect)((function(){i()}),[o,i])}()}var Rr=function(e){var t=e.baseConnectors,n=e.authorizedConnectors,a=e.children;return Pr(),(0,r.jsx)(r.Fragment,{children:a(t,n)})},Lr=n(5100),Dr=n(9464),Hr=function(){var e=(0,i.useSessionState)("forceLogoutInfo"),t=(0,i.useSessionStateMethods)().closeForceLogout,n=(0,I.useFormatting)().formatFullName,a=(0,m.useLocalizationState)().t;(0,A.assertDefined)(e);var o=n(e.firstName,e.lastName),s=(0,v.formatDate)(e.timestamp);return(0,r.jsx)(d.SmSegment,{padded:!0,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2   overflow-hidden rounded-none border-none bg-transparent shadow-none",id:"login",children:(0,r.jsxs)(c.Modal,{isOpen:!0,size:"small",className:"max-w-[570px]","aria-describedby":"forceLogoutDialogDescription","data-testid":"forced-logout-modal",children:[(0,r.jsx)(c.Modal.Header,{children:a.WINDOW_POPUP_TITLES_AND_MESSAGES.window_title_information()}),(0,r.jsx)(c.Modal.Content,{children:(0,r.jsx)(c.Modal.Description,{id:"forceLogoutDialogDescription",children:(0,r.jsx)("p",{children:function(){switch(e.errorCode){case Dr.incomingErrorMessageCodes.forced_logout_by_another_session:return a.ERROR_MESSAGES.sessionWasOverwritten();case Dr.incomingErrorMessageCodes.forced_logout_by_supervisor:return a.ERROR_MESSAGES.forcedLogout(o,s);case Dr.incomingErrorMessageCodes.forced_logout_by_disabling_tenant:case Dr.incomingErrorMessageCodes.forced_logout_by_disabling_user:return a.ERROR_MESSAGES.account_has_been_disabled()}return e.forceLogoutReason}()})})}),(0,r.jsx)(c.Modal.Actions,{children:(0,r.jsx)(d.SmButton,{onClick:t,primary:!0,"data-testid":"ok-button",children:a.WINDOW_POPUP_TITLES_AND_MESSAGES.window_buttonOk()})})]})})},Gr=function(){var e=(0,Ye.useCurrentTabRole)(),t=(0,i.useSessionState)(["authChecked","isLoggedIn","showLoginDialog","offerForceLogin","forceLogoutInfo"]),n=t.authChecked,a=t.isLoggedIn,o=t.showLoginDialog,s=t.offerForceLogin,l=t.forceLogoutInfo,u=!(0,m.useLocalizationState)("language")||"undecided"===e&&!n,d=!u&&(o||!a),f=!!l&&d,p=s&&!l&&d;return(0,r.jsxs)("div",{className:"mx-auto h-full w-[496px]",children:[u&&(0,r.jsx)(c.Loader,{active:!0,size:"huge",color:"primary"}),d&&(0,r.jsx)(Lr.LoginPage,{}),f&&(0,r.jsx)(Hr,{}),p&&(0,r.jsx)(Lr.ForceLogin,{})]})},Br=o().memo((function(e){var t=e.baseConnectors,n=e.children;return(0,i.useSessionState)("isLoggedIn")?(0,r.jsx)(Cr.AuthorizedProviders,{baseConnectors:t,children:function(e){return(0,r.jsx)(Rr,{baseConnectors:t,authorizedConnectors:e,children:n})}}):(0,r.jsx)(Gr,{})})),Ur=function(e){var t=e.baseConnectors,n=e.children,a=e.BaseConnectorsConsumer;return a?(0,r.jsx)(a,{baseConnectors:t,children:n}):n},Fr=function(e){var t=e.app,n=e.platformSpecific,a=e.BaseConnectorsConsumer,o=e.children;return(0,r.jsx)(Cr.BaseProviders,{platformSpecific:n,app:t,children:function(e){return(0,r.jsx)(Ur,{baseConnectors:e,BaseConnectorsConsumer:a,children:(0,r.jsx)($e.Tooltip.Provider,{children:(0,r.jsx)(at.NotificationsStateProvider,{children:o(e)})})})}})},zr=function(e){var t=e.app,n=e.platformSpecific,a=e.children,o=e.BaseConnectorsConsumer,s=e.className,i=e.appRemoteName;return(0,r.jsx)(c.AppStyleSelector,{app:i,children:(0,r.jsx)("div",{className:He("h-full",s),children:(0,r.jsx)(Fr,{app:t,platformSpecific:n,BaseConnectorsConsumer:o,children:function(e){return(0,r.jsx)(Br,{baseConnectors:e,children:a})}})})})},Zr=n(801),Wr={communicator:{floatingState:"closed",openerRef:{current:null},width:0,parallelInteractionsWidth:0,setParallelInteractionsWidth:u.noop,setWidth:u.noop,setFloatingState:u.noop},statusesPanel:{isVisible:!1,toggleVisibility:u.noop},interactionUIState:{},interactions:{lastPlayedPrerecordedMessagesIds:new Set,addLastPlayedPrerecordedMessagesIds:u.noop},kbWidth:0,kbFloatingState:"closed",mainContentNode:null,setMainContentNode:u.noop,interactionWorkspace:{shownWorkspaceTabs:void 0,shownWorkspaceItem:void 0,shownWorkspaceTabId:void 0,activateItemTab:u.noop,removeItemTab:u.noop},setKBWidth:u.noop,setKBFloatingState:u.noop,settings:{show:!1,toggleShow:u.noop},setInteractionItemUIState:u.noop},qr=(0,f.createProviderWrapper)([function(e){var t=e.children;return(0,r.jsx)(nt.MainPageUIContext.Provider,{value:Wr,children:t})}]),Vr=function(){return(0,r.jsx)(zr,{platformSpecific:(0,xr.createPlatformSpecific)("chat-center"),app:"chat-center",appRemoteName:"chatCenter",children:function(){return(0,r.jsxs)(qr,{children:[(0,r.jsx)(vr,{}),(0,r.jsx)(Zr.Modals,{})]})}})}}}]);
//# sourceMappingURL=152.c56d0f4f.chunk.js.map